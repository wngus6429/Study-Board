(()=>{var e={};e.id=656,e.ids=[656],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},84081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>g,tree:()=>u}),r(24632),r(60246),r(91884),r(59198);var s=r(30170),a=r(45002),i=r(83876),n=r.n(i),o=r(66299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["(afterLogin)",{children:["edit",{children:["suggestion",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24632)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\(afterLogin)\\edit\\suggestion\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e),async e=>(await Promise.resolve().then(r.bind(r,71150))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,60246)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,91884)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,59198)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e),async e=>(await Promise.resolve().then(r.bind(r,71150))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\(afterLogin)\\edit\\suggestion\\[id]\\page.tsx"],d="/(afterLogin)/edit/suggestion/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(afterLogin)/edit/suggestion/[id]/page",pathname:"/edit/suggestion/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},28898:(e,t,r)=>{Promise.resolve().then(r.bind(r,99523))},78726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)([(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,a.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt")},89533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 12h-2v-2h2zm0-4h-2V6h2z"}),"Feedback")},77740:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)((0,a.jsx)("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1m-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1"}),"Forum")},21460:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},41738:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)((0,a.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")},79385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)((0,a.jsx)("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1m-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1"}),"QuestionAnswer")},22546:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(70531),a=r(97247);let i=(0,s.Z)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14zm12 0h-7.5l2-2H18z"}),"RateReview")},99523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var s=r(97247),a=r(28964),i=r(34178),n=r(41755),o=r(9190),l=r(88111),u=r(10863),c=r(24222),d=r(42658),p=r(24091),g=r(74247),h=r(53187),m=r(72497),x=r(37247),v=r(3701),f=r(53291),b=r(19898),y=r(64560);function Z({params:e}){let t=(0,n.NL)(),r=(0,i.useRouter)(),{data:Z,status:j}=(0,b.useSession)(),{showMessage:w}=(0,y.U)(e=>e),[C,q]=(0,a.useState)(""),[S,P]=(0,a.useState)(""),[L,_]=(0,a.useState)(f.ey),[M,k]=(0,a.useState)([]),[A,D]=(0,a.useState)(!1),{data:E,isLoading:z}=(0,o.a)({queryKey:["suggestion","edit",e?.id],queryFn:async()=>{try{return(await u.Z.get(`http://localhost:9999/api/suggestion/detail/edit/${e.id}?userId=${Z?.user.id}`,{withCredentials:!0})).data}catch(e){throw console.error("Error fetching suggestion detail",e),u.Z.isAxiosError(e)&&e.response?.status===403&&r.push("/"),e}},retry:1,retryDelay:()=>2e3,enabled:!!e.id&&!!Z?.user.id}),V=(0,l.D)({mutationFn:async t=>{await u.Z.post(`http://localhost:9999/api/suggestion/update/${e.id}`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})},retry:1,retryDelay:()=>2e3,onSuccess:()=>{D(!1),w("수정 성공","success"),t.invalidateQueries({queryKey:["suggestion","detail",e.id]}),r.back()},onError:e=>{D(!1),w("수정 실패, 이전 화면으로 이동합니다","error"),console.error(e),r.back()}}),H=e=>{if(C.length<3||S.length<3){w("제목과 내용을 3글자 이상 입력해주세요","error");return}D(!0),e.preventDefault();let t=new FormData;t.append("title",C);let r=S,s="http://localhost:9999";if(s){let e=s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");r=(r=r.replace(RegExp(`src="${e}/suggestionUpload/([^"]+)"`,"g"),'src="/suggestionUpload/$1"')).replace(/src="blob:[^"]*"/g,'src=""')}t.append("content",r),t.append("category",L),M.forEach(e=>{t.append("images",e)}),Array.from(t.entries()).forEach(([e,t])=>{}),V.mutate(t)};return z?s.jsx(m.default,{}):(0,s.jsxs)(c.Z,{component:"form",onSubmit:H,padding:4,sx:{width:"60%",margin:"auto",mt:5,bgcolor:"background.paper",boxShadow:3,borderRadius:3,mb:5},children:[s.jsx(d.Z,{variant:"h4",marginBottom:3,sx:{fontWeight:"bold",textAlign:"center",color:"primary.main"},children:"건의사항 수정하기"}),s.jsx(p.Z,{name:"title",label:"제목 (필수)",variant:"outlined",fullWidth:!0,margin:"normal",value:C,onChange:e=>q(e.target.value),sx:{bgcolor:"background.default",borderRadius:2,mb:2}}),s.jsx(v.Z,{selectArray:f.CQ,defaultValue:f.ey,setSelectedCategory:_,value:L}),(0,s.jsxs)(c.Z,{sx:{mb:2},children:[s.jsx(d.Z,{variant:"body1",sx:{mb:1,fontWeight:500,mt:-1},children:"내용 (필수)"}),s.jsx(x.Z,{value:S,onChange:P,placeholder:"건의사항 내용을 입력해주세요",height:"400px",onFilesChange:e=>{k(e)}})]}),(0,s.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[s.jsx(g.Z,{variant:"outlined",color:"error",onClick:()=>r.back(),sx:{flex:1,marginRight:1,fontWeight:"bold"},children:"취소"}),s.jsx(g.Z,{variant:"contained",color:"success",onClick:H,disabled:A||C.length<3||S.length<3,sx:{flex:1,marginLeft:1,fontWeight:"bold"},startIcon:A&&s.jsx(h.Z,{size:20,color:"inherit"}),children:"수정"})]})]})}},3701:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(97247),a=r(28964),i=r(54468),n=r(71831),o=r(35361),l=r(94307);let u=({selectArray:e,defaultValue:t,setSelectedCategory:r,value:u})=>{let c=e.find(e=>e.value===t),[d,p]=(0,a.useState)(c?.value||""),[g,h]=(0,a.useState)(!1);return(0,s.jsxs)(o.Z,{sx:{m:1,width:"100%",margin:0,marginBottom:3},children:[s.jsx(i.Z,{id:"demo-controlled-open-select-label",children:"종류"}),s.jsx(l.Z,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:g,onClose:()=>h(!1),onOpen:()=>h(!0),value:u||d,label:"글 종류",onChange:e=>{p(e.target.value),r(e.target.value)},MenuProps:{disableScrollLock:!0},children:e.map((e,t)=>s.jsx(n.Z,{value:e.value,children:e.name},t))})]})}},53291:(e,t,r)=>{"use strict";r.d(t,{ey:()=>x,E2:()=>g,CQ:()=>m,Ik:()=>h,KX:()=>p});var s=r(97247),a=r(77740),i=r(79385),n=r(21460),o=r(22546),l=r(78726),u=r(41738);let c=(0,r(70531).Z)((0,s.jsx)("path",{d:"M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L12 10.66 10.48 12h.01L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l2.83-2.5.01.01L13.52 12h-.01l2.69-2.39c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37"}),"AllInclusive");var d=r(89533);let p=[{name:"잡담",value:"chat",icon:s.jsx(a.Z,{})},{name:"질문",value:"question",icon:s.jsx(i.Z,{})},{name:"정보",value:"info",icon:s.jsx(n.Z,{})},{name:"리뷰",value:"review",icon:s.jsx(o.Z,{})},{name:"스샷",value:"screenshot",icon:s.jsx(l.Z,{})},{name:"기타",value:"etc",icon:s.jsx(u.Z,{})}],g=p[0].value,h=[{name:"전체",value:"all",icon:s.jsx(c,{})},...p,{name:"건의",value:"suggestion",icon:s.jsx(d.Z,{})}],m=[{name:"건의",value:"suggestion"},{name:"문의",value:"inquiry"},{name:"신고",value:"report"}],x="suggestion"},24632:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\(afterLogin)\edit\suggestion\[id]\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,819,507,33,247],()=>r(84081));module.exports=s})();