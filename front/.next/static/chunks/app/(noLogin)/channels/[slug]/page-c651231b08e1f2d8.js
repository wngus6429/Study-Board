(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8348],{14593:function(e,t,a){Promise.resolve().then(a.bind(a,67553)),Promise.resolve().then(a.bind(a,94623))},67553:function(e,t,a){"use strict";a.d(t,{default:function(){return tS}});var r=a(57437),n=a(2265),o=a(31691),i=a(35389),s=a(36137),d=a(2069),l=a(67208),c=a(46387),g=a(53392),p=a(79507),x=a(77468),b=a(9026),h=a(91991),u=a(621),m=a(72549),f=a(99376),k=a(29827),v=a(16593),y=a(21770),j=a(80605),w=a(30419),Z=a(99154),S=a(96407),C=a(3011),I=a(89134);let z=(0,C.U)()((0,I.tJ)((e,t)=>({subscribedChannels:[],loading:!1,error:null,subscribeToChannel:(a,r,n)=>{let{subscribedChannels:o}=t();o.find(e=>e.channelId===a)||e({subscribedChannels:[...o,{channelId:a,channelName:r,channelSlug:n,subscribedAt:new Date().toISOString()}],error:null})},unsubscribeFromChannel:a=>{let{subscribedChannels:r}=t();e({subscribedChannels:r.filter(e=>e.channelId!==a),error:null})},isSubscribedToNotifications:e=>{let{subscribedChannels:a}=t();return a.some(t=>t.channelId===e)},getSubscribedChannelIds:()=>{let{subscribedChannels:e}=t();return e.map(e=>e.channelId)},clearAllSubscriptions:()=>{e({subscribedChannels:[],error:null})}}),{name:"channel-notification-storage",partialize:e=>({subscribedChannels:e.subscribedChannels})}));var D=a(4871),R=a(11471),_=a(16210),P=a(70208),W=a(59469),T=a(52988),A=a(83476),M=a(22095),U=a(32281),E=a(54301),Y=a(53410),L=a(71096),F=a.n(L),q=a(45721),N=a.n(q),O=a(67571),H=a(51861),B=a(72076),K=a(52572),G=a(21472),Q=a(94395),X=a(25769),V=a(27186),J=a(4026),$=a(52441),ee=a(23755),et=a(35386),ea=a(91186);F().extend(N());let er=(0,_.ZP)(T.Z)(e=>{let{theme:t}=e;return{["&.".concat(A.Z.head)]:{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.8)":t.palette.common.black,color:t.palette.common.white,fontWeight:600},["&.".concat(A.Z.body)]:{fontSize:14,height:"60px",color:"dark"===t.palette.mode?"#e2e8f0":"inherit"}}}),en=(0,_.ZP)(E.Z)(e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:"dark"===t.palette.mode?"rgba(26, 26, 46, 0.5)":t.palette.action.hover},"&:nth-of-type(even)":{backgroundColor:"dark"===t.palette.mode?"rgba(26, 26, 46, 0.3)":"transparent"},"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.1)":"#ffdef0",transition:"background-color 0.3s ease"},height:"60px"}});(0,_.ZP)(E.Z)(e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.2)":"#fff8e1","&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.3)":"#ffecb3",transition:"background-color 0.3s ease"},"&:last-child td, &:last-child th":{border:0},height:"60px"}});var eo=e=>{let{tableData:t,onRowClick:a}=e,n=(0,f.useRouter)(),i=(0,o.Z)(),s=e=>{switch(e){case"question":return(0,r.jsx)(O.Z,{icon:(0,r.jsx)(K.Z,{}),label:"질문",color:"secondary",size:"small",sx:{mr:1}});case"chat":return(0,r.jsx)(O.Z,{icon:(0,r.jsx)(V.Z,{}),label:"잡담",color:"default",size:"small",sx:{mr:1}});case"info":return(0,r.jsx)(O.Z,{icon:(0,r.jsx)(J.Z,{}),label:"정보",color:"primary",size:"small",sx:{mr:1}});case"review":return(0,r.jsx)(O.Z,{icon:(0,r.jsx)($.Z,{}),label:"리뷰",color:"primary",size:"small",sx:{mr:1}});case"screenshot":return(0,r.jsx)(O.Z,{icon:(0,r.jsx)(ee.Z,{}),label:"스샷",color:"primary",size:"small",sx:{mr:1}});case"etc":return(0,r.jsx)(O.Z,{icon:(0,r.jsx)(et.Z,{}),label:"기타",color:"default",size:"small",sx:{mr:1}});default:return null}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(M.Z,{component:Y.Z,sx:{boxShadow:"dark"===i.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.15)":3,borderRadius:2,backgroundColor:"dark"===i.palette.mode?"rgba(26, 26, 46, 0.95)":"background.paper",border:"dark"===i.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"},children:(0,r.jsxs)(P.Z,{"aria-label":"customized table",children:[(0,r.jsx)(U.Z,{children:(0,r.jsxs)(E.Z,{children:[(0,r.jsx)(er,{sx:{width:"100px",textAlign:"center"},children:"번호"}),(0,r.jsx)(er,{sx:{width:"460px"},children:"제목"}),(0,r.jsx)(er,{sx:{width:"160px"},children:"작성자"}),(0,r.jsx)(er,{sx:{width:"150px",textAlign:"center"},children:"등록일"}),(0,r.jsx)(er,{sx:{width:"125px",textAlign:"center"},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(Q.Z,{fontSize:"small",sx:{mr:.5}}),"조회수"]})}),(0,r.jsx)(er,{sx:{width:"100px",textAlign:"center"},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(G.Z,{fontSize:"small",sx:{mr:.5}}),"추천"]})})]})}),(0,r.jsx)(W.Z,{children:0===t.length?(0,r.jsx)(en,{children:(0,r.jsx)(er,{colSpan:6,align:"center",sx:{height:"120px"},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[(0,r.jsx)(c.Z,{variant:"h6",children:"\uD83D\uDE0A 게시글이 없습니다"}),(0,r.jsx)(c.Z,{variant:"body2",color:"text.secondary",children:"첫 번째 게시글을 작성해보세요!"})]})})}):t.map(e=>(0,r.jsxs)(en,{onClick:()=>{sessionStorage.setItem("previousMainPageUrl",window.location.href),a?a(e.id):n.push("/detail/".concat(e.id))},sx:{cursor:"pointer"},children:[(0,r.jsx)(er,{component:"th",scope:"row",sx:{textAlign:"center"},children:e.id}),(0,r.jsx)(er,{children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",height:"100%"},children:[s(e.category)||(0,r.jsx)(d.Z,{sx:{width:"56px",height:"24px"}}),e.isRecommendRanking&&(0,r.jsx)(ea.Z,{sx:{fontSize:"1.2rem",color:"#ff9800",mr:1,verticalAlign:"middle"}}),(0,r.jsxs)(c.Z,{variant:"body1",color:"text.primary",component:"span",sx:{mr:1},children:[e.imageFlag&&(0,r.jsx)(H.Z,{sx:{fontSize:"1.1rem",ml:1,verticalAlign:"middle",color:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"4px",padding:"2px",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:"0 4px 8px rgba(16, 185, 129, 0.4)"}}}),e.videoFlag&&(0,r.jsx)(B.Z,{sx:{fontSize:"1.1rem",ml:1,verticalAlign:"middle",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",padding:"2px",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.3)",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:"0 4px 8px rgba(239, 68, 68, 0.4)"}}})]}),e.userId?(0,r.jsxs)(X.Z,{userId:e.userId,type:"post",children:[e.title," ",e.comment_count>0&&"(".concat(e.comment_count,")")]}):(0,r.jsxs)(r.Fragment,{children:[e.title," ",e.comment_count>0&&"(".concat(e.comment_count,")")]})]})}),(0,r.jsx)(er,{children:e.nickname.length>15?"".concat(e.nickname.slice(0,15),"..."):e.nickname}),(0,r.jsx)(er,{sx:{textAlign:"center"},children:F()(e.created_at).isSame(F()(),"day")?F()(e.created_at).format("HH:mm"):F()(e.created_at).format("YYYY/MM/DD")}),(0,r.jsx)(er,{sx:{textAlign:"center"},children:e.read_count}),(0,r.jsx)(er,{sx:{textAlign:"center"},children:e.recommend_Count})]},e.id))})]})})})},ei=a(89414),es=a(45841),ed=a(94896),el=a(33145);F().extend(N());var ec=e=>{let{tableData:t,onRowClick:a}=e,n=(0,f.useRouter)(),i=(0,o.Z)();return(0,r.jsx)(r.Fragment,{children:0===t.length?(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",width:"100%",border:"dark"===i.palette.mode?"1px dashed rgba(139, 92, 246, 0.3)":"1px dashed #ccc",borderRadius:2,p:3,background:"dark"===i.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(45, 48, 71, 0.9))":"#f9f9f9"},children:[(0,r.jsx)(c.Z,{variant:"h5",gutterBottom:!0,sx:{color:"dark"===i.palette.mode?"#e2e8f0":"inherit"},children:"\uD83D\uDE0A 게시글이 없습니다"}),(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===i.palette.mode?"#94a3b8":"text.secondary"},children:"첫 번째 게시글을 작성해보세요!"})]}):(0,r.jsx)(ei.ZP,{container:!0,spacing:1,sx:{p:1},children:t.map(e=>{var t;return(0,r.jsx)(ei.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,r.jsxs)(l.Z,{elevation:4,onClick:()=>{sessionStorage.setItem("previousMainPageUrl",window.location.href),a?a(e.id):n.push("/detail/".concat(e.id))},sx:{borderRadius:2,transition:"all 0.3s ease",display:"flex",flexDirection:"column",cursor:"pointer",background:"dark"===i.palette.mode?"linear-gradient(135deg, rgba(30, 32, 38, 0.95), rgba(45, 48, 71, 0.98))":"rgba(255, 255, 255, 0.95)",border:"dark"===i.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"dark"===i.palette.mode?"0 4px 20px rgba(139, 92, 246, 0.15), 0 0 40px rgba(139, 92, 246, 0.05)":"0 4px 20px rgba(0, 0, 0, 0.1)","&:hover":{transform:"translateY(-5px) scale(1.02)",boxShadow:"dark"===i.palette.mode?"0 8px 30px rgba(139, 92, 246, 0.3), 0 0 60px rgba(139, 92, 246, 0.1)":"0 8px 30px rgba(0, 0, 0, 0.15)",border:"dark"===i.palette.mode?"1px solid rgba(139, 92, 246, 0.4)":"1px solid rgba(139, 92, 246, 0.2)"}},children:[(0,r.jsx)(s.Z,{sx:{pb:0},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",flex:1},children:[e.isRecommendRanking&&(0,r.jsx)(ea.Z,{sx:{fontSize:"1.2rem",color:"#ff9800",mr:1,verticalAlign:"middle"}}),(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.imageFlag&&(0,r.jsx)(H.Z,{sx:{fontSize:"1.1rem",verticalAlign:"middle",color:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"4px",padding:"2px",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:"0 4px 8px rgba(16, 185, 129, 0.4)"}}}),e.videoFlag&&(0,r.jsx)(B.Z,{sx:{fontSize:"1.1rem",verticalAlign:"middle",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",padding:"2px",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.3)",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:"0 4px 8px rgba(239, 68, 68, 0.4)"}}}),(0,r.jsx)(c.Z,{variant:"h6",gutterBottom:!0,sx:{wordBreak:"break-word",color:"dark"===i.palette.mode?"#e2e8f0":"inherit",fontWeight:600},children:e.userId?(0,r.jsx)(X.Z,{userId:e.userId,type:"post",children:e.title}):e.title})]})]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",ml:1},children:[(0,r.jsx)(ed.Z,{fontSize:"small",sx:{mr:.5,color:"dark"===i.palette.mode?"#f87171":"error.main"}}),(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===i.palette.mode?"#94a3b8":"text.secondary",fontWeight:500},children:null!==(t=e.recommend_Count)&&void 0!==t?t:0})]})]})}),e.imageFlag&&e.firstImage?(0,r.jsx)(es.Z,{component:"img",width:"360",height:"200",image:"".concat("http://localhost:9999").concat(e.firstImage.link),alt:e.title}):e.videoFlag?(0,r.jsx)(el.default,{src:"/assets/Video.png",alt:"Video",width:360,height:200}):(0,r.jsx)(el.default,{src:"/assets/NoImage.PNG",alt:"No Image",width:360,height:200}),(0,r.jsxs)(s.Z,{sx:{pt:1,flexGrow:1},children:[(0,r.jsxs)(c.Z,{variant:"body2",sx:{color:"dark"===i.palette.mode?"#cbd5e1":"inherit",fontWeight:500},children:["작성자: ",e.nickname]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,r.jsxs)(c.Z,{variant:"caption",sx:{color:"dark"===i.palette.mode?"#94a3b8":"text.secondary"},children:["번호: ",e.id]}),(0,r.jsx)(c.Z,{variant:"caption",sx:{color:"dark"===i.palette.mode?"#94a3b8":"text.secondary"},children:F()(e.created_at).isSame(F()(),"day")?F()(e.created_at).format("HH:mm"):F()(e.created_at).format("YYYY/MM/DD")})]})]})]})},e.id)})})})};F().extend(N());let eg=(0,_.ZP)(T.Z)(e=>{let{theme:t}=e;return{["&.".concat(A.Z.head)]:{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.8)":t.palette.common.black,color:t.palette.common.white,fontWeight:600},["&.".concat(A.Z.body)]:{fontSize:14,height:"60px",color:"dark"===t.palette.mode?"#e2e8f0":"inherit"}}}),ep=(0,_.ZP)(E.Z)(e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:"dark"===t.palette.mode?"rgba(26, 26, 46, 0.5)":t.palette.action.hover},"&:nth-of-type(even)":{backgroundColor:"dark"===t.palette.mode?"rgba(26, 26, 46, 0.3)":"transparent"},"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.1)":"#ffdef0",transition:"background-color 0.3s ease"},height:"60px"}});function ex(e){let{tableData:t,channelSlug:a}=e,n=(0,f.useRouter)(),i=(0,o.Z)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(M.Z,{component:Y.Z,sx:{boxShadow:"dark"===i.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.15)":3,borderRadius:2,backgroundColor:"dark"===i.palette.mode?"rgba(26, 26, 46, 0.95)":"background.paper",border:"dark"===i.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"},children:(0,r.jsxs)(P.Z,{"aria-label":"suggestion table",children:[(0,r.jsx)(U.Z,{children:(0,r.jsxs)(E.Z,{children:[(0,r.jsx)(eg,{sx:{width:"100px",textAlign:"center"},children:"번호"}),(0,r.jsx)(eg,{sx:{width:"650px"},children:"제목"}),(0,r.jsx)(eg,{sx:{width:"180px"},children:"작성자"}),(0,r.jsx)(eg,{sx:{width:"80px",textAlign:"center"},children:"등록일"}),(0,r.jsx)(eg,{sx:{width:"80px",textAlign:"center"},children:"수정일"})]})}),(0,r.jsx)(W.Z,{children:0===t.length?(0,r.jsx)(ep,{children:(0,r.jsx)(eg,{colSpan:5,align:"center",children:"\uD83D\uDE0E건의 사항 없음"})}):t.map(e=>(0,r.jsxs)(ep,{onClick:()=>n.push("/channels/".concat(a,"/detail/suggestion/").concat(e.id)),sx:{cursor:"pointer"},children:[(0,r.jsx)(eg,{sx:{textAlign:"center"},children:e.id}),(0,r.jsx)(eg,{children:(0,r.jsx)(c.Z,{variant:"body1",color:"text.primary",component:"span",children:e.title})}),(0,r.jsx)(eg,{children:e.nickname}),(0,r.jsx)(eg,{sx:{textAlign:"center"},children:F()(e.created_at).isSame(F()(),"day")?F()(e.created_at).format("HH:mm"):F()(e.created_at).format("YYYY/MM/DD")}),(0,r.jsx)(eg,{sx:{textAlign:"center"},children:F()(e.updated_at).isSame(F()(),"day")?F()(e.updated_at).format("HH:mm"):F()(e.updated_at).format("YYYY/MM/DD")})]},e.id))})]})})})}var eb=a(94623),eh=a(71204),eu=a(27756),em=a(54862),ef=a(4740),ek=e=>{var t;let{channelData:a,channelNotices:n,noticesLoading:i,onNoticeClick:s,onWriteNotice:g}=e,p=(0,o.Z)(),{data:x}=(0,j.useSession)(),b=e=>{let t=new Date(e),a=new Date;return a.setDate(a.getDate()-3),t>a},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35;return e.length>t?"".concat(e.substring(0,t),"..."):e};return(0,r.jsxs)(l.Z,{sx:{borderRadius:"16px",background:"dark"===p.palette.mode?"rgba(30, 32, 38, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",border:"dark"===p.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(139, 92, 246, 0.15)",boxShadow:"dark"===p.palette.mode?"0 8px 32px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)(d.Z,{sx:{p:3,pb:2},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(c.Z,{variant:"h6",sx:{fontWeight:700,color:"dark"===p.palette.mode?"#ffffff":"#1a1a2e",display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,r.jsx)(eu.Z,{sx:{color:"#8b5cf6"}}),a.channel_name," 채널 공지사항"]}),(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===p.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",fontSize:"0.875rem"},children:"채널의 최신 공지사항을 확인하세요"})]}),(null==x?void 0:x.user)&&(null===(t=a.creator)||void 0===t?void 0:t.id)===x.user.id&&(0,r.jsx)(h.Z,{onClick:g,variant:"contained",startIcon:(0,r.jsx)(em.Z,{}),sx:{borderRadius:"12px",px:3,py:1.5,background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",fontWeight:"600",fontSize:"0.9rem",transition:"all 0.2s ease","&:hover":{background:"linear-gradient(135deg, #7c3aed, #6d28d9)",transform:"translateY(-1px)"}},children:"새 공지사항 작성"})]})}),(0,r.jsx)(d.Z,{sx:{px:3,pb:3,maxHeight:"400px",overflowY:"auto"},children:i?(0,r.jsx)(d.Z,{sx:{textAlign:"center",py:3},children:(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===p.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",fontStyle:"italic"},children:"공지사항을 불러오는 중..."})}):n.length>0?n.map(e=>(0,r.jsx)(d.Z,{onClick:()=>s(e.id),sx:{borderRadius:"8px",p:2,mb:1,backgroundColor:"dark"===p.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",border:"dark"===p.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"pointer","&:hover":{backgroundColor:"dark"===p.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)",transform:"translateX(4px)",borderColor:"dark"===p.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.2)"},"&:last-child":{mb:0}},children:(0,r.jsxs)(d.Z,{sx:{width:"100%"},children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,r.jsx)(c.Z,{variant:"body1",sx:{fontWeight:600,color:"dark"===p.palette.mode?"#ffffff":"#1a1a2e",fontSize:"0.95rem",lineHeight:1.3},children:u(e.title)}),b(e.created_at)&&(0,r.jsx)(O.Z,{icon:(0,r.jsx)(ef.Z,{sx:{fontSize:"0.8rem"}}),label:"NEW",size:"small",sx:{height:"22px",fontSize:"0.7rem",fontWeight:"bold",backgroundColor:"#8b5cf6",color:"white","& .MuiChip-icon":{color:"white"}}})]}),(0,r.jsx)(c.Z,{variant:"caption",sx:{color:"dark"===p.palette.mode?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",fontSize:"0.8rem"},children:new Date(e.created_at).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},e.id)):(0,r.jsxs)(d.Z,{sx:{textAlign:"center",py:4},children:[(0,r.jsx)(eu.Z,{sx:{fontSize:"3rem",color:"dark"===p.palette.mode?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",mb:2}}),(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===p.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",fontStyle:"italic"},children:"등록된 공지사항이 없습니다"})]})})]})},ev=a(56162),ey=a(47990);let ej=async e=>(await ey.Z.post("".concat("http://localhost:9999","/api/channel-notifications/subscribe/").concat(e),{},{withCredentials:!0})).data,ew=async e=>(await ey.Z.delete("".concat("http://localhost:9999","/api/channel-notifications/unsubscribe/").concat(e),{withCredentials:!0})).data,eZ=async e=>(await ey.Z.get("".concat("http://localhost:9999","/api/channel-notifications/status/").concat(e),{withCredentials:!0})).data;var eS=a(45345),eC=a(83464);let eI=e=>{let{category:t,currentPage:a,searchParamsState:r,recommendRankingMode:n,viewCount:o,initialData:i,viewMode:s,channelId:d}=e;return(0,v.a)({queryKey:r?["stories",t,a,r,n,d]:["stories",t,a,n,d],queryFn:async()=>{let e={offset:(a-1)*o,limit:o,category:"all"!==t?t:void 0};return(d&&d>0&&(e.channelId=d),n&&(e.minRecommend=R.jL),r&&""!==r.query.trim())?(e.type=r.type,e.query=r.query,"all"!==t&&(e.category=t),(await eC.Z.get("".concat("http://localhost:9999","/api/story/search"),{params:e})).data):(await eC.Z.get("".concat("http://localhost:9999","/api/story/pageTableData"),{params:e})).data},enabled:"table"===s&&(void 0===d||d>0),initialData:i,placeholderData:eS.Wk,refetchOnWindowFocus:!1})},ez=e=>{let{category:t,currentPage:a,searchParamsState:r,recommendRankingMode:n,viewCount:o,initialData:i,viewMode:s,channelId:d}=e;return(0,v.a)({queryKey:r?["stories","cards",t,a,r,n,d]:["stories","cards",t,a,n,d],queryFn:async()=>{let e={offset:(a-1)*o,limit:o,category:"all"!==t?t:void 0};return(d&&d>0&&(e.channelId=d),n&&(e.minRecommend=R.jL),r&&""!==r.query.trim())?(e.type=r.type,e.query=r.query,"all"!==t&&(e.category=t),(await eC.Z.get("".concat("http://localhost:9999","/api/story/cardSearch"),{params:e})).data):(await eC.Z.get("".concat("http://localhost:9999","/api/story/cardPageTableData"),{params:e})).data},enabled:"card"===s&&(void 0===d||d>0),placeholderData:eS.Wk,refetchOnWindowFocus:!1})};var eD=a(15273),eR=a(67116),e_=a(97404),eP=a(23996),eW=a(59832),eT=a(99458),eA=a(88164);let eM=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return(await eC.Z.get("".concat("http://localhost:9999","/api/channel-chat/").concat(e,"/messages"),{params:{page:t,limit:a},withCredentials:!0})).data},eU=async(e,t)=>(await eC.Z.post("".concat("http://localhost:9999","/api/channel-chat/").concat(e,"/send"),{message:t},{withCredentials:!0})).data,eE=async e=>(await eC.Z.post("".concat("http://localhost:9999","/api/channel-chat/").concat(e,"/join"),{},{withCredentials:!0})).data,eY=async e=>(await eC.Z.post("".concat("http://localhost:9999","/api/channel-chat/").concat(e,"/leave"),{},{withCredentials:!0})).data;var eL=a(68680);class eF{connect(){return new Promise((e,t)=>{var a;if(null===(a=this.socket)||void 0===a?void 0:a.connected){this.joinChannel(),e(this.socket);return}this.isConnecting||(this.isConnecting=!0,this.setStatus("connecting"),this.socket=(0,eL.io)("http://localhost:9999",{transports:["polling","websocket"],upgrade:!0,rememberUpgrade:!0,timeout:3e4,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:3e3,reconnectionDelayMax:1e4,randomizationFactor:.3,withCredentials:!1,forceNew:!1,multiplex:!0,autoConnect:!0,query:{channel_id:this.channelId.toString(),timestamp:Date.now().toString()}}),this.socket.on("connect",()=>{this.isConnecting=!1,this.reconnectAttempts=0,this.setStatus("connected"),this.startHeartbeat(),this.joinChannel(),e(this.socket)}),this.socket.on("connection_ack",e=>{}),this.socket.on("new_message",e=>{if(e.message){var t,a;null===(t=(a=this.callbacks).onMessage)||void 0===t||t.call(a,e.message)}}),this.socket.on("user_joined",e=>{if(e.user){var t,a;null===(t=(a=this.callbacks).onUserJoined)||void 0===t||t.call(a,e.user)}}),this.socket.on("user_left",e=>{if(e.user){var t,a;null===(t=(a=this.callbacks).onUserLeft)||void 0===t||t.call(a,e.user)}}),this.socket.on("user_typing",e=>{if(e.user){var t,a;null===(t=(a=this.callbacks).onTyping)||void 0===t||t.call(a,e.user)}}),this.socket.on("connect_error",a=>{var r,n;console.error("❌ WebSocket 연결 오류:",a),this.isConnecting=!1,this.setStatus("error"),null===(r=(n=this.callbacks).onError)||void 0===r||r.call(n,"연결 오류: ".concat(a.message)),this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,setTimeout(()=>{this.connect().then(e).catch(t)},this.reconnectDelay*this.reconnectAttempts)):t(Error("연결 실패: ".concat(a.message)))}),this.socket.on("disconnect",e=>{this.isConnecting=!1,this.setStatus("disconnected"),this.stopHeartbeat(),"io client disconnect"!==e&&"io server disconnect"!==e&&setTimeout(()=>{var e;(null===(e=this.socket)||void 0===e?void 0:e.connected)||this.isConnecting||this.connect()},5e3)}),this.socket.on("reconnect_attempt",e=>{}),this.socket.on("reconnect",e=>{this.joinChannel()}),this.socket.on("reconnect_failed",()=>{console.error("❌ 재연결 실패"),this.isConnecting=!1,t(Error("재연결 실패"))}),this.socket.on("error",e=>{console.error("\uD83D\uDEA8 Socket 오류:",e)}),this.socket.on("ping",()=>{}),this.socket.on("pong",e=>{}))})}joinChannel(){var e,t;this.socket&&this.socket.connected&&this.socket.emit("join_channel",{channel_id:this.channelId,user_id:null===(e=this.userInfo)||void 0===e?void 0:e.id,user_nickname:null===(t=this.userInfo)||void 0===t?void 0:t.nickname})}startHeartbeat(){this.stopHeartbeat(),this.lastPongTime=Date.now(),this.heartbeatTimer=setInterval(()=>{this.socket&&this.socket.connected&&(this.socket.emit("ping"),setTimeout(()=>{Date.now()-this.lastPongTime>6e4&&this.checkConnection()},6e4))},3e4)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0)}checkConnection(){if(!this.socket||!this.socket.connected){var e;this.setStatus("connecting"),null===(e=this.socket)||void 0===e||e.connect()}}send(e,t){if(this.socket&&this.socket.connected)this.socket.emit(e,t);else{var a,r;null===(a=(r=this.callbacks).onError)||void 0===a||a.call(r,"연결이 끊어졌습니다. 재연결을 시도합니다."),this.connect()}}sendMessage(e){this.send("send_message",{channel_id:this.channelId,message:e})}sendTyping(){this.send("typing",{channel_id:this.channelId})}disconnect(){this.stopHeartbeat(),this.socket&&(this.send("leave_channel",{channel_id:this.channelId}),this.socket.disconnect(),this.socket=null),this.setStatus("disconnected")}setStatus(e){var t,a;this.status=e,null===(t=(a=this.callbacks).onStatusChange)||void 0===t||t.call(a,e)}getStatus(){return this.status}isConnected(){var e;return(null===(e=this.socket)||void 0===e?void 0:e.connected)||!1}testConnection(){var e;(null===(e=this.socket)||void 0===e?void 0:e.connected)&&this.socket.emit("ping")}constructor(e,t,a){this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.status="disconnected",this.lastPongTime=0,this.isConnecting=!1,this.channelId=e,this.callbacks=t,this.userInfo=a}}class eq{connect(e){return new Promise((t,a)=>{var r;if(null===(r=this.socket)||void 0===r?void 0:r.connected){this.joinChannel(e),t(this.socket);return}this.isConnecting||(this.isConnecting=!0,this.socket=(0,eL.io)("http://localhost:9999",{transports:["polling","websocket"],timeout:2e4,reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:this.reconnectDelay,reconnectionDelayMax:5e3,withCredentials:!1,forceNew:!1,query:{channel_id:e.toString(),timestamp:Date.now().toString()}}),this.socket.on("connect",()=>{this.isConnecting=!1,this.reconnectAttempts=0,this.joinChannel(e),t(this.socket)}),this.socket.on("connect_error",r=>{console.error("❌ WebSocket 연결 오류:",r),this.isConnecting=!1,this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,setTimeout(()=>{this.connect(e).then(t).catch(a)},this.reconnectDelay*this.reconnectAttempts)):a(Error("연결 실패: ".concat(r.message)))}),this.socket.on("disconnect",e=>{this.isConnecting=!1}))})}joinChannel(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&this.socket.emit("join_channel",{channel_id:e,timestamp:new Date().toISOString()})}sendMessage(e,t){var a;(null===(a=this.socket)||void 0===a?void 0:a.connected)&&this.socket.emit("send_message",{channel_id:e,message:t,timestamp:new Date().toISOString()})}onMessage(e){this.socket&&this.socket.on("new_message",e)}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnecting=!1,this.reconnectAttempts=0)}isConnected(){var e;return(null===(e=this.socket)||void 0===e?void 0:e.connected)||!1}constructor(){this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.isConnecting=!1}}new eq;var eN=e=>{let{channelId:t,channelName:a,showMessage:i,onClose:s}=e,l=(0,o.Z)(),{data:g}=(0,j.useSession)(),[p,x]=(0,n.useState)([]),[b,h]=(0,n.useState)(""),[u,m]=(0,n.useState)(null),[f,k]=(0,n.useState)("disconnected"),[v,y]=(0,n.useState)(!1),[w,Z]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),I=(0,n.useRef)(null);(0,n.useEffect)(()=>(t&&(null==g?void 0:g.user)&&D(),()=>{_()}),[t,null==g?void 0:g.user]),(0,n.useEffect)(()=>{t&&u&&(_(),D())},[t]),(0,n.useEffect)(()=>{z()},[p]);let z=()=>{var e;null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},D=async()=>{if(t&&(null==g?void 0:g.user)){y(!0);try{let e=await eM(t,1,50);x(e.messages),await eE(t),u||R()}catch(e){console.error("❌ 채팅 메시지 로드 실패:",e),i("채팅을 불러오는데 실패했습니다.","error"),x([{id:1,channel_id:t,user_id:"1",user:{id:"1",nickname:"김개발자",user_email:"dev@example.com",profile_image:""},message:"안녕하세요! 이 채널 정말 유용하네요 \uD83D\uDC4D",created_at:new Date(Date.now()-18e5).toISOString(),updated_at:new Date(Date.now()-18e5).toISOString()},{id:2,channel_id:t,user_id:"2",user:{id:"2",nickname:"박프론트",user_email:"frontend@example.com",profile_image:""},message:"React 관련 질문이 있는데 괜찮을까요?",created_at:new Date(Date.now()-15e5).toISOString(),updated_at:new Date(Date.now()-15e5).toISOString()}])}finally{y(!1)}}},R=()=>{if(!t||u||!(null==g?void 0:g.user))return;let e=new eF(t,{onMessage:e=>{x(t=>t.find(t=>t.id===e.id)?t:[...t,e])},onUserJoined:e=>{var t;e.id!==(null==g?void 0:null===(t=g.user)||void 0===t?void 0:t.id)&&(C(t=>t.find(t=>t.id===e.id)?t:[...t,e]),i("".concat(e.nickname,"님이 채팅에 참여했습니다."),"info"))},onUserLeft:e=>{var t;e.id!==(null==g?void 0:null===(t=g.user)||void 0===t?void 0:t.id)&&(C(t=>t.filter(t=>t.id!==e.id)),i("".concat(e.nickname,"님이 채팅을 나갔습니다."),"info"))},onTyping:e=>{Z(t=>{if(!t.find(t=>t.id===e.id)){let a=[...t,e];return setTimeout(()=>{Z(t=>t.filter(t=>t.id!==e.id))},3e3),a}return t})},onStatusChange:e=>{switch(k(e),e){case"connecting":i("채팅 서버에 연결 중입니다...","info");break;case"connected":i("채팅 서버에 연결되었습니다.","success");break;case"disconnected":i("채팅 서버 연결이 끊어졌습니다.","warning"),C([]);break;case"error":i("채팅 서버 연결에 문제가 발생했습니다.","error")}},onError:e=>{console.error("❌ 웹소켓 에러:",e),i(e,"error")}},{id:g.user.id,nickname:g.user.nickname||g.user.name||"사용자"});e.connect(),m(e);let a=setInterval(()=>{let t=e.getStatus();e.isConnected()||"connecting"===t||"error"===t||e.connect().catch(e=>{console.error("❌ 모니터링 재연결 실패:",e)})},6e4);return()=>{clearInterval(a)}},_=async()=>{if(u&&(u.disconnect(),m(null)),t)try{await eY(t)}catch(e){console.error("채널 나가기 실패:",e)}C([]),Z([])},P=async()=>{if(b.trim()&&(null==g?void 0:g.user)&&t)try{if(u&&u.isConnected()){u.sendMessage(b.trim()),h("");return}let e=await eU(t,b.trim());x(t=>[...t,e.chatMessage]),h("")}catch(e){console.error("❌ 메시지 전송 실패:",e),i("메시지 전송에 실패했습니다.","error")}};return(0,r.jsxs)(d.Z,{sx:{background:"dark"===l.palette.mode?"rgba(26, 26, 46, 0.95)":"#ffffff",border:"dark"===l.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 0, 0, 0.08)",borderRadius:2,boxShadow:"dark"===l.palette.mode?"0 4px 20px rgba(139, 92, 246, 0.15)":"0 4px 12px rgba(0,0,0,0.08)",height:"calc(100vh - 200px)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,r.jsxs)(d.Z,{sx:{p:2,borderBottom:"dark"===l.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",background:"dark"===l.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(6, 182, 212, 0.05))",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(eT.Z,{sx:{color:"dark"===l.palette.mode?"#a78bfa":"#8b5cf6",fontSize:24,mr:1}}),(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsxs)(c.Z,{variant:"h6",sx:{fontWeight:700,background:"dark"===l.palette.mode?"linear-gradient(135deg, #a78bfa, #22d3ee)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[a," 채널 자유채팅"]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2,mt:.5},children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(d.Z,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"connected"===f?"#22c55e":"connecting"===f?"#f59e0b":"#ef4444",boxShadow:"0 0 8px ".concat("connected"===f?"#22c55e":"connecting"===f?"#f59e0b":"#ef4444")}}),(0,r.jsx)(c.Z,{variant:"caption",sx:{color:"dark"===l.palette.mode?"#94a3b8":"#6b7280",fontSize:"0.75rem"},children:"connected"===f?"실시간 연결됨":"connecting"===f?"연결 중...":"연결 끊김"})]}),S.length>0&&(0,r.jsxs)(c.Z,{variant:"caption",sx:{color:"dark"===l.palette.mode?"#94a3b8":"#6b7280",fontSize:"0.75rem"},children:["온라인: ",S.length,"명"]})]})]})]}),(0,r.jsxs)(d.Z,{sx:{flexGrow:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(eD.Z,{sx:{flexGrow:1,overflow:"auto",py:1,px:0,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:"6px"},"&::-webkit-scrollbar-thumb":{background:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.5)":"rgba(139, 92, 246, 0.3)",borderRadius:"6px","&:hover":{background:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.7)":"rgba(139, 92, 246, 0.5)"}}},children:[0===p.length?(0,r.jsxs)(d.Z,{sx:{textAlign:"center",py:6},children:[(0,r.jsx)(eT.Z,{sx:{fontSize:"4rem",color:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",mb:2}}),(0,r.jsx)(c.Z,{variant:"h6",sx:{color:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",mb:1,fontWeight:600},children:"첫 메시지를 남겨보세요!"}),(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",fontStyle:"italic"},children:"이 채널의 다른 사용자들과 자유롭게 대화해보세요"})]}):p.map((e,t)=>{var a;let o=e.user.id===(null==g?void 0:null===(a=g.user)||void 0===a?void 0:a.id);return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(d.Z,{sx:{display:"flex",justifyContent:o?"flex-end":"flex-start",px:3,py:1.5,transition:"all 0.2s ease"},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:o?"row-reverse":"row",alignItems:"flex-start",gap:1.5,maxWidth:"75%"},children:[(0,r.jsx)(eR.Z,{sx:{width:36,height:36,background:o?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #8b5cf6, #06b6d4)",fontSize:"0.9rem",fontWeight:"bold",boxShadow:o?"dark"===l.palette.mode?"0 2px 8px rgba(16, 185, 129, 0.3)":"0 2px 8px rgba(16, 185, 129, 0.2)":"dark"===l.palette.mode?"0 2px 8px rgba(139, 92, 246, 0.3)":"0 2px 8px rgba(139, 92, 246, 0.2)"},src:e.user.profile_image?"".concat("http://localhost:9999").concat(e.user.profile_image):void 0,children:e.user.nickname.charAt(0)}),(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:o?"flex-end":"flex-start",gap:.5},children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1,flexDirection:o?"row-reverse":"row"},children:[(0,r.jsx)(c.Z,{variant:"caption",sx:{fontWeight:600,color:o?"dark"===l.palette.mode?"#34d399":"#059669":"dark"===l.palette.mode?"#a78bfa":"#8b5cf6",fontSize:"0.85rem"},children:o?"나":e.user.nickname}),(0,r.jsx)(c.Z,{variant:"caption",sx:{color:"dark"===l.palette.mode?"#94a3b8":"#6b7280",fontSize:"0.75rem"},children:new Date(e.created_at).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsx)(d.Z,{sx:{background:o?"dark"===l.palette.mode?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #34d399, #10b981)":"dark"===l.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",color:o?"#ffffff":"dark"===l.palette.mode?"#e2e8f0":"#374151",px:2,py:1.5,borderRadius:o?"20px 20px 4px 20px":"20px 20px 20px 4px",boxShadow:o?"dark"===l.palette.mode?"0 2px 12px rgba(16, 185, 129, 0.2)":"0 2px 12px rgba(16, 185, 129, 0.15)":"dark"===l.palette.mode?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)",border:o?"none":"dark"===l.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",position:"relative","&::before":o?{content:'""',position:"absolute",bottom:0,right:-8,width:0,height:0,borderLeft:"8px solid",borderLeftColor:"dark"===l.palette.mode?"#059669":"#10b981",borderTop:"8px solid transparent"}:{content:'""',position:"absolute",bottom:0,left:-8,width:0,height:0,borderRight:"8px solid",borderRightColor:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",borderTop:"8px solid transparent"}},children:(0,r.jsx)(c.Z,{variant:"body2",sx:{lineHeight:1.4,wordBreak:"break-word",whiteSpace:"pre-wrap",fontSize:"0.9rem",fontWeight:o?500:400},children:e.message})})]})]})}),t<p.length-1&&(0,r.jsx)(d.Z,{sx:{height:8}})]},e.id)}),w.length>0&&(0,r.jsx)(d.Z,{sx:{px:3,py:1,display:"flex",alignItems:"center",gap:1},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,maxWidth:"75%"},children:[(0,r.jsx)(eR.Z,{sx:{width:28,height:28,background:"linear-gradient(135deg, #f59e0b, #d97706)",fontSize:"0.8rem",fontWeight:"bold"},children:w[0].nickname.charAt(0)}),(0,r.jsx)(d.Z,{sx:{background:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",px:2,py:1,borderRadius:"20px 20px 20px 4px",border:"dark"===l.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",position:"relative","&::before":{content:'""',position:"absolute",bottom:0,left:-8,width:0,height:0,borderRight:"8px solid",borderRightColor:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",borderTop:"8px solid transparent"}},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(c.Z,{variant:"body2",sx:{color:"dark"===l.palette.mode?"#94a3b8":"#6b7280",fontSize:"0.85rem",fontStyle:"italic"},children:1===w.length?"".concat(w[0].nickname,"님이 입력 중"):"".concat(w[0].nickname,"님 외 ").concat(w.length-1,"명이 입력 중")}),(0,r.jsx)(d.Z,{sx:{display:"flex",gap:.5},children:[0,1,2].map(e=>(0,r.jsx)(d.Z,{sx:{width:4,height:4,borderRadius:"50%",backgroundColor:"dark"===l.palette.mode?"#94a3b8":"#6b7280",animation:"typing 1.4s infinite ease-in-out",animationDelay:"".concat(.2*e,"s"),"@keyframes typing":{"0%, 80%, 100%":{opacity:.3,transform:"scale(0.8)"},"40%":{opacity:1,transform:"scale(1)"}}}},e))})]})})]})}),(0,r.jsx)("div",{ref:I})]}),(0,r.jsx)(d.Z,{sx:{p:3,borderTop:"dark"===l.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",background:"dark"===l.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(6, 182, 212, 0.05))":"linear-gradient(135deg, rgba(139, 92, 246, 0.02), rgba(6, 182, 212, 0.02))"},children:(0,r.jsx)(e_.Z,{fullWidth:!0,multiline:!0,maxRows:4,value:b,onChange:e=>{h(e.target.value),u&&u.isConnected()&&e.target.value.trim()&&u.sendTyping()},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},placeholder:"메시지를 입력하세요... (Enter: 전송, Shift+Enter: 줄바꿈)",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"16px",background:"dark"===l.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.9)",fontSize:"1rem","& fieldset":{borderColor:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.2)"},"&:hover fieldset":{borderColor:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.5)":"rgba(139, 92, 246, 0.4)"},"&.Mui-focused fieldset":{borderColor:"dark"===l.palette.mode?"#a78bfa":"#8b5cf6",borderWidth:"2px"}},"& .MuiInputBase-input":{color:"dark"===l.palette.mode?"#e2e8f0":"#374151",fontSize:"1rem",py:1.5},"& .MuiInputBase-input::placeholder":{color:"dark"===l.palette.mode?"#94a3b8":"#6b7280",opacity:1}},InputProps:{endAdornment:(0,r.jsx)(eP.Z,{position:"end",children:(0,r.jsx)(eW.Z,{onClick:P,disabled:!b.trim(),sx:{color:"dark"===l.palette.mode?"#a78bfa":"#8b5cf6",background:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)",borderRadius:"12px",p:1,"&:hover":{background:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.2)":"rgba(139, 92, 246, 0.1)",transform:"scale(1.05)"},"&:disabled":{color:"dark"===l.palette.mode?"#4a5568":"#a0aec0",background:"transparent"}},children:(0,r.jsx)(eA.Z,{})})})}})})]})]})};let eO={metallic:{platinum:{light:"linear-gradient(135deg, #e6e6fa 0%, #d3d3d3 25%, #c0c0c0 50%, #b8860b 75%, #daa520 100%)",dark:"linear-gradient(135deg, #2a2a3a 0%, #3d3d5c 25%, #4a4a6a 50%, #5a5a7a 75%, #6a6a8a 100%)"},silver:{light:"linear-gradient(135deg, #f8f8ff 0%, #e6e6fa 25%, #c0c0c0 50%, #a9a9a9 75%, #808080 100%)",dark:"linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%)"},gold:{light:"linear-gradient(135deg, #fff8dc 0%, #ffd700 25%, #ffb347 50%, #daa520 75%, #b8860b 100%)",dark:"linear-gradient(135deg, #2c1810 0%, #4a2c17 25%, #8b4513 50%, #cd853f 75%, #daa520 100%)"}},gradient:{primary:"linear-gradient(135deg, #8b5cf6, #06b6d4)",primaryDark:"linear-gradient(135deg, #a78bfa, #22d3ee)",success:"linear-gradient(135deg, #22c55e, #16a34a, #15803d)",error:"linear-gradient(135deg, #ef4444, #dc2626, #b91c1c)",warning:"linear-gradient(135deg, #f59e0b, #f97316, #ea580c)",background:{light:"linear-gradient(135deg, #f8f9fa, #e9ecef)",dark:"linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(16, 16, 32, 0.98))"}}},eH={card:{light:"0 8px 24px rgba(0, 0, 0, 0.08)",dark:"0 8px 32px rgba(139, 92, 246, 0.15)"},button:{light:"0 6px 24px rgba(139, 92, 246, 0.3)",dark:"0 6px 28px rgba(139, 92, 246, 0.4)"}},eB=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";return{background:({primary:"dark"===e.palette.mode?eO.gradient.primaryDark:eO.gradient.primary,success:eO.gradient.success,error:eO.gradient.error,warning:eO.gradient.warning})[t],color:"white",fontWeight:700,borderRadius:"16px",position:"relative",overflow:"hidden",transition:"all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)",textTransform:"none","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent)",transition:"left 0.6s ease"},"&:hover":{transform:"translateY(-3px) scale(1.02)",boxShadow:"dark"===e.palette.mode?eH.button.dark:eH.button.light,"&::before":{left:"100%"}},"&:active":{transform:"translateY(-1px) scale(0.98)"}}},eK=e=>({fontWeight:700,background:"dark"===e.palette.mode?eO.gradient.primaryDark:eO.gradient.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}),eG=e=>({borderRadius:"20px",background:"dark"===e.palette.mode?eO.metallic.silver.dark:eO.metallic.silver.light,border:"dark"===e.palette.mode?"2px solid rgba(139, 92, 246, 0.3)":"2px solid rgba(192, 192, 192, 0.4)",boxShadow:"dark"===e.palette.mode?"0 12px 40px rgba(0, 0, 0, 0.6), 0 0 30px rgba(139, 92, 246, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 12px 40px rgba(0, 0, 0, 0.15), 0 0 20px rgba(192, 192, 192, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"dark"===e.palette.mode?"linear-gradient(90deg, #533483, #e94560, #f27121)":"linear-gradient(90deg, #8a2387, #e94057, #f27121)"},"&::after":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)",animation:"shimmer 3s infinite",pointerEvents:"none"},"@keyframes shimmer":{"0%":{left:"-100%"},"100%":{left:"100%"}}}),eQ=e=>({width:70,height:70,background:"dark"===e.palette.mode?eO.metallic.gold.dark:eO.metallic.gold.light,fontSize:"1.6rem",fontWeight:"bold",color:"dark"===e.palette.mode?"#ffffff":"#2c1810",border:"dark"===e.palette.mode?"3px solid rgba(218, 165, 32, 0.5)":"3px solid rgba(184, 134, 11, 0.6)",boxShadow:"dark"===e.palette.mode?"0 8px 32px rgba(218, 165, 32, 0.4), 0 0 20px rgba(255, 215, 0, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.1)":"0 8px 32px rgba(184, 134, 11, 0.3), 0 0 16px rgba(255, 215, 0, 0.2), inset 0 2px 4px rgba(255, 255, 255, 0.8)",position:"relative","&::after":{content:'""',position:"absolute",top:"10%",left:"10%",width:"30%",height:"30%",background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",filter:"blur(8px)"}}),eX=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title";return"title"===t?{fontWeight:800,color:"dark"===e.palette.mode?"#ffffff":"#1a1a2e",textShadow:"dark"===e.palette.mode?"0 2px 4px rgba(0, 0, 0, 0.8), 0 0 10px rgba(139, 92, 246, 0.5)":"0 2px 4px rgba(255, 255, 255, 0.9), 0 1px 2px rgba(0, 0, 0, 0.3)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"dark"===e.palette.mode?"linear-gradient(45deg, transparent 30%, rgba(139, 92, 246, 0.1) 50%, transparent 70%)":"linear-gradient(45deg, transparent 30%, rgba(139, 92, 246, 0.05) 50%, transparent 70%)",animation:"titleShine 3s ease-in-out infinite",pointerEvents:"none",borderRadius:"8px"},"@keyframes titleShine":{"0%":{transform:"translateX(-100%)"},"50%":{transform:"translateX(100%)"},"100%":{transform:"translateX(-100%)"}}}:{fontWeight:600,color:"dark"===e.palette.mode?"#cbd5e1":"#64748b",textShadow:"dark"===e.palette.mode?"0 1px 3px rgba(0, 0, 0, 0.5)":"0 1px 3px rgba(255, 255, 255, 0.8)"}},eV=(0,_.ZP)(d.Z)(e=>{let{theme:t}=e;return{minHeight:"100vh",background:"dark"===t.palette.mode?eO.gradient.background.dark:eO.gradient.background.light}}),eJ=(0,_.ZP)(l.Z)(e=>{let{theme:t}=e;return{...eG(t),marginBottom:0}});(0,_.ZP)(h.Z)(e=>{let{theme:t,variant:a="primary",size:r="medium"}=e;return{...eB(t,a),height:"large"===r?"95px":"medium"===r?"60px":"35px",minWidth:"large"===r?"130px":"medium"===r?"110px":"80px",fontSize:"large"===r?"1rem":"medium"===r?"0.9rem":"0.85rem"}}),(0,_.ZP)(h.Z)(e=>{let{theme:t,active:a}=e;return{...eB(t,a?"error":"success"),height:"95px",minWidth:"130px",fontSize:"0.95rem",boxShadow:a?"dark"===t.palette.mode?"0 8px 32px rgba(239, 68, 68, 0.4), 0 0 20px rgba(239, 68, 68, 0.3)":"0 8px 28px rgba(239, 68, 68, 0.3), 0 0 16px rgba(239, 68, 68, 0.2)":"dark"===t.palette.mode?"0 8px 32px rgba(34, 197, 94, 0.4), 0 0 20px rgba(34, 197, 94, 0.3)":"0 8px 28px rgba(34, 197, 94, 0.3), 0 0 16px rgba(34, 197, 94, 0.2)","&:hover":{background:a?"linear-gradient(135deg, #dc2626, #b91c1c, #991b1b)":"linear-gradient(135deg, #16a34a, #15803d, #166534)",boxShadow:a?"dark"===t.palette.mode?"0 12px 40px rgba(239, 68, 68, 0.5), 0 0 25px rgba(239, 68, 68, 0.4)":"0 12px 35px rgba(239, 68, 68, 0.4), 0 0 20px rgba(239, 68, 68, 0.3)":"dark"===t.palette.mode?"0 12px 40px rgba(34, 197, 94, 0.5), 0 0 25px rgba(34, 197, 94, 0.4)":"0 12px 35px rgba(34, 197, 94, 0.4), 0 0 20px rgba(34, 197, 94, 0.3)"}}}),(0,_.ZP)(h.Z)(e=>{let{theme:t,subscribed:a}=e;return{...eB(t,a?"error":"primary"),height:"60px",minWidth:"150px",fontSize:"1rem",border:a?"dark"===t.palette.mode?"2px solid rgba(239, 68, 68, 0.6)":"2px solid rgba(239, 68, 68, 0.4)":"dark"===t.palette.mode?"2px solid rgba(139, 92, 246, 0.6)":"2px solid rgba(139, 92, 246, 0.4)","&:hover":{background:a?"linear-gradient(135deg, #dc2626, #b91c1c, #991b1b)":"linear-gradient(135deg, #7c3aed, #6366f1, #4f46e5)"}}}),(0,_.ZP)(c.Z)(e=>{let{theme:t}=e;return{...eK(t)}});let e$=(0,_.ZP)(d.Z)(e=>{let{theme:t}=e;return{...eQ(t),display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"}}),e0=(0,_.ZP)(c.Z)(e=>{let{theme:t}=e;return{...eX(t,"title")}}),e2=(0,_.ZP)(c.Z)(e=>{let{theme:t}=e;return{...eX(t,"subtitle")}});(0,_.ZP)(d.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",width:"100%",borderRadius:t.spacing(2),boxShadow:"dark"===t.palette.mode?eH.card.dark:eH.card.light,overflow:"hidden",backgroundColor:"dark"===t.palette.mode?"rgba(26, 26, 46, 0.95)":t.palette.background.paper,border:"dark"===t.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"}}),(0,_.ZP)(d.Z)({display:"flex",flexDirection:"column",gap:"8px"});let e1=(0,_.ZP)(d.Z)(e=>{let{theme:t}=e;return{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"dark"===t.palette.mode?eO.gradient.background.dark:eO.gradient.background.light}});(0,_.ZP)(l.Z)(e=>{let{theme:t}=e;return{borderRadius:"16px",background:"dark"===t.palette.mode?"rgba(30, 32, 38, 0.98)":"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(12px)",boxShadow:"dark"===t.palette.mode?"0 20px 40px rgba(0, 0, 0, 0.5), 0 0 20px rgba(139, 92, 246, 0.2)":"0 20px 40px rgba(0, 0, 0, 0.15), 0 0 20px rgba(233, 64, 87, 0.1)",border:"dark"===t.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #8a2387, #e94057, #f27121)"}}}),(0,_.ZP)(d.Z)(e=>{let{theme:t}=e;return{borderRadius:"10px",padding:t.spacing(2),marginBottom:t.spacing(1),backgroundColor:"dark"===t.palette.mode?"rgba(45, 48, 56, 0.6)":"rgba(249, 250, 251, 0.8)",border:"dark"===t.palette.mode?"1px solid rgba(255, 255, 255, 0.05)":"1px solid rgba(0, 0, 0, 0.05)",transition:"all 0.3s ease",cursor:"pointer","&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(55, 58, 66, 0.8)":"rgba(233, 64, 87, 0.05)",transform:"translateX(8px)",boxShadow:"dark"===t.palette.mode?"0 4px 15px rgba(0, 0, 0, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.1)",borderColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(233, 64, 87, 0.2)"},"&:last-child":{marginBottom:0}}});var e5=a(63697),e3=a(18866),e9=a(33398),e6=a(49457),e4=a(74315),e8=a(29946),e7=e=>{var t,a;let{channelData:n,session:i,formatSubscriberCount:s}=e,l=(0,o.Z)(),c=(0,f.useRouter)();return(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(e$,{children:(0,r.jsxs)(d.Z,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:[(0,r.jsx)(e5.Z,{sx:{fontSize:"2.2rem",position:"relative",zIndex:2,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),(0,r.jsx)(e3.Z,{sx:{position:"absolute",top:"8px",right:"12px",fontSize:"0.8rem",opacity:.7,animation:"sparkle 2s ease-in-out infinite","@keyframes sparkle":{"0%, 100%":{opacity:.4,transform:"scale(0.8)"},"50%":{opacity:1,transform:"scale(1.2)"}}}}),(0,r.jsx)(e9.Z,{sx:{position:"absolute",bottom:"6px",left:"8px",fontSize:"0.6rem",opacity:.6,animation:"sparkle 2.5s ease-in-out infinite",animationDelay:"0.5s"}}),(0,r.jsx)(e6.Z,{sx:{position:"absolute",top:"6px",left:"10px",fontSize:"0.7rem",opacity:.5,animation:"sparkle 3s ease-in-out infinite",animationDelay:"1s"}})]})}),(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,r.jsx)(d.Z,{sx:{position:"relative",padding:"8px 16px",borderRadius:"12px",background:"dark"===l.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.8) 0%, rgba(45, 48, 71, 0.9) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.95) 100%)",border:"dark"===l.palette.mode?"2px solid rgba(139, 92, 246, 0.3)":"2px solid rgba(139, 92, 246, 0.2)",boxShadow:"dark"===l.palette.mode?"0 0 20px rgba(139, 92, 246, 0.3), 0 0 40px rgba(139, 92, 246, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 0 20px rgba(139, 92, 246, 0.2), 0 4px 12px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)"},children:(0,r.jsx)(e0,{variant:"h5",sx:{position:"relative",zIndex:2},children:n.channel_name})}),(0,r.jsx)(e4.Z,{sx:{color:"dark"===l.palette.mode?"#22d3ee":"#06b6d4",fontSize:20,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),n.story_count>50&&(0,r.jsx)(O.Z,{icon:(0,r.jsx)(e8.Z,{}),label:"HOT",size:"small",sx:{background:"linear-gradient(135deg, #ff6b6b, #ff8e53)",color:"#ffffff",fontWeight:"bold",boxShadow:"0 4px 12px rgba(255, 107, 107, 0.4)"}})]}),(0,r.jsx)(e2,{variant:"body2",sx:{mb:1,maxWidth:"500px",lineHeight:1.5},children:"".concat((null===(t=n.creator)||void 0===t?void 0:t.nickname)||"알수없음","님이 만든 채널입니다. 다양한 주제로 소통해보세요! ✨")}),(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(u.Z,{sx:{fontSize:16,color:"dark"===l.palette.mode?"#94a3b8":"text.secondary"}}),(0,r.jsxs)(e2,{variant:"body2",sx:{fontWeight:600},children:["구독자 ",s(n.subscriber_count),"명"]})]}),(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(m.Z,{sx:{fontSize:16,color:"dark"===l.palette.mode?"#94a3b8":"text.secondary"}}),(0,r.jsxs)(e2,{variant:"body2",children:["생성자: ",(null===(a=n.creator)||void 0===a?void 0:a.nickname)||"알수없음"]}),(null==i?void 0:i.user)&&n.creator&&n.creator.nickname&&i.user.id!==n.creator.id&&(0,r.jsx)(h.Z,{size:"small",variant:"outlined",onClick:()=>c.push("/messages?to=".concat(n.creator.nickname)),sx:{ml:1,fontSize:"0.7rem",padding:"2px 8px",minWidth:"auto",borderColor:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.5)":"#8b5cf6",color:"dark"===l.palette.mode?"#a78bfa":"#8b5cf6","&:hover":{backgroundColor:"dark"===l.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)"}},children:"쪽지"})]}),(0,r.jsxs)(e2,{variant:"body2",children:["게시글 ",n.story_count.toLocaleString(),"개"]})]})]})]})},te=a(69651),tt=a(83722),ta=a(33188),tr=a(30576),tn=e=>{let{showChat:t,isSubscribed:a,isNotificationEnabled:n,subscribeMutationPending:s,unsubscribeMutationPending:l,notificationSubscribeMutationPending:c,notificationUnsubscribeMutationPending:g,onChatToggle:p,onSubscribeToggle:x,onNotificationToggle:b,onShowNotice:m,onShowChannelInfo:f,hasSession:k}=e,v=(0,o.Z)();return(0,r.jsxs)(d.Z,{sx:{display:"flex",gap:1.5},children:[(0,r.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,r.jsx)(h.Z,{variant:"contained",startIcon:(0,r.jsx)(eT.Z,{sx:{fontSize:22}}),onClick:p,sx:{minWidth:"130px",height:"95px",fontSize:"0.95rem",fontWeight:700,borderRadius:"16px",textTransform:"none",transition:"all 0.3s ease",background:t?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #22c55e, #16a34a)",color:"white",border:t?"dark"===v.palette.mode?"2px solid rgba(239, 68, 68, 0.6)":"2px solid rgba(239, 68, 68, 0.4)":"dark"===v.palette.mode?"2px solid rgba(34, 197, 94, 0.6)":"2px solid rgba(34, 197, 94, 0.4)",boxShadow:t?"dark"===v.palette.mode?"0 8px 32px rgba(239, 68, 68, 0.4)":"0 8px 28px rgba(239, 68, 68, 0.3)":"dark"===v.palette.mode?"0 8px 32px rgba(34, 197, 94, 0.4)":"0 8px 28px rgba(34, 197, 94, 0.3)","&:hover":{transform:"translateY(-3px) scale(1.02)",background:t?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #16a34a, #15803d)",boxShadow:t?"dark"===v.palette.mode?"0 12px 40px rgba(239, 68, 68, 0.5)":"0 12px 35px rgba(239, 68, 68, 0.4)":"dark"===v.palette.mode?"0 12px 40px rgba(34, 197, 94, 0.5)":"0 12px 35px rgba(34, 197, 94, 0.4)"},"&:active":{transform:"translateY(-1px) scale(0.98)"}},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.3},children:[(0,r.jsx)(d.Z,{sx:{fontSize:"1rem",fontWeight:800},children:t?"채팅 종료":"실시간채팅"}),(0,r.jsx)(d.Z,{sx:{fontSize:"0.7rem",opacity:.9,fontWeight:600},children:t?"클릭하여 나가기":"참여하기"})]})})}),(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,r.jsx)(h.Z,{variant:"contained",startIcon:(0,r.jsx)(eu.Z,{sx:{fontSize:20}}),onClick:m,sx:{minWidth:"110px",height:"60px",fontSize:"0.9rem",fontWeight:700,borderRadius:"14px",textTransform:"none",background:"linear-gradient(135deg, #f59e0b, #f97316)",color:"white",border:"dark"===v.palette.mode?"2px solid rgba(245, 158, 11, 0.5)":"2px solid rgba(245, 158, 11, 0.3)",boxShadow:"dark"===v.palette.mode?"0 6px 24px rgba(245, 158, 11, 0.4)":"0 6px 20px rgba(245, 158, 11, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px) scale(1.05)",background:"linear-gradient(135deg, #f97316, #ea580c)",boxShadow:"dark"===v.palette.mode?"0 8px 32px rgba(245, 158, 11, 0.5)":"0 8px 28px rgba(245, 158, 11, 0.4)"},"&:active":{transform:"translateY(-1px) scale(1.02)"}},children:"공지사항"}),(0,r.jsx)(h.Z,{variant:"contained",startIcon:(0,r.jsx)(u.Z,{sx:{fontSize:18}}),onClick:f,sx:{minWidth:"110px",height:"35px",fontSize:"0.85rem",fontWeight:700,borderRadius:"12px",textTransform:"none",background:"linear-gradient(135deg, #0ea5e9, #0284c7)",color:"white",border:"dark"===v.palette.mode?"2px solid rgba(14, 165, 233, 0.5)":"2px solid rgba(14, 165, 233, 0.3)",boxShadow:"dark"===v.palette.mode?"0 4px 20px rgba(14, 165, 233, 0.4)":"0 4px 16px rgba(14, 165, 233, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px) scale(1.05)",background:"linear-gradient(135deg, #0284c7, #0369a1)",boxShadow:"dark"===v.palette.mode?"0 6px 28px rgba(14, 165, 233, 0.5)":"0 6px 24px rgba(14, 165, 233, 0.4)"},"&:active":{transform:"translateY(-1px) scale(1.02)"}},children:"채널정보"})]}),k&&(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,r.jsx)(h.Z,{variant:"contained",onClick:x,disabled:s||l,startIcon:a?(0,r.jsx)(te.Z,{sx:{fontSize:22}}):(0,r.jsx)(tt.Z,{sx:{fontSize:22}}),sx:{borderRadius:"16px",fontWeight:700,px:3,py:1.5,minWidth:150,height:"60px",fontSize:"1rem",textTransform:"none",transition:"all 0.3s ease",background:a?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:a?"dark"===v.palette.mode?"2px solid rgba(239, 68, 68, 0.6)":"2px solid rgba(239, 68, 68, 0.4)":"dark"===v.palette.mode?"2px solid rgba(139, 92, 246, 0.6)":"2px solid rgba(139, 92, 246, 0.4)",boxShadow:a?"dark"===v.palette.mode?"0 6px 28px rgba(239, 68, 68, 0.4)":"0 6px 24px rgba(239, 68, 68, 0.3)":"dark"===v.palette.mode?"0 6px 28px rgba(139, 92, 246, 0.4)":"0 6px 24px rgba(139, 92, 246, 0.3)","&:hover":{transform:"translateY(-3px) scale(1.02)",background:a?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #7c3aed, #6366f1)",boxShadow:a?"dark"===v.palette.mode?"0 8px 35px rgba(239, 68, 68, 0.5)":"0 8px 30px rgba(239, 68, 68, 0.4)":"dark"===v.palette.mode?"0 8px 35px rgba(139, 92, 246, 0.5)":"0 8px 30px rgba(139, 92, 246, 0.4)"},"&:active":{transform:"translateY(-1px) scale(0.98)"},"&:disabled":{background:a?"linear-gradient(135deg, rgba(239, 68, 68, 0.5), rgba(220, 38, 38, 0.5))":"linear-gradient(135deg, rgba(139, 92, 246, 0.5), rgba(124, 58, 237, 0.5))",transform:"none",boxShadow:"none"}},children:s||l?(0,r.jsx)(i.Z,{size:20,sx:{color:"inherit"}}):a?"구독 중":"구독하기"}),(0,r.jsx)(h.Z,{variant:"contained",startIcon:c||g?(0,r.jsx)(i.Z,{size:18,sx:{color:"inherit"}}):n?(0,r.jsx)(ta.Z,{sx:{fontSize:20}}):(0,r.jsx)(tr.Z,{sx:{fontSize:20}}),onClick:b,disabled:c||g,sx:{minWidth:150,height:"35px",fontSize:"0.85rem",fontWeight:700,borderRadius:"12px",textTransform:"none",transition:"all 0.3s ease",background:n?"linear-gradient(135deg, #f59e0b, #f97316)":"linear-gradient(135deg, #6b7280, #4b5563)",color:"white",border:n?"dark"===v.palette.mode?"2px solid rgba(245, 158, 11, 0.5)":"2px solid rgba(245, 158, 11, 0.3)":"dark"===v.palette.mode?"2px solid rgba(107, 114, 128, 0.5)":"2px solid rgba(107, 114, 128, 0.3)",boxShadow:n?"dark"===v.palette.mode?"0 4px 20px rgba(245, 158, 11, 0.4)":"0 4px 16px rgba(245, 158, 11, 0.3)":"dark"===v.palette.mode?"0 4px 20px rgba(107, 114, 128, 0.3)":"0 4px 16px rgba(107, 114, 128, 0.2)","&:hover":{transform:"translateY(-2px) scale(1.05)",background:n?"linear-gradient(135deg, #f97316, #ea580c)":"linear-gradient(135deg, #4b5563, #374151)",boxShadow:n?"dark"===v.palette.mode?"0 6px 28px rgba(245, 158, 11, 0.5)":"0 6px 24px rgba(245, 158, 11, 0.4)":"dark"===v.palette.mode?"0 6px 28px rgba(107, 114, 128, 0.4)":"0 6px 24px rgba(107, 114, 128, 0.3)"},"&:active":{transform:"translateY(-1px) scale(1.02)"},"&:disabled":{background:n?"linear-gradient(135deg, rgba(245, 158, 11, 0.5), rgba(249, 115, 22, 0.5))":"linear-gradient(135deg, rgba(107, 114, 128, 0.5), rgba(75, 85, 99, 0.5))",transform:"none",boxShadow:"none"}},children:n?"알림 끄기":"알림 받기"})]})]})},to=a(64461),ti=a(28450),ts=a(33542),td=a(14943),tl=a(1642),tc=a(86874),tg=e=>{let{currentTab:t,viewMode:a,showChat:n,hasSession:i,onTabChange:s,onViewModeChange:l,onWritePost:c}=e,g=(0,o.Z)();return n?null:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",width:"100%",borderRadius:"16px",position:"relative",overflow:"hidden",background:"dark"===g.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.9) 0%, rgba(45, 48, 71, 0.95) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.98) 100%)",border:"dark"===g.palette.mode?"2px solid rgba(139, 92, 246, 0.3)":"2px solid rgba(139, 92, 246, 0.2)",boxShadow:"dark"===g.palette.mode?"0 0 30px rgba(139, 92, 246, 0.3), 0 0 60px rgba(139, 92, 246, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 0 30px rgba(139, 92, 246, 0.2), 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:(g.palette.mode,"linear-gradient(45deg, #8b5cf6, #06b6d4, #8b5cf6, #06b6d4)"),opacity:.1,animation:"borderGlow 4s linear infinite",zIndex:0},"&::after":{content:'""',position:"absolute",top:"50%",left:"-100%",width:"200%",height:"2px",background:"dark"===g.palette.mode?"linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.6), transparent)":"linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.4), transparent)",transform:"translateY(-50%)",animation:"scanLine 3s ease-in-out infinite",zIndex:1,pointerEvents:"none"},"@keyframes borderGlow":{"0%":{backgroundPosition:"0% 50%",filter:"hue-rotate(0deg)"},"50%":{backgroundPosition:"100% 50%",filter:"hue-rotate(180deg)"},"100%":{backgroundPosition:"0% 50%",filter:"hue-rotate(360deg)"}},"@keyframes scanLine":{"0%":{left:"-100%",opacity:0},"50%":{left:"50%",opacity:1},"100%":{left:"200%",opacity:0}}},children:[(0,r.jsx)(to.Z,{value:t,onChange:s,textColor:"secondary",indicatorColor:"secondary","aria-label":"channel tabs",variant:"scrollable",scrollButtons:"auto",sx:{flexGrow:1,position:"relative",zIndex:2,"& .MuiTab-root":{fontWeight:700,fontSize:"1.1rem",py:1,position:"relative",overflow:"hidden",borderRadius:"12px",margin:"6px 4px",transition:"all 0.3s ease",color:"dark"===g.palette.mode?"#e2e8f0":"#374151",textShadow:"dark"===g.palette.mode?"0 2px 4px rgba(0, 0, 0, 0.3)":"none","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"dark"===g.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(6, 182, 212, 0.05))":"linear-gradient(135deg, rgba(139, 92, 246, 0.03), rgba(6, 182, 212, 0.03))",borderRadius:"12px",opacity:0,transition:"opacity 0.3s ease",zIndex:-1},"&:hover":{transform:"translateY(-2px) scale(1.02)",color:"dark"===g.palette.mode?"#a78bfa":"#8b5cf6",boxShadow:"dark"===g.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.3), 0 0 15px rgba(139, 92, 246, 0.2)":"0 8px 25px rgba(139, 92, 246, 0.2), 0 0 15px rgba(139, 92, 246, 0.1)","&::before":{opacity:1}},"&.Mui-selected":{color:"dark"===g.palette.mode?"#ffffff":"#8b5cf6",fontWeight:800,background:"dark"===g.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(6, 182, 212, 0.2))":"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.05))",boxShadow:"dark"===g.palette.mode?"0 0 20px rgba(139, 92, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 0 20px rgba(139, 92, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"dark"===g.palette.mode?"1px solid rgba(139, 92, 246, 0.4)":"1px solid rgba(139, 92, 246, 0.3)",transform:"translateY(-1px)"}},"& .MuiTabs-indicator":{display:"none"}},children:tc.Ik.filter(e=>"suggestion"!==e.value||!!i).map(e=>(0,r.jsx)(ti.Z,{icon:e.icon,label:e.name,value:e.value},e.value))}),"suggestion"!==t&&(0,r.jsxs)(d.Z,{sx:{display:"flex",gap:1,mr:1,position:"relative",zIndex:2},children:[(0,r.jsx)(eW.Z,{onClick:()=>l("table"),sx:{borderRadius:"12px",p:1.5,position:"relative",overflow:"hidden",background:"table"===a?"dark"===g.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(6, 182, 212, 0.2))":"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.1))":"transparent",border:"table"===a?"dark"===g.palette.mode?"2px solid rgba(139, 92, 246, 0.5)":"2px solid rgba(139, 92, 246, 0.3)":"dark"===g.palette.mode?"2px solid rgba(255, 255, 255, 0.1)":"2px solid rgba(0, 0, 0, 0.1)",color:"table"===a?"dark"===g.palette.mode?"#a78bfa":"#8b5cf6":"dark"===g.palette.mode?"#94a3b8":"#64748b",transition:"all 0.3s ease",boxShadow:"table"===a?"dark"===g.palette.mode?"0 0 20px rgba(139, 92, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 0 20px rgba(139, 92, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8)":"none","&:hover":{transform:"translateY(-2px) scale(1.05)",background:"dark"===g.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.05))",boxShadow:"dark"===g.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.3)":"0 8px 25px rgba(139, 92, 246, 0.2)",color:"dark"===g.palette.mode?"#a78bfa":"#8b5cf6"}},"aria-label":"table view",children:(0,r.jsx)(ts.Z,{sx:{fontSize:28,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}})}),(0,r.jsx)(eW.Z,{onClick:()=>l("card"),sx:{borderRadius:"12px",p:1.5,position:"relative",overflow:"hidden",background:"card"===a?"dark"===g.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(6, 182, 212, 0.2))":"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.1))":"transparent",border:"card"===a?"dark"===g.palette.mode?"2px solid rgba(139, 92, 246, 0.5)":"2px solid rgba(139, 92, 246, 0.3)":"dark"===g.palette.mode?"2px solid rgba(255, 255, 255, 0.1)":"2px solid rgba(0, 0, 0, 0.1)",color:"card"===a?"dark"===g.palette.mode?"#a78bfa":"#8b5cf6":"dark"===g.palette.mode?"#94a3b8":"#64748b",transition:"all 0.3s ease",boxShadow:"card"===a?"dark"===g.palette.mode?"0 0 20px rgba(139, 92, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 0 20px rgba(139, 92, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8)":"none","&:hover":{transform:"translateY(-2px) scale(1.05)",background:"dark"===g.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.05))",boxShadow:"dark"===g.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.3)":"0 8px 25px rgba(139, 92, 246, 0.2)",color:"dark"===g.palette.mode?"#a78bfa":"#8b5cf6"}},"aria-label":"card view",children:(0,r.jsx)(td.Z,{sx:{fontSize:28,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}})})]}),i&&(0,r.jsx)(h.Z,{variant:"contained",startIcon:(0,r.jsx)(tl.Z,{sx:{fontSize:22}}),onClick:c,sx:{mr:2,position:"relative",zIndex:2,borderRadius:"14px",fontWeight:700,fontSize:"1rem",px:3,py:1.5,minWidth:"120px",textTransform:"none",transition:"all 0.3s ease",background:"linear-gradient(135deg, #8b5cf6, #06b6d4, #22c55e)",color:"white",border:"dark"===g.palette.mode?"2px solid rgba(139, 92, 246, 0.6)":"2px solid rgba(139, 92, 246, 0.4)",boxShadow:"dark"===g.palette.mode?"0 0 25px rgba(139, 92, 246, 0.4), 0 0 50px rgba(139, 92, 246, 0.2)":"0 0 25px rgba(139, 92, 246, 0.3), 0 8px 32px rgba(0, 0, 0, 0.1)","&:hover":{transform:"translateY(-3px) scale(1.05)",background:"linear-gradient(135deg, #7c3aed, #0891b2, #16a34a)",boxShadow:"dark"===g.palette.mode?"0 0 35px rgba(139, 92, 246, 0.6), 0 0 70px rgba(139, 92, 246, 0.3)":"0 0 35px rgba(139, 92, 246, 0.4), 0 12px 40px rgba(0, 0, 0, 0.15)"},"&:active":{transform:"translateY(-1px) scale(1.02)"}},children:"글쓰기"})]})},tp=a(41327),tx=a(65298),tb=a(42187),th=a(25103),tu=a.n(th),tm=a(83226),tf=a.n(tm),tk=e=>{let{pageCount:t,onPageChange:a,currentPage:n}=e;return t<=0?null:(0,r.jsx)(tu(),{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",pageCount:t,onPageChange:a,forcePage:Math.min(Math.max(n-1,0),t-1),marginPagesDisplayed:2,pageRangeDisplayed:5,containerClassName:tf().pagination,activeClassName:tf().active,disabledClassName:tf().disabled})},tv=a(79335),ty=a(8430);let tj=[{label:"제목",value:"title"},{label:"내용",value:"content"},{label:"글쓴이",value:"author"},{label:"댓글",value:"comment"}];var tw=e=>{let{onSearch:t,onClearSearch:a,currentQuery:i="",currentCategory:s="title"}=e,[l,c]=(0,n.useState)(i),[g,p]=(0,n.useState)(s),x=(0,o.Z)();(0,n.useEffect)(()=>{c(i),p(s)},[i,s]);let b=()=>{t({category:g,query:l})};return(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",width:"300px",backgroundColor:"dark"===x.palette.mode?"rgba(26, 26, 46, 0.8)":"rgba(255, 255, 255, 0.9)",borderRadius:2,border:"dark"===x.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"dark"===x.palette.mode?"0 4px 15px rgba(139, 92, 246, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[(0,r.jsx)(tp.Z,{sx:{minWidth:100},children:(0,r.jsx)(tx.Z,{value:g,onChange:e=>p(e.target.value),variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiSelect-select":{color:"dark"===x.palette.mode?"#e2e8f0":"inherit"}},children:tj.map(e=>(0,r.jsx)(tb.Z,{value:e.value,children:e.label},e.value))})}),(0,r.jsx)(e_.Z,{fullWidth:!0,variant:"outlined",size:"small",placeholder:"검색어 입력",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&b()},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"& input":{color:"dark"===x.palette.mode?"#e2e8f0":"inherit","&::placeholder":{color:"dark"===x.palette.mode?"#94a3b8":"rgba(0, 0, 0, 0.6)",opacity:1}}}},InputProps:{endAdornment:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[l&&(0,r.jsx)(eW.Z,{onClick:()=>{c(""),p("title"),a&&a()},sx:{color:"dark"===x.palette.mode?"#ef4444":"#dc2626","&:hover":{backgroundColor:"dark"===x.palette.mode?"rgba(239, 68, 68, 0.1)":"rgba(220, 38, 38, 0.1)"},padding:"4px"},children:(0,r.jsx)(ty.Z,{fontSize:"small"})}),(0,r.jsx)(eW.Z,{onClick:b,sx:{color:"dark"===x.palette.mode?"#a78bfa":"inherit","&:hover":{backgroundColor:"dark"===x.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.04)"}},children:(0,r.jsx)(tv.Z,{})})]})}})]})},tZ=e=>{let{currentTab:t,sortOrder:a,recommendRankingMode:n,currentPage:i,currentTotal:s,viewCount:l,searchParamsState:c,channelSlug:g,hasSession:p,onSortChange:x,onToggleRecommendRanking:b,onPageChange:u,onSearch:m,onClearSearch:k}=e,v=(0,o.Z)(),y=(0,f.useRouter)();return(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"16px",position:"relative",overflow:"hidden",background:"dark"===v.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.9) 0%, rgba(45, 48, 71, 0.95) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.98) 100%)",border:"dark"===v.palette.mode?"2px solid rgba(139, 92, 246, 0.25)":"2px solid rgba(139, 92, 246, 0.15)",boxShadow:"dark"===v.palette.mode?"0 0 25px rgba(139, 92, 246, 0.2), 0 0 50px rgba(139, 92, 246, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.08)":"0 0 25px rgba(139, 92, 246, 0.15), 0 8px 32px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.8)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:(v.palette.mode,"linear-gradient(45deg, #8b5cf6, #06b6d4, #8b5cf6, #06b6d4)"),opacity:.05,animation:"borderGlow 5s linear infinite",zIndex:0},"&::after":{content:'""',position:"absolute",top:"50%",left:"-100%",width:"200%",height:"1px",background:"dark"===v.palette.mode?"linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.4), transparent)":"linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.3), transparent)",transform:"translateY(-50%)",animation:"scanLine 4s ease-in-out infinite",zIndex:1,pointerEvents:"none"},"@keyframes borderGlow":{"0%":{backgroundPosition:"0% 50%",filter:"hue-rotate(0deg)"},"50%":{backgroundPosition:"100% 50%",filter:"hue-rotate(180deg)"},"100%":{backgroundPosition:"0% 50%",filter:"hue-rotate(360deg)"}},"@keyframes scanLine":{"0%":{left:"-100%",opacity:0},"50%":{left:"50%",opacity:1},"100%":{left:"200%",opacity:0}}},children:[(0,r.jsx)(d.Z,{sx:{flex:1,display:"flex",gap:2,position:"relative",zIndex:2},children:"suggestion"!==t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tp.Z,{size:"small",children:(0,r.jsxs)(tx.Z,{value:a,onChange:x,sx:{ml:2,borderRadius:"12px",background:"dark"===v.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.05))":"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.95))",border:"dark"===v.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(139, 92, 246, 0.2)",boxShadow:"dark"===v.palette.mode?"0 4px 15px rgba(139, 92, 246, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 4px 15px rgba(139, 92, 246, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)","& .MuiSelect-select":{color:"dark"===v.palette.mode?"#e2e8f0":"#374151",fontWeight:600,textShadow:"dark"===v.palette.mode?"0 1px 2px rgba(0, 0, 0, 0.3)":"none"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover":{transform:"translateY(-1px)",boxShadow:"dark"===v.palette.mode?"0 6px 20px rgba(139, 92, 246, 0.3)":"0 6px 20px rgba(139, 92, 246, 0.15)"}},children:[(0,r.jsx)(tb.Z,{value:"recent",children:"최신순"}),(0,r.jsx)(tb.Z,{value:"view",children:"조회순"}),(0,r.jsx)(tb.Z,{value:"recommend",children:"추천순"})]})}),(0,r.jsx)(h.Z,{variant:"contained",startIcon:(0,r.jsx)(ea.Z,{sx:{fontSize:24,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),sx:{borderRadius:"12px",fontWeight:700,fontSize:"0.95rem",position:"relative",overflow:"hidden",textTransform:"none",transition:"all 0.3s ease",background:n?"linear-gradient(135deg, #ef4444, #f97316, #eab308)":"linear-gradient(135deg, #8b5cf6, #06b6d4, #22c55e)",color:"white",boxShadow:n?"dark"===v.palette.mode?"0 0 20px rgba(239, 68, 68, 0.4), 0 0 40px rgba(239, 68, 68, 0.2)":"0 0 20px rgba(239, 68, 68, 0.3), 0 6px 20px rgba(0, 0, 0, 0.1)":"dark"===v.palette.mode?"0 0 20px rgba(139, 92, 246, 0.4), 0 0 40px rgba(139, 92, 246, 0.2)":"0 0 20px rgba(139, 92, 246, 0.3), 0 6px 20px rgba(0, 0, 0, 0.1)","&:hover":{transform:"translateY(-3px) scale(1.02)",background:n?"linear-gradient(135deg, #dc2626, #ea580c, #d97706)":"linear-gradient(135deg, #7c3aed, #0891b2, #16a34a)",boxShadow:n?"dark"===v.palette.mode?"0 0 30px rgba(239, 68, 68, 0.6), 0 0 60px rgba(239, 68, 68, 0.3)":"0 0 30px rgba(239, 68, 68, 0.4), 0 10px 30px rgba(0, 0, 0, 0.15)":"dark"===v.palette.mode?"0 0 30px rgba(139, 92, 246, 0.6), 0 0 60px rgba(139, 92, 246, 0.3)":"0 0 30px rgba(139, 92, 246, 0.4), 0 10px 30px rgba(0, 0, 0, 0.15)"},"&:active":{transform:"translateY(-1px) scale(0.98)"}},onClick:b,children:n?"추천 랭킹 해제":"추천 랭킹"})]})}),(0,r.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",flex:1,position:"relative",zIndex:2},children:(0,r.jsx)(d.Z,{sx:{borderRadius:"12px",p:1,background:"dark"===v.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(6, 182, 212, 0.04))":"linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9))",border:"dark"===v.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(139, 92, 246, 0.15)",boxShadow:"dark"===v.palette.mode?"0 4px 15px rgba(139, 92, 246, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 4px 15px rgba(139, 92, 246, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)"},children:(0,r.jsx)(tk,{pageCount:Math.ceil(s/l),onPageChange:u,currentPage:i})})}),(0,r.jsx)(d.Z,{sx:{flex:1,display:"flex",justifyContent:"flex-end",position:"relative",zIndex:2},children:"suggestion"===t&&p?(0,r.jsx)(h.Z,{variant:"contained",startIcon:(0,r.jsx)(tl.Z,{sx:{fontSize:22,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),onClick:()=>y.push("/write/suggestion?channel=".concat(g)),sx:{borderRadius:"14px",fontWeight:700,fontSize:"1rem",px:3,py:1.5,position:"relative",overflow:"hidden",textTransform:"none",transition:"all 0.3s ease",background:"linear-gradient(135deg, #8a2387, #e94057, #f27121)",color:"white",border:"dark"===v.palette.mode?"2px solid rgba(233, 64, 87, 0.5)":"2px solid rgba(233, 64, 87, 0.3)",boxShadow:"dark"===v.palette.mode?"0 0 25px rgba(233, 64, 87, 0.4), 0 0 50px rgba(233, 64, 87, 0.2)":"0 0 25px rgba(233, 64, 87, 0.3), 0 8px 32px rgba(0, 0, 0, 0.1)","&:hover":{transform:"translateY(-3px) scale(1.05)",background:"linear-gradient(135deg, #7a1d77, #d93a4f, #e2671e)",boxShadow:"dark"===v.palette.mode?"0 0 35px rgba(233, 64, 87, 0.6), 0 0 70px rgba(233, 64, 87, 0.3)":"0 0 35px rgba(233, 64, 87, 0.4), 0 12px 40px rgba(0, 0, 0, 0.15)"},"&:active":{transform:"translateY(-1px) scale(1.02)"}},children:"건의하기"}):"suggestion"!==t&&(0,r.jsx)(d.Z,{sx:{borderRadius:"12px",p:1.5,background:"dark"===v.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(6, 182, 212, 0.04))":"linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9))",border:"dark"===v.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(139, 92, 246, 0.15)",boxShadow:"dark"===v.palette.mode?"0 4px 15px rgba(139, 92, 246, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 4px 15px rgba(139, 92, 246, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)",maxWidth:"320px"},children:(0,r.jsx)(tw,{onSearch:m,onClearSearch:k,currentQuery:(null==c?void 0:c.query)||"",currentCategory:(null==c?void 0:c.type)||"title"})})})]})},tS=()=>{var e,t,a;let C=(0,o.Z)(),I=(0,f.useRouter)(),_=(0,f.useParams)(),P=null==_?void 0:_.slug,{data:W}=(0,j.useSession)(),{showMessage:T}=(0,w.U)(),A=(0,k.NL)(),{currentPage:M,setCurrentPage:U}=(0,Z.Z)(),{isSubscribed:E,addSubscription:Y,removeSubscription:L,loadSubscriptions:F}=(0,S.Z)(),{subscribeToChannel:q,unsubscribeFromChannel:N,isSubscribedToNotifications:O}=z(),{setChannelPageData:H}=(0,D.X)(),[B,K]=(0,n.useState)("all"),[G,Q]=(0,n.useState)("table"),[X,V]=(0,n.useState)("recent"),[J,$]=(0,n.useState)(!1),[ee,et]=(0,n.useState)(null),[ea,er]=(0,n.useState)(!1),[en,ei]=(0,n.useState)(!1),[es,ed]=(0,n.useState)(!1),[el,eg]=(0,n.useState)(!1),ep=R.D$,{data:eu,isLoading:em,isError:ef,error:ey}=(0,v.a)({queryKey:["channel",P],queryFn:()=>(0,ev.u3)(P),enabled:!!P,staleTime:3e5,retry:2}),eS=(null==eu?void 0:eu.id)||0,eC=E(eS),eD=O(eS);(0,n.useEffect)(()=>{let e=setTimeout(async()=>{if(eS&&(null==W?void 0:W.user)&&eu)try{let e=(await eZ(eS)).isSubscribed,t=O(eS);e!==t&&(e?q(eS,eu.channel_name,eu.slug):N(eS))}catch(e){console.error("알림 상태 확인 실패:",e)}},500);return()=>clearTimeout(e)},[eS,null==W?void 0:null===(e=W.user)||void 0===e?void 0:e.id,null==eu?void 0:eu.id]),(0,n.useEffect)(()=>{{let e=new URLSearchParams(window.location.search),t=e.get("category");t&&K(t),"card"===e.get("viewMode")&&Q("card"),"true"===e.get("recommendRanking")&&$(!0);let a=e.get("sortOrder");a&&["recent","view","recommend"].includes(a)&&V(a);let r=e.get("page");U(r?Number(r):1);let n=e.get("searchType"),o=e.get("searchQuery");n&&o&&et({type:n,query:o})}},[P,U]);let[eR,e_]=(0,n.useState)(null),[eP,eW]=(0,n.useState)(!1);(0,n.useEffect)(()=>{var e;"suggestion"===B&&eS&&(null==W?void 0:null===(e=W.user)||void 0===e?void 0:e.id)&&(async()=>{eW(!0);try{let e=(M-1)*ep,t="offset=".concat(e,"&limit=").concat(ep,"&channelId=").concat(eS,"&userId=").concat(W.user.id),a=await fetch("".concat("http://localhost:9999","/api/suggestion/pageTableData?").concat(t),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch suggestion data");let r=await a.json();e_(r)}catch(e){console.error("Error fetching suggestion data:",e),e_({results:[],total:0})}finally{eW(!1)}})()},[B,M,ep,eS,null==W?void 0:null===(t=W.user)||void 0===t?void 0:t.id]);let{data:eT,error:eA,isLoading:eM}=eI({category:B,currentPage:M,searchParamsState:ee,recommendRankingMode:J,viewCount:ep,viewMode:G,channelId:eS}),{data:eU,error:eE,isLoading:eY}=ez({category:B,currentPage:M,searchParamsState:ee,recommendRankingMode:J,viewCount:ep,viewMode:G,channelId:eS}),eL="suggestion"===B?eR:"card"===G?eU:eT,eF="suggestion"===B?null:"card"===G?eE:eA,eq="suggestion"===B?eP:"card"===G?eY:eM,eO=(null==eL?void 0:eL.total)||0,eH=(0,y.D)({mutationFn:ev.b8,onSuccess:()=>{eu&&Y(eu),T("채널을 구독했습니다!","success"),A.invalidateQueries({queryKey:["channel",eS]})},onError:e=>{var t,a;console.error("구독 실패:",e),T((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"구독에 실패했습니다.","error")}}),eB=(0,y.D)({mutationFn:ev.S0,onSuccess:()=>{L(eS),T("채널 구독을 취소했습니다.","info"),A.invalidateQueries({queryKey:["channel",eS]})},onError:e=>{var t,a;console.error("구독 취소 실패:",e),T((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"구독 취소에 실패했습니다.","error")}});(0,n.useEffect)(()=>{ef&&(console.error("채널 조회 실패:",ey),T("채널을 불러오는데 실패했습니다.","error")),eF&&(console.error("게시글 조회 실패:",eF),T("게시글을 불러오는데 실패했습니다.","error"))},[ef,eF,ey,T]),(0,n.useEffect)(()=>{eS&&!new URLSearchParams(window.location.search).get("page")&&U(1)},[eS,U]),(0,n.useEffect)(()=>{(null==W?void 0:W.user)&&F()},[null==W?void 0:W.user,F]),(0,n.useEffect)(()=>{if(eL&&eL.results&&P){let e=eL.results.map(e=>({id:e.id,title:e.title,nickname:e.nickname,category:e.category,created_at:e.created_at,read_count:e.read_count,recommend_Count:e.recommend_Count,comments_count:e.comments_count||0,channelSlug:P}));H(P,M,B,e)}},[eL,P,M,B,H]);let eK=()=>{ed(!1)},eG=(0,y.D)({mutationFn:()=>ej(eS),onSuccess:()=>{eu&&q(eS,eu.channel_name,eu.slug),T("채널 알림을 켰습니다!","success")},onError:e=>{var t,a,r;console.error("채널 알림 구독 실패:",e),(null===(t=e.response)||void 0===t?void 0:t.status)===409?(eu&&q(eS,eu.channel_name,eu.slug),T("채널 알림이 이미 켜져있었습니다.","info")):T((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"채널 알림 구독에 실패했습니다.","error")}}),eQ=(0,y.D)({mutationFn:()=>ew(eS),onSuccess:()=>{N(eS),T("채널 알림을 끝습니다.","info")},onError:e=>{var t,a,r;console.error("채널 알림 구독 해제 실패:",e),(null===(t=e.response)||void 0===t?void 0:t.status)===404?(N(eS),T("채널 알림이 이미 꺼져있었습니다.","info")):T((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"채널 알림 구독 해제에 실패했습니다.","error")}}),eX=e=>{sessionStorage.setItem("previousMainPageUrl",window.location.href),I.push("/channels/".concat(P,"/detail/story/").concat(e))},e$=(0,n.useMemo)(()=>eL?[...eL.results].sort((e,t)=>"view"===X?t.read_count-e.read_count:"recommend"===X?t.recommend_Count-e.recommend_Count:0).map(e=>({...e,isRecommendRanking:J})):[],[eL,X,J]),{data:e0,isLoading:e2,isError:e5}=(0,v.a)({queryKey:["channelNotices",eS],queryFn:async()=>{let e=await fetch("".concat("http://localhost:9999","/api/story/notices?channel=").concat(eS,"&limit=20"));if(!e.ok)throw Error("Failed to fetch notices");return e.json()},enabled:!!eS&&en,staleTime:3e5}),e3=(null==e0?void 0:e0.results)||[];return em?(0,r.jsx)(e1,{children:(0,r.jsx)(i.Z,{size:60,sx:{color:"dark"===C.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2"}})}):ef||!eu?(0,r.jsx)(eh.Z,{}):(0,r.jsxs)(eV,{children:[(0,r.jsx)(eJ,{children:(0,r.jsx)(s.Z,{sx:{p:3},children:(0,r.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(e7,{channelData:eu,session:W,formatSubscriberCount:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString()}),(0,r.jsx)(tn,{showChat:el,onChatToggle:()=>{if(!(null==W?void 0:W.user)){T("로그인이 필요합니다.","warning");return}eg(!el)},onShowNotice:()=>ei(!en),onShowChannelInfo:()=>er(!ea),hasSession:!!(null==W?void 0:W.user),isSubscribed:eC,onSubscribeToggle:()=>{if(!(null==W?void 0:W.user)){T("로그인이 필요합니다.","warning");return}eC?ed(!0):eH.mutate(eS)},subscribeMutationPending:eH.isPending,unsubscribeMutationPending:eB.isPending,isNotificationEnabled:eD,onNotificationToggle:()=>{if(!(null==W?void 0:W.user)){T("로그인이 필요합니다.","warning");return}if(!eu){T("채널 정보를 불러오는 중입니다. 잠시 후 다시 시도해주세요.","warning");return}if(!eS||0===eS){T("채널 ID를 확인할 수 없습니다. 잠시 후 다시 시도해주세요.","warning");return}eD?eQ.mutate():eG.mutate()},notificationSubscribeMutationPending:eG.isPending,notificationUnsubscribeMutationPending:eQ.isPending})]})})}),en&&(0,r.jsx)(ek,{channelData:eu,channelNotices:e3,noticesLoading:e2,onNoticeClick:e=>{I.push("/notice/".concat(e)),ei(!1)},onWriteNotice:()=>{if(!(null==W?void 0:W.user)){T("로그인이 필요합니다.","warning");return}if(!eS||0===eS){T("채널 정보를 불러오는 중입니다. 잠시 후 다시 시도해주세요.","warning");return}I.push("/write/notice?channel=".concat(eS)),ei(!1)}}),ea&&(0,r.jsxs)(l.Z,{sx:{borderRadius:"12px",p:3,background:"dark"===C.palette.mode?"#1e293b":"#ffffff",border:"dark"===C.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(139, 92, 246, 0.2)",boxShadow:"dark"===C.palette.mode?"0 4px 12px rgba(0, 0, 0, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsxs)(c.Z,{variant:"h6",sx:{color:"dark"===C.palette.mode?"#ffffff":"#1a1a2e",mb:2,fontWeight:700,fontSize:"1.2rem",display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(u.Z,{sx:{color:"dark"===C.palette.mode?"#a78bfa":"#8b5cf6",fontSize:24}}),"채널 정보"]}),(0,r.jsx)(d.Z,{sx:{p:2,borderRadius:"8px",background:"dark"===C.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)",border:"dark"===C.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(139, 92, 246, 0.15)"},children:(0,r.jsxs)(c.Z,{variant:"body1",sx:{color:"dark"===C.palette.mode?"#e2e8f0":"#374151",textAlign:"center",lineHeight:1.6,fontSize:"1rem",fontWeight:500},children:["\uD83D\uDCC5 생성일:"," ",(0,r.jsx)(d.Z,{component:"span",sx:{color:"dark"===C.palette.mode?"#a78bfa":"#8b5cf6",fontWeight:600},children:new Date(eu.created_at).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),"\xa0\xa0\xa0\xa0 \uD83D\uDC64 생성자:"," ",(0,r.jsx)(d.Z,{component:"span",sx:{color:"dark"===C.palette.mode?"#22d3ee":"#06b6d4",fontWeight:600},children:(null===(a=eu.creator)||void 0===a?void 0:a.nickname)||"알수없음"}),"\xa0\xa0\xa0\xa0 \uD83D\uDCCA 통계:"," ",(0,r.jsxs)(d.Z,{component:"span",sx:{color:"dark"===C.palette.mode?"#22c55e":"#16a34a",fontWeight:600},children:["구독자 ",eu.subscriber_count.toLocaleString(),"명 \xb7 게시글"," ",eu.story_count.toLocaleString(),"개"]})]})})]}),(0,r.jsxs)(g.Z,{open:es,onClose:eK,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"16px",background:"dark"===C.palette.mode?"rgba(30, 32, 38, 0.98)":"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(12px)",border:"dark"===C.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.05)"}},children:[(0,r.jsxs)(p.Z,{sx:{fontWeight:700,color:"dark"===C.palette.mode?"#ffffff":"#1a1a2e",display:"flex",alignItems:"center",gap:1,pb:1},children:[(0,r.jsx)(m.Z,{sx:{color:"#e94057"}}),"구독 취소 확인"]}),(0,r.jsx)(x.Z,{sx:{mt:1,mb:-1},children:(0,r.jsxs)(c.Z,{variant:"body1",sx:{color:"dark"===C.palette.mode?"#e2e8f0":"#374151",lineHeight:1.6,textAlign:"center"},children:[(0,r.jsx)("strong",{children:eu.channel_name})," 채널의 구독을 취소하시겠습니까?"]})}),(0,r.jsxs)(b.Z,{sx:{px:3,pb:3,gap:1,justifyContent:"center"},children:[(0,r.jsx)(h.Z,{onClick:eK,variant:"outlined",sx:{borderRadius:"12px",px:3,py:1,borderColor:"dark"===C.palette.mode?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",color:"dark"===C.palette.mode?"#e2e8f0":"#374151","&:hover":{backgroundColor:"dark"===C.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}},children:"아니오"}),(0,r.jsx)(h.Z,{onClick:()=>{eB.mutate(eS),ed(!1)},variant:"contained",disabled:eB.isPending,sx:{borderRadius:"12px",px:3,py:1,background:"linear-gradient(135deg, #e94057, #f27121)",color:"white",fontWeight:600,"&:hover":{background:"linear-gradient(135deg, #dc2626, #ea580c)"},"&:disabled":{background:"rgba(233, 64, 87, 0.5)"}},children:eB.isPending?(0,r.jsx)(i.Z,{size:20,sx:{color:"inherit"}}):"예, 구독 취소"})]})]}),!el&&(0,r.jsx)(tg,{currentTab:B,onTabChange:(e,t)=>{K(t),U(1);let a=new URLSearchParams;a.set("category",t),ee&&(a.set("searchType",ee.type),a.set("searchQuery",ee.query)),a.set("recommendRanking",J.toString()),a.set("viewMode",G),a.set("sortOrder",X),I.push("/channels/".concat(P,"?").concat(a.toString()),{scroll:!1})},hasSession:!!(null==W?void 0:W.user),viewMode:G,onViewModeChange:e=>{Q(e);let t=new URLSearchParams(window.location.search);t.set("viewMode",e),I.push("/channels/".concat(P,"?").concat(t.toString()),{scroll:!1})},onWritePost:()=>{if(!(null==W?void 0:W.user)){T("로그인이 필요합니다.","warning");return}if(!eS||0===eS){T("채널 정보를 불러오는 중입니다. 잠시 후 다시 시도해주세요.","warning");return}I.push("/write/story?channel=".concat(eS))},showChat:el}),el?(0,r.jsx)(eN,{channelId:eS,channelName:eu.channel_name,showMessage:T,onClose:()=>eg(!1)}):(0,r.jsxs)(r.Fragment,{children:[eq&&!eL?(0,r.jsx)(eb.default,{}):"suggestion"===B?(0,r.jsx)(ex,{tableData:e$,channelSlug:P}):"card"===G?(0,r.jsx)(ec,{tableData:e$,onRowClick:eX}):(0,r.jsx)(eo,{tableData:e$,onRowClick:eX}),eq&&eL&&(0,r.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",py:1},children:(0,r.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"데이터 업데이트 중..."})}),(0,r.jsx)(tZ,{currentTab:B,sortOrder:X,onSortChange:e=>{let t=e.target.value;V(t);let a=new URLSearchParams(window.location.search);a.set("sortOrder",t),I.push("/channels/".concat(P,"?").concat(a.toString()),{scroll:!1})},recommendRankingMode:J,onToggleRecommendRanking:()=>{let e=!J;$(e),U(1);let t=new URLSearchParams;t.set("category",B),ee&&(t.set("searchType",ee.type),t.set("searchQuery",ee.query)),t.set("recommendRanking",e.toString()),t.set("viewMode",G),t.set("sortOrder",X),I.push("/channels/".concat(P,"?").concat(t.toString()),{scroll:!1})},currentTotal:eO,viewCount:ep,currentPage:M,onPageChange:e=>{let t=e.selected+1;U(t);let a=new URLSearchParams(window.location.search);a.set("page",t.toString()),I.push("/channels/".concat(P,"?").concat(a.toString()),{scroll:!1})},hasSession:!!(null==W?void 0:W.user),channelSlug:P,searchParamsState:ee,onSearch:e=>{let{category:t,query:a}=e;et({type:t,query:a}),U(1);let r=new URLSearchParams;r.set("category",B),r.set("searchType",t),r.set("searchQuery",a),r.set("recommendRanking",J.toString()),r.set("viewMode",G),r.set("sortOrder",X),I.push("/channels/".concat(P,"?").concat(r.toString()),{scroll:!1})},onClearSearch:()=>{et(null),U(1);let e=new URLSearchParams;e.set("category",B),e.set("recommendRanking",J.toString()),e.set("viewMode",G),e.set("sortOrder",X),I.push("/channels/".concat(P,"?").concat(e.toString()),{scroll:!1})}})]})]})}},47990:function(e,t,a){"use strict";var r=a(83464);let n=r.Z.create({baseURL:"http://localhost:9999",withCredentials:!0});n.interceptors.request.use(e=>e,e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if("/api/auth/refresh"===a.url)return window.location.href="/login",Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry){a._retry=!0;try{return await r.Z.post("".concat("http://localhost:9999","/api/auth/refresh"),{},{withCredentials:!0,headers:{"Content-Type":"application/json"}}),n(a)}catch(e){return window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),t.Z=n},32574:function(e,t,a){"use strict";a.d(t,{$f:function(){return n},Lc:function(){return o},tf:function(){return i}});var r=a(47990);let n=async e=>(await r.Z.post("".concat("http://localhost:9999","/api/blinds"),e,{withCredentials:!0})).data,o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await r.Z.get("".concat("http://localhost:9999","/api/blinds"),{params:{page:e,limit:t},withCredentials:!0})).data},i=async e=>{await r.Z.delete("".concat("http://localhost:9999","/api/blinds/").concat(e),{withCredentials:!0})}},56162:function(e,t,a){"use strict";a.d(t,{Bh:function(){return g},Ky:function(){return n},S0:function(){return d},b8:function(){return s},ec:function(){return l},mi:function(){return c},mr:function(){return o},u3:function(){return i},w4:function(){return p}});var r=a(83464);let n=async()=>(await r.Z.get("".concat("http://localhost:9999","/api/channels"),{withCredentials:!0})).data,o=async e=>(await r.Z.get("".concat("http://localhost:9999","/api/channels/").concat(e),{withCredentials:!0})).data,i=async e=>(await r.Z.get("".concat("http://localhost:9999","/api/channels/slug/").concat(e),{withCredentials:!0})).data,s=async e=>(await r.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{},{withCredentials:!0})).data,d=async e=>(await r.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{withCredentials:!0})).data,l=async()=>(await r.Z.get("".concat("http://localhost:9999","/api/channels/user/subscriptions"),{withCredentials:!0})).data,c=async(e,t)=>(await r.Z.post("".concat("http://localhost:9999","/api/channels/create"),{channelName:e,slug:t},{withCredentials:!0})).data,g=async(e,t)=>{let a=new FormData;return a.append("channelImage",t),(await r.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/upload-image"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},p=async e=>(await r.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/image"),{withCredentials:!0})).data},25769:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var r=a(57437),n=a(2265),o=a(16593),i=a(80605),s=a(32574),d=a(14534);let l=()=>{let{data:e}=(0,i.useSession)(),{setBlindUsers:t,isUserBlinded:a}=(0,d.L)(),{data:r}=(0,o.a)({queryKey:["blindUsers"],queryFn:()=>(0,s.Lc)(1,100),enabled:!!(null==e?void 0:e.user),staleTime:3e5});return(0,n.useEffect)(()=>{(null==r?void 0:r.items)&&t(r.items)},[null==r?void 0:r.items,t]),{isUserBlinded:a,blindUsers:(null==r?void 0:r.items)||[]}};var c=a(46387),g=a(14759),p=e=>{let{type:t,className:a}=e;return(0,r.jsxs)(c.Z,{variant:"body2",color:"text.disabled",sx:{display:"flex",alignItems:"center",gap:.5,fontStyle:"italic"},className:a,children:[(0,r.jsx)(g.Z,{fontSize:"small"}),"블라인드된 사용자입니다"]})},x=e=>{let{userId:t,type:a,children:n,className:o}=e,{isUserBlinded:i}=l();return i(t)?(0,r.jsx)(p,{type:a,className:o}):(0,r.jsx)(r.Fragment,{children:n})}},71204:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57437),n=a(2069),o=a(67208),i=a(46387);function s(){return(0,r.jsx)(n.Z,{display:"flex",justifyContent:"center",children:(0,r.jsx)(o.Z,{sx:{padding:3,boxShadow:3},children:(0,r.jsx)(i.Z,{variant:"h6",color:"error",gutterBottom:!0,children:"오류가 발생했습니다. 다시 시도해주세요."})})})}a(2265)},94623:function(e,t,a){"use strict";a.d(t,{default:function(){return i}});var r=a(57437),n=a(35389),o=a(31691);function i(){let e=(0,o.Z)();return(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"dark"===e.palette.mode?"rgba(18, 18, 18, 0.3)":"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(1px)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.3s ease"},children:(0,r.jsxs)("div",{style:{textAlign:"center",backgroundColor:"dark"===e.palette.mode?"#1e1e1e":"#ffffff",padding:"24px 32px",borderRadius:"12px",boxShadow:"dark"===e.palette.mode?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 8px 24px rgba(0, 0, 0, 0.15)",border:"dark"===e.palette.mode?"1px solid #333333":"1px solid #e0e0e0"},children:[(0,r.jsx)(n.Z,{size:48,thickness:4,sx:{color:"dark"===e.palette.mode?"#bb86fc":"#1976d2",marginBottom:1}}),(0,r.jsx)("div",{style:{marginTop:"12px",fontSize:"14px",color:"dark"===e.palette.mode?"#e0e0e0":"#666666",fontWeight:500},children:"로딩 중..."})]})})}a(2265)},11471:function(e,t,a){"use strict";a.d(t,{D$:function(){return r},Tq:function(){return n},VI:function(){return s},bP:function(){return i},jL:function(){return o},oi:function(){return d}});let r=6,n=6,o=1,i=6,s=6,d=5},86874:function(e,t,a){"use strict";a.d(t,{CQ:function(){return h},E2:function(){return x},Ik:function(){return b},KX:function(){return p},ey:function(){return u}});var r=a(57437),n=a(27186),o=a(52572),i=a(4026),s=a(52441),d=a(23755),l=a(35386),c=a(49453),g=a(63329);let p=[{name:"잡담",value:"chat",icon:(0,r.jsx)(n.Z,{})},{name:"질문",value:"question",icon:(0,r.jsx)(o.Z,{})},{name:"정보",value:"info",icon:(0,r.jsx)(i.Z,{})},{name:"리뷰",value:"review",icon:(0,r.jsx)(s.Z,{})},{name:"스샷",value:"screenshot",icon:(0,r.jsx)(d.Z,{})},{name:"기타",value:"etc",icon:(0,r.jsx)(l.Z,{})}],x=p[0].value,b=[{name:"전체",value:"all",icon:(0,r.jsx)(c.Z,{})},...p,{name:"건의",value:"suggestion",icon:(0,r.jsx)(g.Z,{})}],h=[{name:"건의",value:"suggestion"},{name:"문의",value:"inquiry"},{name:"신고",value:"report"}],u="suggestion"},14534:function(e,t,a){"use strict";a.d(t,{L:function(){return r}});let r=(0,a(3011).U)((e,t)=>({blindUsers:[],blindedUserIds:new Set,setBlindUsers:t=>e({blindUsers:t,blindedUserIds:new Set(t.map(e=>e.targetUserId))}),addBlindUser:t=>e(e=>{let a=[...e.blindUsers,t],r=new Set(e.blindedUserIds);return r.add(t.targetUserId),{blindUsers:a,blindedUserIds:r}}),removeBlindUser:t=>e(e=>{let a=e.blindUsers.find(e=>e.id===t),r=e.blindUsers.filter(e=>e.id!==t),n=new Set(e.blindedUserIds);return a&&n.delete(a.targetUserId),{blindUsers:r,blindedUserIds:n}}),isUserBlinded:e=>t().blindedUserIds.has(e),clearBlindUsers:()=>e({blindUsers:[],blindedUserIds:new Set})}))},4871:function(e,t,a){"use strict";a.d(t,{X:function(){return o}});var r=a(3011),n=a(89134);let o=(0,r.U)()((0,n.tJ)((e,t)=>({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1,setChannelPageData:(t,a,r,n)=>{e({currentChannelSlug:t,currentPage:a,currentCategory:r,stories:n,isLoading:!1})},clearChannelPageData:()=>{e({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1})},updateStory:(a,r)=>{let{stories:n}=t();e({stories:n.map(e=>e.id===a?{...e,...r}:e)})}}),{name:"channel-page-storage",partialize:e=>({currentChannelSlug:e.currentChannelSlug,currentPage:e.currentPage,currentCategory:e.currentCategory,stories:e.stories})}))},30419:function(e,t,a){"use strict";a.d(t,{U:function(){return r}});let r=(0,a(3011).U)(e=>({messageState:!1,messageContent:"",messageStyle:"success",messageTransition:"fade",showMessage:function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fade";return e({messageState:!0,messageContent:t,messageStyle:a,messageTransition:r})},hideMessage:()=>e({messageState:!1,messageContent:""})}))},99154:function(e,t,a){"use strict";let r=(0,a(3011).U)(e=>({currentPage:1,setCurrentPage:t=>e({currentPage:t})}));t.Z=r},96407:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(3011),n=a(56162);let o=(0,r.U)((e,t)=>({subscribedChannels:[],loading:!1,error:null,isInitialized:!1,loadSubscriptions:async()=>{let{isInitialized:a}=t();if(!a)try{e({loading:!0,error:null});let t=await (0,n.ec)();e({subscribedChannels:t,loading:!1,isInitialized:!0})}catch(t){var r;if((null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status)===401){e({loading:!1,error:null});return}console.error("구독 채널 목록을 불러오는데 실패했습니다:",t),e({error:"구독 채널 목록을 불러오는데 실패했습니다.",loading:!1})}},addSubscription:a=>{let{subscribedChannels:r}=t();r.find(e=>e.id===a.id)||e({subscribedChannels:[...r,a]})},removeSubscription:a=>{let{subscribedChannels:r}=t();e({subscribedChannels:r.filter(e=>e.id!==a)})},isSubscribed:e=>{let{subscribedChannels:a}=t();return a.some(t=>t.id===e)},clearSubscriptions:()=>{e({subscribedChannels:[],error:null,isInitialized:!1})}}))},83226:function(e){e.exports={pagination:"Pagination_pagination__qRKT9",active:"Pagination_active__co3jT",disabled:"Pagination_disabled__zjxqn"}}},function(e){e.O(0,[702,5152,4419,1991,1547,6593,455,2472,7404,9631,605,6931,7571,2321,64,8531,9796,8938,8312,2287,2971,2117,1744],function(){return e(e.s=14593)}),_N_E=e.O()}]);