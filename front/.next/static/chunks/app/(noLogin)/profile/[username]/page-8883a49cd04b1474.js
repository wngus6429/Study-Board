(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9853],{29366:function(e,t,r){Promise.resolve().then(r.bind(r,96985))},96985:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(57437),o=r(2265),i=r(29827),n=r(16593),l=r(66085),s=r(83812),c=r(83464),d=r(94623),u=r(30419),x=r(99376),h=r(11471),m=r(9662),p=r(32346),g=r(59016),f=r(31691),b=r(2069),y=r(46387),j=r(67116),Z=r(35389);function w(){var e;let t=(0,x.useParams)(),r=null==t?void 0:t.username,w=r?decodeURIComponent(r):"",v=(0,x.useRouter)(),C=(0,i.NL)(),{showMessage:D}=(0,u.U)(e=>e),k=(0,f.Z)(),[P,T]=(0,o.useState)(1),[I,R]=(0,o.useState)(1),S=h.Tq,q=async e=>(await c.Z.get("".concat("http://localhost:9999","/api/auth/profile/").concat(e))).data;(0,o.useEffect)(()=>{null!=w&&C.prefetchQuery({queryKey:["userProfileInfo",w],queryFn:()=>q(w)})},[w,C]);let{data:F,error:W,isLoading:_}=(0,n.a)({queryKey:["userProfileInfo",w],queryFn:()=>q(w),retry:1,retryDelay:()=>2e3,enabled:!!w,staleTime:1e4,gcTime:3e4}),{data:E,error:z,isLoading:A,isFetching:K,isPlaceholderData:N}=(0,n.a)({queryKey:["userProfile","stories",w,P],queryFn:async()=>{let e=(P-1)*S;return(await c.Z.post("".concat("http://localhost:9999","/api/auth/userProfileStoryTableData"),{offset:e,limit:S,username:w},{withCredentials:!0})).data},enabled:!!w,retry:1,retryDelay:()=>2e3,staleTime:1e4,gcTime:3e4,placeholderData:e=>e,refetchOnWindowFocus:!1}),{data:O,error:B,isLoading:H,isFetching:L,isPlaceholderData:M}=(0,n.a)({queryKey:["userProfile","comments",w,I],queryFn:async()=>{let e=(I-1)*S;return(await c.Z.post("".concat("http://localhost:9999","/api/auth/userProfileCommentsTableData"),{offset:e,limit:S,username:w},{withCredentials:!0})).data},enabled:!!w,retry:1,retryDelay:()=>2e3,staleTime:1e4,gcTime:3e4,placeholderData:e=>e,refetchOnWindowFocus:!1});(0,o.useEffect)(()=>{W&&(D("오류가 발생했습니다. 다시 시도해주세요.","error"),v.replace("/not-found"))},[W,v,D]);let U=(0,l.D)(C);return _?(0,a.jsx)(d.default,{}):(0,a.jsx)(s.R,{state:U,children:null!=F?(0,a.jsxs)(b.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:3,minHeight:"75vh",gap:4},children:[(0,a.jsxs)(b.Z,{sx:{display:"flex",flexDirection:"row",gap:4,width:"100%",maxWidth:"1400px",alignItems:"flex-start"},children:[(0,a.jsx)(b.Z,{sx:{width:"400px",flexShrink:0},children:(0,a.jsxs)(b.Z,{sx:{bgcolor:"background.paper",boxShadow:3,p:3,borderRadius:2},children:[(0,a.jsx)(y.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,color:"primary.main",textAlign:"center"},children:"프로필 보기"}),(0,a.jsxs)(b.Z,{display:"flex",flexDirection:"column",alignItems:"center",sx:{gap:2},children:[(0,a.jsx)(j.Z,{src:"".concat("http://localhost:9999").concat(null===(e=F.user.image)||void 0===e?void 0:e.link),sx:{width:120,height:120,boxShadow:2,border:"3px solid",borderColor:"primary.main"}}),(0,a.jsx)(y.Z,{variant:"h6",sx:{fontWeight:"bold",textAlign:"center"},children:F.user.nickname})]})]})}),(0,a.jsx)(b.Z,{sx:{flexGrow:1},children:(0,a.jsxs)(b.Z,{sx:{bgcolor:"background.paper",boxShadow:2,borderRadius:2,p:3,position:"relative",minHeight:"400px"},children:[(0,a.jsx)(y.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,color:"primary.main",textAlign:"center"},children:"작성한 글"}),K&&!N&&(0,a.jsx)(b.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"dark"===k.palette.mode?"rgba(26, 26, 46, 0.9)":"rgba(255, 255, 255, 0.8)",zIndex:1,borderRadius:2},children:(0,a.jsx)(Z.Z,{size:40,sx:{color:"dark"===k.palette.mode?"#a78bfa":"primary.main"}})}),(0,a.jsx)(m.Z,{tableData:(null==E?void 0:E.StoryResults)||[]}),(0,a.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,a.jsx)(g.Z,{pageCount:Math.ceil(((null==E?void 0:E.StoryTotal)||0)/S),onPageChange:e=>{T(e.selected+1)},currentPage:P})})]})})]}),(0,a.jsx)(b.Z,{sx:{width:"100%",maxWidth:"1400px"},children:(0,a.jsxs)(b.Z,{sx:{bgcolor:"background.paper",boxShadow:2,borderRadius:2,p:3,position:"relative",minHeight:"400px"},children:[(0,a.jsx)(y.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,color:"primary.main",textAlign:"center"},children:"작성한 댓글"}),L&&!M&&(0,a.jsx)(b.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"dark"===k.palette.mode?"rgba(26, 26, 46, 0.9)":"rgba(255, 255, 255, 0.8)",zIndex:1,borderRadius:2},children:(0,a.jsx)(Z.Z,{size:40,sx:{color:"dark"===k.palette.mode?"#a78bfa":"primary.main"}})}),(0,a.jsx)(p.Z,{tableData:(null==O?void 0:O.CommentsResults)||[],commentsFlag:!0}),(0,a.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,a.jsx)(g.Z,{pageCount:Math.ceil(((null==O?void 0:O.CommentsTotal)||0)/S),onPageChange:e=>{R(e.selected+1)},currentPage:I})})]})})]}):(0,a.jsx)(d.default,{})})}}},function(e){e.O(0,[702,5152,4419,1991,1547,6593,455,2472,6931,2321,8531,8098,7779,2971,2117,1744],function(){return e(e.s=29366)}),_N_E=e.O()}]);