(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1278],{13171:function(e,t,r){Promise.resolve().then(r.bind(r,4978))},4978:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ef}});var a=r(57437),o=r(94623),n=r(31691),i=r(2069),l=r(67208),s=r(36137),d=r(46387),c=r(67116),u=r(91991),p=r(53392),g=r(79507),x=r(77468),h=r(9026),m=r(2265),b=r(59832),f=r(62016),v=r(16701),k=r(8430),y=r(26484),w=r(41761),S=e=>{let{open:t,selectedImage:r,currentImageIndex:o,images:n,onClose:l,onImageChange:s}=e,[c,u]=(0,m.useState)(1),[g,x]=(0,m.useState)({x:0,y:0}),[h,S]=(0,m.useState)(!1),[j,Z]=(0,m.useState)({x:0,y:0}),C=()=>{u(e=>Math.min(e+.25,3))},I=()=>{let e=Math.max(c-.25,.5);u(e),e<=1&&x({x:0,y:0})},z=()=>{o>0&&(s(o-1),u(1),x({x:0,y:0}))},E=()=>{o<n.length-1&&(s(o+1),u(1),x({x:0,y:0}))},W=()=>{u(1),x({x:0,y:0}),S(!1),l()};return(0,m.useEffect)(()=>{let e=e=>{if(t)switch(e.key){case"ArrowRight":E();break;case"ArrowLeft":z();break;case"Escape":W();break;case"+":case"=":C();break;case"-":I();break;case"r":case"R":x({x:0,y:0})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,o,n.length,c]),(0,m.useEffect)(()=>{if(!h)return;let e=e=>{h&&!(c<=1)&&x({x:e.clientX-j.x,y:e.clientY-j.y})},t=()=>{S(!1)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[h,j,c]),(0,a.jsxs)(p.Z,{open:t,onClose:W,maxWidth:!1,fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(0, 0, 0, 0.92)",border:"1px solid rgba(192, 192, 192, 0.5)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.1)",position:"relative",height:"85vh",width:"80vw",margin:"20px",borderRadius:"8px",overflow:"hidden"}},children:[(0,a.jsxs)(i.Z,{sx:{position:"absolute",top:0,right:0,display:"flex",justifyContent:"flex-end",alignItems:"center",p:1.5,zIndex:10},children:[(0,a.jsx)(b.Z,{onClick:I,sx:{color:"silver","&:hover":{color:"white"},mr:1,fontSize:"1.8rem"},children:(0,a.jsx)(f.Z,{sx:{fontSize:"1.8rem"}})}),(0,a.jsxs)(d.Z,{variant:"body1",sx:{color:"silver",mx:1,fontSize:"1.1rem"},children:[(100*c).toFixed(0),"%"]}),(0,a.jsx)(b.Z,{onClick:C,sx:{color:"silver","&:hover":{color:"white"},mr:1,fontSize:"1.8rem"},children:(0,a.jsx)(v.Z,{sx:{fontSize:"1.8rem"}})}),(0,a.jsx)(b.Z,{onClick:W,sx:{color:"silver","&:hover":{color:"white"},fontSize:"1.8rem"},children:(0,a.jsx)(k.Z,{sx:{fontSize:"1.8rem"}})})]}),(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",position:"relative"},children:[o>0&&(0,a.jsx)(b.Z,{onClick:z,sx:{position:"absolute",left:{xs:8,md:24},color:"silver","&:hover":{color:"white"},fontSize:"2rem"},children:(0,a.jsx)(y.Z,{sx:{fontSize:"2rem"}})}),r&&(0,a.jsx)(i.Z,{component:"img",src:"".concat("http://localhost:9999").concat(r.link),alt:"Selected",onMouseDown:e=>{c<=1||(S(!0),Z({x:e.clientX-g.x,y:e.clientY-g.y}),e.preventDefault())},onMouseMove:e=>{h&&!(c<=1)&&x({x:e.clientX-j.x,y:e.clientY-j.y})},onMouseUp:()=>{S(!1)},onMouseLeave:()=>{S(!1)},sx:{maxWidth:"90%",maxHeight:"80vh",objectFit:"contain",transform:"scale(".concat(c,") translate(").concat(g.x/c,"px, ").concat(g.y/c,"px)"),transition:h?"none":"transform 0.2s ease-out",border:"1px solid rgba(192, 192, 192, 0.2)",cursor:c>1?h?"grabbing":"grab":"default",userSelect:"none"},draggable:!1}),o<n.length-1&&(0,a.jsx)(b.Z,{onClick:E,sx:{position:"absolute",right:{xs:8,md:24},color:"silver","&:hover":{color:"white"},fontSize:"2rem"},children:(0,a.jsx)(w.Z,{sx:{fontSize:"2rem"}})})]})]})},j=r(24902),Z=r(35389),C=r(77692),I=r(19693),z=r(75979),E=r(46805),W=e=>{let{currentUserId:t,authorId:r,category:o,storyId:l,isScraped:s,scrapLoading:d,onScrapClick:c,onReportClick:p,editFlag:g,onEditClick:x,onDeleteClick:h,hasAdminPermission:m,adminLoading:b,adminBadgeText:f,onAdminDeleteClick:v}=e,k=(0,n.Z)(),y=t&&r===t,w=t&&!y;return(0,a.jsxs)(i.Z,{display:"flex",gap:1.5,children:[w&&(0,a.jsx)(j.Z,{title:"신고하기",children:(0,a.jsx)(u.Z,{size:"medium",variant:"outlined",onClick:p,startIcon:(0,a.jsx)(C.Z,{sx:{fontSize:22}}),sx:{borderRadius:"14px",fontWeight:700,px:3,py:1.5,position:"relative",overflow:"hidden",textTransform:"none",transition:"all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)",background:"dark"===k.palette.mode?"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05))":"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.95))",border:"dark"===k.palette.mode?"2px solid rgba(239, 68, 68, 0.4)":"2px solid rgba(239, 68, 68, 0.3)",color:"dark"===k.palette.mode?"#fca5a5":"#dc2626",boxShadow:"dark"===k.palette.mode?"0 0 10px rgba(239, 68, 68, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 0 10px rgba(239, 68, 68, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.6)","&::before":{content:'""',position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",background:"linear-gradient(45deg, #ef4444, #dc2626, #b91c1c, #ef4444)",borderRadius:"16px",opacity:.15,animation:"borderGlow 6s linear infinite",zIndex:-1},"&::after":{content:'""',position:"absolute",top:"50%",left:"-100%",width:"200%",height:"1px",background:"dark"===k.palette.mode?"linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.4), transparent)":"linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.3), transparent)",transform:"translateY(-50%)",animation:"scanLine 5s ease-in-out infinite",zIndex:1,pointerEvents:"none"},"@keyframes borderGlow":{"0%":{backgroundPosition:"0% 50%",filter:"hue-rotate(0deg)"},"50%":{backgroundPosition:"100% 50%",filter:"hue-rotate(60deg)"},"100%":{backgroundPosition:"0% 50%",filter:"hue-rotate(0deg)"}},"@keyframes scanLine":{"0%":{left:"-100%",opacity:0},"50%":{left:"50%",opacity:1},"100%":{left:"200%",opacity:0}},"&:hover":{transform:"translateY(-1px) scale(1.01)",background:"dark"===k.palette.mode?"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.08))":"linear-gradient(135deg, rgba(239, 68, 68, 0.03), rgba(220, 38, 38, 0.01))",boxShadow:"dark"===k.palette.mode?"0 0 15px rgba(239, 68, 68, 0.25)":"0 0 15px rgba(239, 68, 68, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08)"},"&:active":{transform:"translateY(-1px) scale(0.98)"},"& .MuiButton-startIcon":{filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2))"}},children:"신고하기"})}),w&&(0,a.jsx)(j.Z,{title:s?"스크랩 취소":"스크랩",children:(0,a.jsx)(u.Z,{size:"medium",variant:s?"contained":"outlined",onClick:c,disabled:d,startIcon:d?(0,a.jsx)(Z.Z,{size:20}):s?(0,a.jsx)(I.Z,{sx:{fontSize:22}}):(0,a.jsx)(z.Z,{sx:{fontSize:22}}),sx:{borderRadius:"14px",fontWeight:700,px:3,py:1.5,position:"relative",overflow:"hidden",textTransform:"none",transition:"all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)",background:s?"dark"===k.palette.mode?"linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(22, 163, 74, 0.2))":"linear-gradient(135deg, #22c55e, #16a34a, #15803d)":"dark"===k.palette.mode?"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05))":"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.95))",border:s?"dark"===k.palette.mode?"2px solid rgba(34, 197, 94, 0.6)":"2px solid rgba(34, 197, 94, 0.4)":"dark"===k.palette.mode?"2px solid rgba(34, 197, 94, 0.4)":"2px solid rgba(34, 197, 94, 0.3)",color:s?"white":"dark"===k.palette.mode?"#86efac":"#16a34a",boxShadow:s?"dark"===k.palette.mode?"0 0 12px rgba(34, 197, 94, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 0 12px rgba(34, 197, 94, 0.15), 0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.6)":"dark"===k.palette.mode?"0 0 10px rgba(34, 197, 94, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 0 10px rgba(34, 197, 94, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.6)","&::before":{content:'""',position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",background:"linear-gradient(45deg, #22c55e, #16a34a, #15803d, #22c55e)",borderRadius:"16px",opacity:.2,animation:"borderGlow 6s linear infinite",zIndex:-1},"&::after":{content:'""',position:"absolute",top:"50%",left:"-100%",width:"200%",height:"1px",background:"dark"===k.palette.mode?"linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.4), transparent)":"linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.3), transparent)",transform:"translateY(-50%)",animation:"scanLine 5s ease-in-out infinite",animationDelay:"1s",zIndex:1,pointerEvents:"none"},"@keyframes borderGlow":{"0%":{backgroundPosition:"0% 50%",filter:"hue-rotate(0deg)"},"50%":{backgroundPosition:"100% 50%",filter:"hue-rotate(120deg)"},"100%":{backgroundPosition:"0% 50%",filter:"hue-rotate(0deg)"}},"@keyframes scanLine":{"0%":{left:"-100%",opacity:0},"50%":{left:"50%",opacity:1},"100%":{left:"200%",opacity:0}},"&:hover":{transform:"translateY(-1px) scale(1.01)",background:s?"dark"===k.palette.mode?"linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.15))":"linear-gradient(135deg, #16a34a, #15803d, #166534)":"dark"===k.palette.mode?"linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.08))":"linear-gradient(135deg, rgba(34, 197, 94, 0.03), rgba(22, 163, 74, 0.01))",boxShadow:s?"dark"===k.palette.mode?"0 0 18px rgba(34, 197, 94, 0.3)":"0 0 18px rgba(34, 197, 94, 0.2), 0 4px 12px rgba(0, 0, 0, 0.08)":"dark"===k.palette.mode?"0 0 15px rgba(34, 197, 94, 0.25)":"0 0 15px rgba(34, 197, 94, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08)"},"&:active":{transform:"translateY(-1px) scale(0.98)"},"&:disabled":{background:s?"linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(22, 163, 74, 0.2))":"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05))",transform:"none",boxShadow:"none"},"& .MuiButton-startIcon":{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}},children:s?"스크랩 취소":"스크랩"})}),y&&"question"!==o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{size:"medium",variant:"outlined",color:"warning",onClick:x,disabled:g,startIcon:g?(0,a.jsx)(Z.Z,{size:20}):null,children:"수정"}),(0,a.jsx)(u.Z,{size:"medium",variant:"outlined",color:"error",onClick:h,children:"삭제"})]}),m&&(0,a.jsx)(u.Z,{size:"medium",variant:"contained",color:"error",onClick:v,disabled:b,startIcon:b?(0,a.jsx)(Z.Z,{size:20}):(0,a.jsx)(E.Z,{}),sx:{background:"linear-gradient(45deg, #f44336, #d32f2f)","&:hover":{background:"linear-gradient(45deg, #d32f2f, #b71c1c)"}},children:b?"삭제 중...":"관리자 삭제 (".concat(f,")")})]})},P=r(29827),D=r(16593),A=r(21770),M=r(83464),R=r(71096),L=r.n(R),_=r(99376),T=r(54887),U=r(59103),F=r(80605),B=r(30419),Y=r(35574),V=r(57507),O=r(71204),q=r(60049),$=r(75750),X=r(63810);function H(e){let{like:t,dislike:r,likeFunc:o}=e,[l,s]=(0,m.useState)(null),c=(0,n.Z)(),p=e=>{s(e),o(e),setTimeout(()=>s(null),500)},g={background:"dark"===c.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(45, 45, 75, 0.95), rgba(26, 26, 46, 0.95))":"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(241, 241, 245, 0.95), rgba(255, 255, 255, 0.95))"};return(0,a.jsx)(i.Z,{sx:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",zIndex:10,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:2,opacity:.9},children:(0,a.jsx)(i.Z,{sx:{border:"dark"===c.palette.mode?"2px solid rgba(139, 92, 246, 0.4)":"2px solid rgba(0, 0, 0, 0.1)",padding:"12px",borderRadius:3,...g,boxShadow:"dark"===c.palette.mode?"0 8px 32px rgba(139, 92, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8)",width:220,textAlign:"center",backdropFilter:"blur(10px)",overflow:"hidden"},children:(0,a.jsxs)(i.Z,{sx:{display:"flex",gap:2,justifyContent:"center",mt:1},children:[(0,a.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,a.jsx)(X.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,a.jsx)(d.Z,{variant:"subtitle1",sx:{fontWeight:"bold",color:"dark"===c.palette.mode?"#22d3ee":"#1976d2",fontSize:"1.2rem"},children:t})},t),(0,a.jsx)(X.E.div,{whileTap:{scale:1.4},whileHover:{scale:1.2},children:(0,a.jsx)(u.Z,{variant:"contained",color:"primary",startIcon:(0,a.jsx)(q.Z,{}),sx:{borderRadius:20,padding:"10px 18px",fontWeight:"bold",opacity:1,background:"like"===l?"linear-gradient(45deg, #10b981 30%, #22d3ee 90%)":"dark"===c.palette.mode?"linear-gradient(45deg, #3b82f6 30%, #22d3ee 90%)":void 0,boxShadow:"dark"===c.palette.mode?"0 4px 15px rgba(59, 130, 246, 0.4)":void 0,"&:hover":{background:"dark"===c.palette.mode?"linear-gradient(45deg, #2563eb 30%, #0891b2 90%)":void 0,boxShadow:"dark"===c.palette.mode?"0 6px 20px rgba(59, 130, 246, 0.6)":void 0,transform:"translateY(-2px)"}},onClick:()=>p("like"),children:"추천"})})]}),(0,a.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,a.jsx)(X.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,a.jsx)(d.Z,{variant:"subtitle1",sx:{fontWeight:"bold",color:"dark"===c.palette.mode?"#f87171":"#d32f2f",fontSize:"1.2rem"},children:r})},r),(0,a.jsx)(X.E.div,{whileTap:{scale:1.4},whileHover:{scale:1.2},children:(0,a.jsx)(u.Z,{variant:"contained",color:"error",startIcon:(0,a.jsx)($.Z,{}),sx:{borderRadius:20,padding:"10px 18px",fontWeight:"bold",opacity:1,background:"dislike"===l?"linear-gradient(45deg, #dc2626 30%, #ef4444 90%)":"dark"===c.palette.mode?"linear-gradient(45deg, #ef4444 30%, #f87171 90%)":void 0,boxShadow:"dark"===c.palette.mode?"0 4px 15px rgba(239, 68, 68, 0.4)":void 0,"&:hover":{background:"dark"===c.palette.mode?"linear-gradient(45deg, #dc2626 30%, #ef4444 90%)":void 0,boxShadow:"dark"===c.palette.mode?"0 6px 20px rgba(239, 68, 68, 0.6)":void 0,transform:"translateY(-2px)"}},onClick:()=>p("dislike"),children:"비추"})})]})]})})})}var N=r(42082),K=r(59253),G=r(67571),Q=r(85330),J=r(70525),ee=r(32653),et=r(50663),er=r(76965),ea=r(31971),eo=r(49241);let en=m.memo(e=>{let{video:t,isLastOddVideo:r}=e,[o,n]=(0,m.useState)(!1),[l,s]=(0,m.useState)(!0),[c,u]=(0,m.useState)(!1),[p,g]=(0,m.useState)(0),[x,h]=(0,m.useState)(0),[f,v]=(0,m.useState)(1),[k,y]=(0,m.useState)(!1),[w,S]=(0,m.useState)(!1),[j,Z]=(0,m.useState)(!1),[C,I]=(0,m.useState)(16/9),[z,E]=(0,m.useState)(!1),W=(0,m.useRef)(null),P=(0,m.useRef)(null),D=(0,m.useRef)(),A=e=>{e.stopPropagation(),W.current&&(o?W.current.pause():W.current.play(),n(!o))};(0,m.useEffect)(()=>{let e=()=>{y(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);let M=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,a.jsxs)(i.Z,{ref:P,sx:{position:"relative",width:r?z?{xs:"100%",sm:"400px"}:"100%":z?{xs:"100%",sm:"400px"}:{xs:"100%",sm:"calc(50% - 8px)"},aspectRatio:c?C.toString():"16/9",maxHeight:z&&"600px",borderRadius:"12px",overflow:"hidden",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)"}},onMouseMove:()=>{S(!0),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{o&&S(!1)},3e3)},onMouseLeave:()=>{o&&S(!1)},children:[(0,a.jsx)("video",{ref:W,src:"".concat("http://localhost:9999").concat(t.link),style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:z?"#000":"transparent"},muted:l,onLoadedMetadata:()=>{if(W.current){let{videoWidth:e,videoHeight:t}=W.current,r=e/t;I(r),E(r<1),h(W.current.duration),u(!0)}},onTimeUpdate:()=>{W.current&&g(W.current.currentTime)},onEnded:()=>n(!1),onWaiting:()=>Z(!0),onCanPlay:()=>Z(!1)}),(0,a.jsx)(i.Z,{className:"video-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,cursor:"pointer"},onClick:e=>{e.stopPropagation(),A(e)}}),j&&(0,a.jsx)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:3},children:(0,a.jsx)(K.Z,{sx:{width:100,color:"white"}})}),(0,a.jsxs)(i.Z,{sx:{position:"absolute",top:8,left:8,right:8,display:"flex",justifyContent:"space-between",alignItems:"flex-start",zIndex:2},children:[(0,a.jsx)(G.Z,{label:"동영상",size:"small",sx:{backgroundColor:"rgba(233, 64, 87, 0.9)",color:"white",fontWeight:"bold",fontSize:"0.75rem"}}),t.file_size&&(0,a.jsx)(G.Z,{label:(e=>{if(!e)return"";let t=e/1048576;return t>=1?"".concat(t.toFixed(1),"MB"):"".concat((e/1024).toFixed(1),"KB")})(t.file_size),size:"small",sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",fontSize:"0.7rem"}})]}),!w&&!o&&(0,a.jsx)(i.Z,{className:"video-overlay",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2},children:(0,a.jsx)(b.Z,{onClick:A,sx:{color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},width:60,height:60},children:(0,a.jsx)(J.Z,{sx:{fontSize:40}})})}),(0,a.jsxs)(i.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%)",padding:"8px 12px",opacity:w||!o?1:0,transition:"opacity 0.3s ease",zIndex:2},children:[(0,a.jsx)(i.Z,{sx:{mb:1},children:(0,a.jsx)(Q.ZP,{value:p,max:x,onChange:(e,t)=>{e.stopPropagation();let r=Array.isArray(t)?t[0]:t;W.current&&(W.current.currentTime=r,g(r))},onClick:e=>e.stopPropagation(),sx:{color:"#e94057",height:4,"& .MuiSlider-thumb":{width:12,height:12,"&:hover":{boxShadow:"0px 0px 0px 8px rgba(233, 64, 87, 0.16)"}},"& .MuiSlider-rail":{backgroundColor:"rgba(255, 255, 255, 0.3)"}}})}),(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(b.Z,{onClick:A,size:"small",sx:{color:"white"},children:o?(0,a.jsx)(ee.Z,{sx:{fontSize:20}}):(0,a.jsx)(J.Z,{sx:{fontSize:20}})}),(0,a.jsx)(b.Z,{onClick:e=>{e.stopPropagation(),W.current&&(W.current.muted=!l,s(!l))},size:"small",sx:{color:"white"},children:l?(0,a.jsx)(er.Z,{sx:{fontSize:18}}):(0,a.jsx)(et.Z,{sx:{fontSize:18}})}),(0,a.jsx)(i.Z,{sx:{width:60,mx:1},children:(0,a.jsx)(Q.ZP,{value:l?0:f,max:1,step:.1,onChange:(e,t)=>{e.stopPropagation();let r=Array.isArray(t)?t[0]:t;W.current&&(W.current.volume=r,v(r),0===r?(s(!0),W.current.muted=!0):l&&(s(!1),W.current.muted=!1))},onClick:e=>e.stopPropagation(),sx:{color:"white",height:3,"& .MuiSlider-thumb":{width:8,height:8}}})}),(0,a.jsxs)(d.Z,{variant:"caption",sx:{color:"white",fontSize:"0.7rem",minWidth:"80px"},children:[M(p)," / ",M(x)]})]}),(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(d.Z,{variant:"caption",sx:{color:"white",backgroundColor:"rgba(0, 0, 0, 0.6)",padding:"2px 6px",borderRadius:"4px",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.7rem"},children:t.video_name}),(0,a.jsx)(b.Z,{onClick:e=>{if(e.stopPropagation(),document.fullscreenElement)document.exitFullscreen(),y(!1);else{var t;null===(t=P.current)||void 0===t||t.requestFullscreen(),y(!0)}},size:"small",sx:{color:"white"},children:k?(0,a.jsx)(eo.Z,{sx:{fontSize:18}}):(0,a.jsx)(ea.Z,{sx:{fontSize:18}})})]})]})]})]})});en.displayName="VideoCard";var ei=r(83879),el=r(16859),es=r(41327),ed=r(14087),ec=r(47087),eu=r(97404),ep=e=>{let{open:t,onClose:r,onSubmit:o,loading:l}=e,s=(0,n.Z)(),[c,b]=(0,m.useState)(""),[f,v]=(0,m.useState)(""),k=()=>{b(""),v(""),r()},y=async()=>{c&&(await o(c,f),k())};return(0,a.jsxs)(p.Z,{open:t,onClose:k,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"20px",background:"dark"===s.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.95) 0%, rgba(45, 48, 71, 0.98) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.99) 100%)",backdropFilter:"blur(12px)",border:"dark"===s.palette.mode?"2px solid rgba(239, 68, 68, 0.2)":"2px solid rgba(239, 68, 68, 0.15)",boxShadow:"dark"===s.palette.mode?"0 0 20px rgba(239, 68, 68, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 0 20px rgba(239, 68, 68, 0.1), 0 10px 30px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.7)",overflow:"hidden",overflowX:"hidden",position:"relative",maxWidth:{xs:"95vw",sm:"600px"},width:"100%","&::before":{content:'""',position:"absolute",top:"-1px",left:"-1px",right:"-1px",bottom:"-1px",background:"linear-gradient(45deg, #ef4444, #dc2626, #b91c1c, #ef4444)",borderRadius:"21px",opacity:.08,animation:"borderGlow 12s linear infinite",zIndex:-1},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #ef4444, #dc2626, #b91c1c)",opacity:.3,animation:"gradientShift 10s ease-in-out infinite"},"@keyframes gradientShift":{"0%":{background:"linear-gradient(90deg, #ef4444, #dc2626, #b91c1c)",filter:"hue-rotate(0deg)"},"50%":{background:"linear-gradient(90deg, #dc2626, #b91c1c, #ef4444)",filter:"hue-rotate(15deg)"},"100%":{background:"linear-gradient(90deg, #ef4444, #dc2626, #b91c1c)",filter:"hue-rotate(0deg)"}}}},children:[(0,a.jsxs)(g.Z,{sx:{color:"dark"===s.palette.mode?"#ffffff":"#1a1a2e",fontWeight:800,fontSize:"1.5rem",display:"flex",alignItems:"center",gap:1.5,textShadow:"dark"===s.palette.mode?"0 2px 4px rgba(0, 0, 0, 0.3)":"none",position:"relative",zIndex:2,pt:3},children:[(0,a.jsx)(i.Z,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:48,height:48,borderRadius:"12px",background:"dark"===s.palette.mode?"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.08), rgba(220, 38, 38, 0.05))",border:"dark"===s.palette.mode?"2px solid rgba(239, 68, 68, 0.25)":"2px solid rgba(239, 68, 68, 0.15)",boxShadow:"dark"===s.palette.mode?"0 0 10px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 0 10px rgba(239, 68, 68, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.6)"},children:(0,a.jsx)(C.Z,{sx:{color:"dark"===s.palette.mode?"#fca5a5":"#dc2626",fontSize:28,filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2))"}})}),"게시글 신고하기"]}),(0,a.jsxs)(x.Z,{sx:{position:"relative",zIndex:2,pt:2,overflowX:"hidden",width:"100%",boxSizing:"border-box"},children:[(0,a.jsx)(d.Z,{variant:"body1",sx:{color:"dark"===s.palette.mode?"#e2e8f0":"#374151",mb:3,lineHeight:1.6,wordBreak:"keep-all",overflowWrap:"break-word"},children:"이 게시글을 신고하는 이유를 선택해주세요. 신고는 신중하게 해주시기 바랍니다."}),(0,a.jsx)(es.Z,{component:"fieldset",fullWidth:!0,sx:{width:"100%",overflow:"hidden"},children:(0,a.jsx)(ed.Z,{value:c,onChange:e=>b(e.target.value),sx:{gap:1.5,width:"100%",overflow:"hidden"},children:[{value:"스팸/도배",icon:"\uD83D\uDEAB",color:"#f59e0b"},{value:"욕설/비방",icon:"\uD83D\uDE21",color:"#ef4444"},{value:"음란물/성적 콘텐츠",icon:"\uD83D\uDD1E",color:"#ec4899"},{value:"폭력적 콘텐츠",icon:"⚔️",color:"#dc2626"},{value:"허위 정보",icon:"\uD83D\uDEA8",color:"#f97316"},{value:"저작권 침해",icon:"\xa9️",color:"#8b5cf6"},{value:"개인정보 노출",icon:"\uD83D\uDD13",color:"#06b6d4"},{value:"기타",icon:"❓",color:"#6b7280"}].map(e=>(0,a.jsxs)(i.Z,{onClick:()=>b(e.value),sx:{position:"relative",borderRadius:"14px",p:{xs:2,sm:2.5},cursor:"pointer",transition:"all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)",width:"100%",maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",background:c===e.value?"dark"===s.palette.mode?"linear-gradient(135deg, ".concat(e.color,"20, ").concat(e.color,"10)"):"linear-gradient(135deg, ".concat(e.color,"15, ").concat(e.color,"08)"):"dark"===s.palette.mode?"linear-gradient(135deg, rgba(55, 65, 81, 0.4), rgba(75, 85, 99, 0.2))":"linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9))",border:c===e.value?"2px solid ".concat(e.color).concat("dark"===s.palette.mode?"60":"40"):"dark"===s.palette.mode?"2px solid rgba(75, 85, 99, 0.3)":"2px solid rgba(229, 231, 235, 0.6)",boxShadow:c===e.value?"dark"===s.palette.mode?"0 0 20px ".concat(e.color,"30, 0 4px 15px rgba(0, 0, 0, 0.2)"):"0 0 20px ".concat(e.color,"20, 0 4px 15px rgba(0, 0, 0, 0.1)"):"dark"===s.palette.mode?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.05)","&:hover":{transform:"translateY(-2px)",background:c===e.value?"dark"===s.palette.mode?"linear-gradient(135deg, ".concat(e.color,"30, ").concat(e.color,"15)"):"linear-gradient(135deg, ".concat(e.color,"20, ").concat(e.color,"10)"):"dark"===s.palette.mode?"linear-gradient(135deg, rgba(75, 85, 99, 0.5), rgba(107, 114, 128, 0.3))":"linear-gradient(135deg, rgba(249, 250, 251, 0.95), rgba(243, 244, 246, 0.8))",boxShadow:c===e.value?"dark"===s.palette.mode?"0 0 30px ".concat(e.color,"40, 0 8px 25px rgba(0, 0, 0, 0.3)"):"0 0 30px ".concat(e.color,"30, 0 8px 25px rgba(0, 0, 0, 0.15)"):"dark"===s.palette.mode?"0 4px 15px rgba(0, 0, 0, 0.4)":"0 4px 15px rgba(0, 0, 0, 0.1)"},"&:active":{transform:"translateY(-1px)"}},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,width:"100%",maxWidth:"100%",overflow:"hidden"},children:[(0,a.jsx)(ec.Z,{checked:c===e.value,value:e.value,sx:{color:"dark"===s.palette.mode?"#94a3b8":"#6b7280","&.Mui-checked":{color:e.color},"& .MuiSvgIcon-root":{fontSize:20}}}),(0,a.jsx)(i.Z,{sx:{fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"8px",background:c===e.value?"".concat(e.color,"20"):"dark"===s.palette.mode?"rgba(55, 65, 81, 0.5)":"rgba(243, 244, 246, 0.8)",transition:"all 0.3s ease"},children:e.icon}),(0,a.jsx)(d.Z,{variant:"body1",sx:{color:c===e.value?"dark"===s.palette.mode?"#ffffff":"#1f2937":"dark"===s.palette.mode?"#e2e8f0":"#374151",fontWeight:c===e.value?700:600,fontSize:"1rem",textShadow:c===e.value&&"dark"===s.palette.mode?"0 1px 2px rgba(0, 0, 0, 0.3)":"none",transition:"all 0.3s ease",flex:1,wordBreak:"keep-all",overflowWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis"},children:e.value})]}),c===e.value&&(0,a.jsx)(i.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"14px",background:"linear-gradient(45deg, transparent, ".concat(e.color,"10, transparent)"),animation:"shimmer 2s ease-in-out infinite",pointerEvents:"none","@keyframes shimmer":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(100%)"}}}})]},e.value))})}),"기타"===c&&(0,a.jsx)(eu.Z,{fullWidth:!0,multiline:!0,rows:3,label:"상세 사유를 입력해주세요",value:f,onChange:e=>v(e.target.value),sx:{mt:2,width:"100%",maxWidth:"100%",boxSizing:"border-box","& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:"dark"===s.palette.mode?"rgba(239, 68, 68, 0.05)":"rgba(255, 255, 255, 0.8)","& fieldset":{borderColor:"dark"===s.palette.mode?"rgba(239, 68, 68, 0.3)":"rgba(239, 68, 68, 0.2)"},"&:hover fieldset":{borderColor:"dark"===s.palette.mode?"rgba(239, 68, 68, 0.5)":"rgba(239, 68, 68, 0.4)"},"&.Mui-focused fieldset":{borderColor:"dark"===s.palette.mode?"#ef4444":"#dc2626"}},"& .MuiInputLabel-root":{color:"dark"===s.palette.mode?"#fca5a5":"#dc2626","&.Mui-focused":{color:"dark"===s.palette.mode?"#ef4444":"#dc2626"}},"& .MuiInputBase-input":{color:"dark"===s.palette.mode?"#e2e8f0":"#374151"}}})]}),(0,a.jsxs)(h.Z,{sx:{position:"relative",zIndex:2,px:{xs:2,sm:3},pb:3,gap:1.5,width:"100%",maxWidth:"100%",boxSizing:"border-box",overflow:"hidden",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[(0,a.jsx)(u.Z,{onClick:k,variant:"outlined",sx:{borderRadius:"12px",px:{xs:2,sm:3},py:1,borderColor:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",color:"dark"===s.palette.mode?"#e2e8f0":"#374151",minWidth:{xs:"80px",sm:"auto"},flex:{xs:1,sm:"none"},maxWidth:{xs:"48%",sm:"none"},"&:hover":{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}},children:"취소"}),(0,a.jsx)(u.Z,{onClick:y,variant:"contained",disabled:l||!c,startIcon:l?(0,a.jsx)(Z.Z,{size:20}):(0,a.jsx)(E.Z,{}),sx:{borderRadius:"12px",px:{xs:2,sm:3},py:1,fontWeight:600,position:"relative",overflow:"hidden",background:"linear-gradient(135deg, #ef4444, #dc2626, #b91c1c)",color:"white",transition:"all 0.3s ease",minWidth:{xs:"100px",sm:"auto"},flex:{xs:1,sm:"none"},maxWidth:{xs:"48%",sm:"none"},"&:hover":{background:"linear-gradient(135deg, #dc2626, #b91c1c, #991b1b)",transform:"translateY(-1px)",boxShadow:"dark"===s.palette.mode?"0 4px 15px rgba(239, 68, 68, 0.2)":"0 4px 15px rgba(239, 68, 68, 0.15)"},"&:disabled":{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.5), rgba(220, 38, 38, 0.5))",transform:"none",boxShadow:"none"}},children:l?"신고 중...":"신고하기"})]})]})},eg=r(9459),ex=r(4871),eh=r(11471),em=r(45662),eb=r(56162);function ef(e){var t,r,b,f;let{params:v}=e,{showMessage:k}=(0,B.U)(e=>e),y=(0,_.useRouter)(),{data:w}=(0,F.useSession)(),j=(0,P.NL)(),Z=(0,n.Z)(),C=(0,em.A)(),[I,z]=(0,m.useState)(!1),{openCloseComments:R}=(0,Y.x)(),[q,$]=(0,m.useState)(0),[X,K]=(0,m.useState)(!1),[G,Q]=(0,m.useState)(null),[J,ee]=(0,m.useState)(0),[et,er]=(0,m.useState)(!1),[ea,eo]=(0,m.useState)(null),[es,ed]=(0,m.useState)(""),[ec,eu]=(0,m.useState)(!1),{addRecentView:ef}=(0,eg.k)(),{currentChannelSlug:ev,currentPage:ek,stories:ey}=(0,ex.X)(),[ew,eS]=(0,m.useState)(!1),[ej,eZ]=(0,m.useState)(!1),[eC,eI]=(0,m.useState)(!1),[ez,eE]=(0,m.useState)(!1),{data:eW,isLoading:eP,isError:eD,error:eA}=(0,D.a)({queryKey:["story","detail",null==v?void 0:v.id],queryFn:async()=>(await M.Z.get("".concat("http://localhost:9999","/api/story/detail/").concat(null==v?void 0:v.id))).data,retry:1,retryDelay:()=>2e3,enabled:!!(null==v?void 0:v.id)&&!I,staleTime:24e4,gcTime:24e4}),{data:eM}=(0,D.a)({queryKey:["scrap","check",null==v?void 0:v.id],queryFn:async()=>(await M.Z.get("".concat("http://localhost:9999","/api/scrap/check/").concat(null==v?void 0:v.id),{withCredentials:!0})).data,enabled:!!(null==w?void 0:w.user)&&!!(null==v?void 0:v.id)&&!I,staleTime:12e4}),{data:eR}=(0,D.a)({queryKey:["channel","slug",null==v?void 0:v.slug],queryFn:()=>(0,eb.u3)(v.slug),enabled:!!(null==v?void 0:v.slug),staleTime:3e5});(0,m.useEffect)(()=>{eM&&eS(eM.isScraped)},[eM]),(0,m.useEffect)(()=>(null!=eW&&(document.title="".concat(eW.title),R(!0),$(eW.like_count+-eW.dislike_count),(null==w?void 0:w.user)&&ef({id:eW.id,title:eW.title,category:eW.category,created_at:eW.created_at,channelSlug:v.slug})),()=>{R(!1)}),[eW,w,ef]),(0,m.useEffect)(()=>{let e=()=>{let e=window.location.hash;if(e.startsWith("#comment-")){let t=e.replace("#comment-","");setTimeout(()=>{eL(t)},2e3)}};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]);let eL=e=>{let t=document.getElementById("comment-".concat(e));t?(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.backgroundColor="#fff3cd",t.style.border="2px solid #ffc107",setTimeout(()=>{t.style.backgroundColor="",t.style.border=""},3e3)):setTimeout(()=>{let t=document.getElementById("comment-".concat(e));t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.backgroundColor="#fff3cd",t.style.border="2px solid #ffc107",setTimeout(()=>{t.style.backgroundColor="",t.style.border=""},3e3))},3e3)};(0,m.useEffect)(()=>{if(eD&&!I){var e;M.Z.isAxiosError(eA)&&(null===(e=eA.response)||void 0===e?void 0:e.status)===404?y.replace("/not-found"):k("오류가 발생했습니다. 다시 시도해주세요.","error")}},[eD,eA,y,I]);let e_=(0,A.D)({mutationFn:async e=>await M.Z.delete("".concat("http://localhost:9999","/api/story/").concat(e),{withCredentials:!0}),onSuccess(){j.removeQueries({queryKey:["story","detail",null==v?void 0:v.id]}),z(!0),k("삭제 성공","success"),v.slug?y.push("/channels/".concat(v.slug)):y.push("/")},onError:e=>{e.response&&404===e.response.data.code?k("".concat(e.response.data.data),"error"):e.response&&401===e.response.data.code?k("".concat(e.response.data.data),"error"):k("삭제 중 오류가 발생했습니다.","error")}}),eT=(0,A.D)({mutationFn:async e=>"add"===e?await M.Z.post("".concat("http://localhost:9999","/api/scrap/").concat(null==v?void 0:v.id),{},{withCredentials:!0}):await M.Z.delete("".concat("http://localhost:9999","/api/scrap/").concat(null==v?void 0:v.id),{withCredentials:!0}),onMutate:()=>{eZ(!0)},onSuccess:(e,t)=>{eS("add"===t),j.invalidateQueries({queryKey:["scrap","check",null==v?void 0:v.id]}),k("add"===t?"스크랩되었습니다.":"스크랩이 취소되었습니다.","add"===t?"success":"info")},onError:e=>{var t,r;console.error("스크랩 API 호출 실패",e),k((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"스크랩 처리 중 오류가 발생했습니다.","error")},onSettled:()=>{eZ(!1)}}),eU=(0,A.D)({mutationFn:async e=>{let{storyId:t,vote:r}=e;return await M.Z.put("".concat("http://localhost:9999","/api/story/likeOrUnlike/").concat(t),{userId:null==w?void 0:w.user.id,vote:r,minRecommend:eh.jL},{withCredentials:!0})},onMutate:e=>({vote:e.vote}),onSuccess:(e,t)=>{let{action:r,vote:a}=e.data;switch(j.setQueryData(["story","detail",String(t.storyId)],e=>{if(!e)return e;let t=e.like_count,o=e.dislike_count;switch(r){case"add":"like"===a?t+=1:o+=1;break;case"remove":"like"===a?t-=1:o-=1;break;case"change":"like"===a?(t+=1,o-=1):(t-=1,o+=1)}return{...e,like_count:Math.max(0,t),dislike_count:Math.max(0,o)}}),r){case"add":k("".concat("like"===a?"추천":"비추천"," 했습니다."),"like"===a?"success":"error");break;case"remove":k("".concat("like"===a?"추천":"비추천","을 취소했습니다."),"info");break;case"change":k("".concat("like"===a?"추천":"비추천","으로 변경했습니다."),"like"===a?"success":"error")}},onError:e=>{console.error("좋아요 API 호출 실패"),k("추천 및 비추천에 실패했습니다. ".concat(e),"error")}}),[eF,eB]=(0,m.useState)(!1),[eY,eV]=(0,m.useState)(null),[eO,eq]=(0,m.useState)(!1),[e$,eX]=(0,m.useState)(null),eH=e=>{eV(e),eB(!0)},eN=e=>{eX(e),eq(!0)},eK=async()=>{null!==e$&&await C.deleteStory(e$,void 0,()=>{eX(null),eq(!1),z(!0),k("관리자 권한으로 게시글이 삭제되었습니다.","success"),v.slug?y.push("/channels/".concat(v.slug)):y.push("/")},e=>{k("관리자 삭제 실패: ".concat(e.message),"error")})},eG=()=>{eX(null),eq(!1)},eQ=(e,t)=>{Q(e),ee(t),er(!0)},eJ=(0,m.useMemo)(()=>{if(!(null==eW?void 0:eW.content)||!(null==eW?void 0:eW.StoryImage))return[];let e=[],t=eW.content.match(/<img[^>]*>/g);return t&&t.forEach(t=>{let r=t.match(/src="([^"]*)"/);if(r&&r[1]){var a;let t=r[1],o=null===(a=eW.StoryImage)||void 0===a?void 0:a.find(e=>{if(t.includes(e.link))return!0;let r=t.split("/").pop(),a=e.link.split("/").pop();return!!r&&!!a&&r===a});o&&!e.find(e=>e.id===o.id)&&e.push(o)}}),e},[null==eW?void 0:eW.content,null==eW?void 0:eW.StoryImage]);(0,m.useMemo)(()=>eW&&eW.StoryImage&&0!==eW.StoryImage.length?eW.StoryImage.map((e,t)=>{let r=t===eW.StoryImage.length-1&&eW.StoryImage.length%2!=0;return(0,a.jsx)(N.Z,{img:e,isLastOddImage:r,onClick:e=>eQ(e,t)},"".concat(e.id,"-").concat(t))}):null,[null==eW?void 0:eW.StoryImage]);let e0=(e,t)=>{e.preventDefault(),e.stopPropagation(),eo(e.currentTarget),ed(t)},e1=async(e,t)=>{if(!e){k("신고 사유를 선택해주세요.","warning");return}if("기타"===e&&!(null==t?void 0:t.trim())){k("기타 사유를 입력해주세요.","warning");return}eE(!0);try{let r=await M.Z.post("".concat("http://localhost:9999","/api/story/report/").concat(null==v?void 0:v.id),{reason:e,custom_reason:"기타"===e?t:void 0},{withCredentials:!0});201===r.status&&(k("신고가 접수되었습니다. 검토 후 적절한 조치를 취하겠습니다.","success"),eI(!1))}catch(e){var r,a,o,n,i;console.error("신고 실패:",e),(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)?k(e.response.data.message,"error"):(null===(o=e.response)||void 0===o?void 0:o.status)===400?k("이미 신고한 게시글입니다.","warning"):(null===(n=e.response)||void 0===n?void 0:n.status)===404?k("게시글을 찾을 수 없습니다.","error"):(null===(i=e.response)||void 0===i?void 0:i.status)===401?k("로그인이 필요합니다.","warning"):k("신고 처리 중 오류가 발생했습니다.","error")}finally{eE(!1)}};return eP?(0,a.jsx)(o.default,{}):eD?(0,a.jsx)(O.Z,{}):(0,a.jsxs)(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",sx:{padding:1,overflow:"hidden"},children:[eF&&(0,a.jsx)(V.Z,{open:eF,title:"글 삭제",description:"글을 삭제하시겠습니까? 삭제된 글은 복구할 수 없습니다.",onConfirm:()=>{null!==eY&&(e_.mutate(eY),eV(null),eB(!1))},onCancel:()=>{eV(null),eB(!1)},confirmText:"삭제",cancelText:"취소"}),eW&&(0,a.jsx)(l.Z,{sx:{width:"100%",boxShadow:4,padding:3,borderRadius:2,bgcolor:"background.paper"},children:(0,a.jsxs)(s.Z,{children:[(0,a.jsxs)(i.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,a.jsx)(d.Z,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:eW.title}),(0,a.jsx)(W,{currentUserId:null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.id,authorId:null===(r=eW.User)||void 0===r?void 0:r.id,category:eW.category,storyId:eW.id,isScraped:ew,scrapLoading:ej,onScrapClick:()=>{var e,t;if(!(null==w?void 0:w.user)){k("로그인이 필요합니다.","warning");return}if((null==eW?void 0:null===(e=eW.User)||void 0===e?void 0:e.id)===(null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.id)){k("자신이 작성한 글은 스크랩할 수 없습니다.","warning");return}eT.mutate(ew?"remove":"add")},onReportClick:()=>{var e,t;if(!(null==w?void 0:w.user)){k("로그인이 필요합니다.","warning");return}if((null==eW?void 0:null===(e=eW.User)||void 0===e?void 0:e.id)===(null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.id)){k("자신이 작성한 글은 신고할 수 없습니다.","warning");return}eI(!0)},editFlag:X,onEditClick:()=>{K(!0),y.push("/edit/story/".concat(eW.id))},onDeleteClick:()=>eH(eW.id),hasAdminPermission:C.hasAdminPermission({channelId:null==eR?void 0:eR.id,creatorId:null==eR?void 0:null===(b=eR.creator)||void 0===b?void 0:b.id}),adminLoading:C.isLoading,adminBadgeText:C.getAdminBadgeText({channelId:null==eR?void 0:eR.id,creatorId:null==eR?void 0:null===(f=eR.creator)||void 0===f?void 0:f.id}),onAdminDeleteClick:()=>eN(eW.id)})]}),(0,a.jsxs)(d.Z,{variant:"subtitle2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:1,bgcolor:"dark"===Z.palette.mode?"rgba(26, 26, 46, 0.8)":"grey.100",p:1,borderRadius:1,mb:3,border:"dark"===Z.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none",boxShadow:"dark"===Z.palette.mode?"0 0 10px rgba(139, 92, 246, 0.2)":"none"},children:[(0,a.jsx)(U.Z,{fontSize:"small"}),"종류: ",eW.category]}),(0,a.jsxs)(i.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,a.jsxs)(i.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,a.jsx)(c.Z,{src:"".concat("http://localhost:9999").concat(eW.User.avatar),sx:{width:50,height:50,boxShadow:2}}),(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)(d.Z,{variant:"subtitle1",sx:{fontWeight:"bold",cursor:"pointer"},onClick:e=>e0(e,eW.User.nickname),children:["작성자: ",eW.User.nickname]}),(0,a.jsx)(i.Z,{sx:{display:"flex",gap:1,mt:1},children:(0,a.jsx)(u.Z,{onClick:()=>{{let e=sessionStorage.getItem("previousMainPageUrl");if(e)try{let t=new URL(e),r=t.pathname+t.search;sessionStorage.removeItem("previousMainPageUrl"),y.push(r);return}catch(e){console.error("Invalid URL in session storage:",e)}}y.push("/")},size:"small",variant:"contained",sx:{backgroundColor:"#ff9800","&:hover":{backgroundColor:"#f57c00"}},children:"메인으로"})})]})]}),(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"dark"===Z.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.8), rgba(6, 182, 212, 0.8))":"linear-gradient(135deg, #FFE08A, #FFC547)",borderRadius:"12px",boxShadow:"dark"===Z.palette.mode?"0px 4px 15px rgba(139, 92, 246, 0.3)":"0px 4px 10px rgba(0, 0, 0, 0.2)",padding:"6px 12px",width:100,border:"dark"===Z.palette.mode?"1px solid rgba(139, 92, 246, 0.4)":"none"},children:[(0,a.jsx)(d.Z,{variant:"h6",sx:{fontWeight:"bold",color:"dark"===Z.palette.mode?"#ffffff":"#4A4A4A",textTransform:"none",fontSize:"16px",textShadow:"dark"===Z.palette.mode?"0 0 8px rgba(255, 255, 255, 0.3)":"none"},children:"추천"}),(0,a.jsx)(d.Z,{sx:{fontWeight:"bold",color:"dark"===Z.palette.mode?"#ffffff":"#4A4A4A",fontSize:"16px",textShadow:"dark"===Z.palette.mode?"0 0 8px rgba(255, 255, 255, 0.3)":"none"},children:q})]}),(0,a.jsxs)(i.Z,{textAlign:"right",children:[(0,a.jsxs)(d.Z,{variant:"subtitle2",color:"text.secondary",children:["작성일: ",L()(eW.created_at).format("YYYY/MM/DD HH:mm:ss")]}),(0,a.jsxs)(d.Z,{variant:"subtitle2",color:"text.secondary",children:["조회수: ",eW.read_count]})]})]}),(0,a.jsx)(i.Z,{sx:{bgcolor:"dark"===Z.palette.mode?"rgba(26, 26, 46, 0.6)":"grey.50",p:2,borderRadius:1,boxShadow:"dark"===Z.palette.mode?"0 0 15px rgba(139, 92, 246, 0.2)":1,mb:3,border:"dark"===Z.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"},children:(()=>{if(!(null==eW?void 0:eW.content))return null;let e=eW.content;eW.StoryImage&&eW.StoryImage.length>0&&(e=e.replace(/<img[^>]*src="blob:[^"]*"[^>]*>/g,e=>{let t=e.match(/alt="([^"]*)"/),r=e.match(/title="([^"]*)"/),a=(null==t?void 0:t[1])||(null==r?void 0:r[1]);if(a){let t=a.replace(/\.[^.]+$/,""),r=eW.StoryImage.find(e=>{let r=e.image_name.replace(/\.[^.]+$/,"");return r.includes(t)||t.includes(r)});if(r)return e.replace(/src="blob:[^"]*"/,'src="'.concat("http://localhost:9999").concat(r.link,'"'))}return""})),eW.StoryVideo&&eW.StoryVideo.length>0&&(e=(e=e.replace(/<source([^>]*)src="\/videoUpload\/([^"]+)"([^>]*)>/g,'<source$1src="'.concat("http://localhost:9999",'/videoUpload/$2"$3>'))).replace(/src="\/videoUpload\/([^"]+)"/g,'src="'.concat("http://localhost:9999",'/videoUpload/$1"')));let t=[],r=e.match(/<img[^>]*>/g);r&&r.forEach(e=>{let r=e.match(/src="([^"]*)"/);if(r&&r[1]){var a;let e=r[1],o=null===(a=eW.StoryImage)||void 0===a?void 0:a.find(t=>{var r;if(e.includes(t.link))return!0;let a=e.split("/").pop(),o=t.link.split("/").pop();if(a&&o&&a===o)return!0;let n=null==a?void 0:a.replace(/\.[^.]+$/,""),i=null===(r=t.image_name)||void 0===r?void 0:r.replace(/\.[^.]+$/,"");return!!(n&&i&&i.includes(n))});o&&!t.find(e=>e.id===o.id)&&t.push(o)}});let o=e.split(/(<img[^>]*>)/),n=[],l=[],s=()=>{0!==l.length&&(n.push((0,a.jsx)(i.Z,{sx:{my:3},children:(0,a.jsx)(i.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"center"},children:l.map((e,t)=>{let r=t===l.length-1&&l.length%2!=0;return(0,a.jsx)(N.Z,{img:e.img,isLastOddImage:r,onClick:t=>eQ(t,e.index),customWidth:e.customWidth,customMargin:e.customMargin},"image-".concat(e.img.id,"-").concat(e.originalIndex))})})},"image-group-".concat(n.length))),l=[])};return o.forEach((e,r)=>{if(e.match(/^<img[^>]*>$/)){let u=e.match(/src="([^"]*)"/);if(u&&u[1]){var o,d,c;let p=u[1],g=null===(o=eW.StoryImage)||void 0===o?void 0:o.find(e=>{var t;if(p.includes(e.link))return!0;let r=p.split("/").pop(),a=e.link.split("/").pop();if(r&&a&&r===a)return!0;let o=null==r?void 0:r.replace(/\.[^.]+$/,""),n=null===(t=e.image_name)||void 0===t?void 0:t.replace(/\.[^.]+$/,"");return!!(o&&n&&n.includes(o))});if(!g&&eW.StoryImage&&eW.StoryImage.length>0&&(g=eW.StoryImage[l.length%eW.StoryImage.length]),g){let a,o;let n=t.findIndex(e=>e.id===g.id),i=e.match(/style="([^"]*)"/);if(i&&i[1]){let e=i[1].split(";"),t=e.find(e=>{let t=e.trim();return t.startsWith("width:")&&!t.startsWith("max-width:")});if(t){let e=null===(d=t.split(":")[1])||void 0===d?void 0:d.trim();e&&(a=e)}let r=e.find(e=>e.trim().startsWith("margin:"));if(r){let e=null===(c=r.split(":")[1])||void 0===c?void 0:c.trim();e&&(o=e)}}l.push({img:g,index:n>=0?n:0,originalIndex:r,customWidth:a,customMargin:o})}else s(),n.push((0,a.jsx)(i.Z,{sx:{my:2,textAlign:"center"},children:(0,a.jsx)(i.Z,{component:"img",src:p,alt:"이미지",sx:{maxWidth:"100%",height:"auto",borderRadius:"8px",cursor:"pointer","&:hover":{opacity:.8,transform:"scale(1.02)"},transition:"all 0.2s ease"},onClick:()=>{eQ({id:Date.now(),image_name:p.split("/").pop()||"unknown",link:p.startsWith("http")?p.replace("http://localhost:9999",""):p,file_size:0,mime_type:"image/jpeg",upload_order:0,created_at:new Date().toISOString()},0)}})},"img-fallback-".concat(r)))}}else e.trim()&&(s(),n.push((0,a.jsx)(i.Z,{sx:{lineHeight:1.7,color:Z.palette.text.primary,"& img":{maxWidth:"100%",height:"auto",borderRadius:"8px",margin:"8px 0"},"& video":{maxWidth:"100%",height:"auto",borderRadius:"8px",margin:"8px 0"},"& ol, & ul":{paddingLeft:"24px",margin:"12px 0",listStylePosition:"outside"},"& ol":{listStyleType:"decimal"},"& ul":{listStyleType:"disc"},"& li":{margin:"6px 0",paddingLeft:"4px"}},dangerouslySetInnerHTML:{__html:e}},"text-".concat(r))))}),s(),n})()}),eW.StoryVideo&&eW.StoryVideo.length>0&&(0,a.jsxs)(i.Z,{sx:{mt:4},children:[(0,a.jsx)(d.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",color:"primary.main",mb:2},children:"첨부된 동영상:"}),(0,a.jsx)(i.Z,{sx:{display:"flex",flexDirection:"column",gap:2,justifyContent:"center"},children:eW.StoryVideo.map((e,t)=>(0,a.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:(0,a.jsx)(en,{video:e,isLastOddVideo:!0})},"video-".concat(e.id)))})]})]})}),eW&&(0,T.createPortal)((0,a.jsx)(H,{like:null==eW?void 0:eW.like_count,dislike:null==eW?void 0:eW.dislike_count,likeFunc:e=>{var t,r,a;if(!(null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.id)){k("로그인 해야합니다.","error");return}if((null==eW?void 0:null===(r=eW.User)||void 0===r?void 0:r.id)===(null==w?void 0:null===(a=w.user)||void 0===a?void 0:a.id)){k("자신이 작성한 글에는 추천/비추천을 할 수 없습니다.","warning");return}eU.mutate({storyId:null==eW?void 0:eW.id,vote:e})}}),document.body),(0,a.jsx)(S,{open:et,selectedImage:G,currentImageIndex:J,images:eJ||[],onClose:()=>{er(!1),Q(null)},onImageChange:e=>{ee(e),eJ&&eJ[e]&&Q(eJ[e])}}),(0,a.jsx)(ei.Z,{open:!!ea,anchorEl:ea,onClose:()=>{eo(null),ed("")},nickname:es,onSendMessage:()=>{eu(!0)}}),(0,a.jsx)(el.Z,{open:ec,onClose:()=>{eu(!1)},receiverNickname:es}),(0,a.jsx)(ep,{open:eC,onClose:()=>{eI(!1)},onSubmit:e1,loading:ez}),(0,a.jsxs)(p.Z,{open:eO,onClose:eG,"aria-labelledby":"admin-delete-dialog-title",children:[(0,a.jsxs)(g.Z,{id:"admin-delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:1,color:"error.main"},children:[(0,a.jsx)(E.Z,{}),"관리자 권한으로 게시글 삭제"]}),(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(d.Z,{variant:"body1",sx:{mb:2,color:"text.primary"},children:"부적절한 내용으로 판단되어 이 게시글을 삭제하시겠습니까?"}),eW&&(0,a.jsxs)(d.Z,{variant:"body2",sx:{p:2,bgcolor:"action.hover",borderRadius:1,maxWidth:"400px",wordBreak:"break-word",color:"text.primary",border:"1px solid",borderColor:"divider"},children:['"',eW.title,'"']}),(0,a.jsx)(d.Z,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:"⚠️ 이 작업은 되돌릴 수 없습니다. 관리자 권한으로 실행됩니다."})]}),(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(u.Z,{onClick:eG,color:"primary",children:"취소"}),(0,a.jsx)(u.Z,{onClick:eK,color:"error",variant:"contained",disabled:C.isLoading,children:C.isLoading?"삭제 중...":"관리자 삭제"})]})]})]})}},47990:function(e,t,r){"use strict";var a=r(83464);let o=a.Z.create({baseURL:"http://localhost:9999",withCredentials:!0});o.interceptors.request.use(e=>e,e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if("/api/auth/refresh"===r.url)return window.location.href="/login",Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;try{return await a.Z.post("".concat("http://localhost:9999","/api/auth/refresh"),{},{withCredentials:!0,headers:{"Content-Type":"application/json"}}),o(r)}catch(e){return window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),t.Z=o},56162:function(e,t,r){"use strict";r.d(t,{Bh:function(){return u},Ky:function(){return o},S0:function(){return s},b8:function(){return l},ec:function(){return d},mi:function(){return c},mr:function(){return n},u3:function(){return i},w4:function(){return p}});var a=r(83464);let o=async()=>(await a.Z.get("".concat("http://localhost:9999","/api/channels"),{withCredentials:!0})).data,n=async e=>(await a.Z.get("".concat("http://localhost:9999","/api/channels/").concat(e),{withCredentials:!0})).data,i=async e=>(await a.Z.get("".concat("http://localhost:9999","/api/channels/slug/").concat(e),{withCredentials:!0})).data,l=async e=>(await a.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{},{withCredentials:!0})).data,s=async e=>(await a.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{withCredentials:!0})).data,d=async()=>(await a.Z.get("".concat("http://localhost:9999","/api/channels/user/subscriptions"),{withCredentials:!0})).data,c=async(e,t)=>(await a.Z.post("".concat("http://localhost:9999","/api/channels/create"),{channelName:e,slug:t},{withCredentials:!0})).data,u=async(e,t)=>{let r=new FormData;return r.append("channelImage",t),(await a.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/upload-image"),r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},p=async e=>(await a.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/image"),{withCredentials:!0})).data},11471:function(e,t,r){"use strict";r.d(t,{D$:function(){return a},Tq:function(){return o},VI:function(){return l},bP:function(){return i},jL:function(){return n},oi:function(){return s}});let a=6,o=6,n=1,i=6,l=6,s=5},45662:function(e,t,r){"use strict";r.d(t,{A:function(){return s}});var a=r(2265),o=r(80605),n=r(47990);let i={forceDeleteStory:async e=>(await n.Z.delete("/api/story/admin/force-delete/".concat(e))).data,channelAdminDeleteStory:async e=>(await n.Z.delete("/api/story/admin/channel-delete/".concat(e))).data,batchDeleteStories:async e=>(await n.Z.delete("/api/story/admin/batch-delete",{data:{storyIds:e}})).data};var l={utils:{deleteByPermission:async(e,t,r)=>{if(r.isSuperAdmin){if("story"===e)return i.forceDeleteStory(t);throw Error("댓글 삭제는 일반 삭제 함수를 사용하세요.")}if(r.isChannelAdmin){if("story"===e)return i.channelAdminDeleteStory(t);throw Error("댓글 삭제는 일반 삭제 함수를 사용하세요.")}throw Error("관리자 권한이 없습니다.")},batchDeleteByPermission:async(e,t,r)=>{if(!r.isSuperAdmin)throw Error("일괄 삭제는 총 관리자만 가능합니다.");if("story"===e)return i.batchDeleteStories(t);throw Error("댓글 일괄 삭제는 지원되지 않습니다.")}}};let s=()=>{let{data:e}=(0,o.useSession)(),[t,r]=(0,a.useState)(!1),n=(null==e?void 0:e.user)||null,i=()=>(null==n?void 0:n.is_super_admin)===!0,s=(0,a.useCallback)(e=>!!n&&"number"!=typeof e&&((null==e?void 0:e.creatorId)?n.id===e.creatorId:((null==e?void 0:e.channelId)||null!=e&&e.channelSlug,!1)),[n]),d=(0,a.useCallback)(e=>i()||s(e),[s]),c=e=>{let t=i(),r=s(e);return{isSuperAdmin:t,isChannelAdmin:r,hasAnyAdminPermission:t||r}},u=async(e,t,a,o)=>{try{r(!0);let o=c(t);if(!o.hasAnyAdminPermission)throw Error("관리자 권한이 없습니다.");await l.utils.deleteByPermission("story",e,o),null==a||a()}catch(t){let e=t instanceof Error?t:Error("알 수 없는 오류가 발생했습니다.");null==o||o(e)}finally{r(!1)}},p=async(e,t,a,o)=>{try{r(!0);let o=c();if(!o.isSuperAdmin)throw Error("일괄 삭제는 총 관리자만 가능합니다.");let n=await l.utils.batchDeleteByPermission(e,t,o);null==a||a(n.deletedCount)}catch(t){let e=t instanceof Error?t:Error("알 수 없는 오류가 발생했습니다.");null==o||o(e)}finally{r(!1)}};return{isSuperAdmin:i(),isChannelAdmin:s,hasAdminPermission:d,getAdminPermission:c,currentUser:n,getAdminBadgeText:e=>i()?"총관리자":s(e)?"채널관리자":"",getAdminBadgeColor:e=>i()?"error":s(e)?"warning":"default",deleteStory:u,batchDelete:p,isLoading:t}}},4871:function(e,t,r){"use strict";r.d(t,{X:function(){return n}});var a=r(3011),o=r(89134);let n=(0,a.U)()((0,o.tJ)((e,t)=>({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1,setChannelPageData:(t,r,a,o)=>{e({currentChannelSlug:t,currentPage:r,currentCategory:a,stories:o,isLoading:!1})},clearChannelPageData:()=>{e({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1})},updateStory:(r,a)=>{let{stories:o}=t();e({stories:o.map(e=>e.id===r?{...e,...a}:e)})}}),{name:"channel-page-storage",partialize:e=>({currentChannelSlug:e.currentChannelSlug,currentPage:e.currentPage,currentCategory:e.currentCategory,stories:e.stories})}))},35574:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});let a=(0,r(3011).U)(e=>({isCommentOpen:!1,openCloseComments:t=>e({isCommentOpen:t})}))},9459:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});var a=r(3011),o=r(89134);let n=(0,a.U)()((0,o.tJ)((e,t)=>({recentViews:[],addRecentView:r=>{let a=t().recentViews,o=new Date().toISOString(),n=a.findIndex(e=>e.id===r.id);if(-1!==n){let t=[...a];t.splice(n,1),t.unshift({...r,viewedAt:o}),e({recentViews:t})}else{let t=[{...r,viewedAt:o},...a];t.length>30&&t.splice(30),e({recentViews:t})}},clearRecentViews:()=>e({recentViews:[]})}),{name:"recent-views-storage"}))}},function(e){e.O(0,[5152,4419,1991,1547,6593,455,2472,7404,9631,605,7037,6931,5679,1256,7571,64,670,4241,7674,2971,2117,1744],function(){return e(e.s=13171)}),_N_E=e.O()}]);