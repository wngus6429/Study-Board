(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7920],{56256:function(e,t,o){Promise.resolve().then(o.bind(o,73380))},26484:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew")},41761:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},59103:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")},92495:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Mail")},72549:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},88164:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},16701:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)([(0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,n.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn")},62016:function(e,t,o){"use strict";var r=o(94630),n=o(57437);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut")},45841:function(e,t,o){"use strict";o.d(t,{Z:function(){return p}});var r=o(2265),n=o(61994),a=o(20801),i=o(16210),s=o(37053),l=o(94143),c=o(50738);function d(e){return(0,c.ZP)("MuiCardMedia",e)}(0,l.Z)("MuiCardMedia",["root","media","img"]);var u=o(57437);let g=e=>{let{classes:t,isMediaComponent:o,isImageComponent:r}=e;return(0,a.Z)({root:["root",o&&"media",r&&"img"]},d,t)},h=(0,i.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:o}=e,{isMediaComponent:r,isImageComponent:n}=o;return[t.root,r&&t.media,n&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),x=["video","audio","picture","iframe","img"],m=["picture","img"];var p=r.forwardRef(function(e,t){let o=(0,s.i)({props:e,name:"MuiCardMedia"}),{children:r,className:a,component:i="div",image:l,src:c,style:d,...p}=o,b=x.includes(i),f=!b&&l?{backgroundImage:'url("'.concat(l,'")'),...d}:d,v={...o,component:i,isMediaComponent:b,isImageComponent:m.includes(i)},Z=g(v);return(0,u.jsx)(h,{className:(0,n.Z)(Z.root,a),as:i,role:!b&&l?"img":void 0,ref:t,style:f,ownerState:v,src:b?l||c:void 0,...p,children:r})})},73380:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return O}});var r=o(57437),n=o(94623),a=o(31691),i=o(2069),s=o(46387),l=o(67208),c=o(36137),d=o(67116),u=o(91991),g=o(53392),h=o(59832),x=o(24902),m=o(29827),p=o(16593),b=o(21770),f=o(83464),v=o(71096),Z=o.n(v),y=o(99376),j=o(2265),C=o(59103),k=o(80605),S=o(30419),I=o(35574),w=o(57507),M=o(71204),_=o(42082),z=o(8430),L=o(26484),R=o(41761),E=o(16701),H=o(62016),V=o(83879),A=o(16859),P=o(9459),U=o(44304),D=o(27648);function O(e){let{params:t}=e,{showMessage:o}=(0,S.U)(e=>e),v=(0,y.useRouter)(),{data:O}=(0,k.useSession)(),W=(0,m.NL)(),N=(0,a.Z)(),[T,B]=(0,j.useState)(!1),{openCloseComments:F}=(0,I.x)(),[q,Y]=(0,j.useState)(!1),[G,K]=(0,j.useState)(null),[J,Q]=(0,j.useState)(0),[X,$]=(0,j.useState)(!1),[ee,et]=(0,j.useState)(1),[eo,er]=(0,j.useState)({x:0,y:0}),[en,ea]=(0,j.useState)(!1),[ei,es]=(0,j.useState)({x:0,y:0}),[el,ec]=(0,j.useState)(null),[ed,eu]=(0,j.useState)(""),[eg,eh]=(0,j.useState)(!1),{addRecentView:ex}=(0,P.k)(),{data:em,isLoading:ep,isError:eb,error:ef}=(0,p.a)({queryKey:["story","notice",null==t?void 0:t.id],queryFn:async()=>(await f.Z.get("".concat("http://localhost:9999","/api/story/notice/").concat(null==t?void 0:t.id))).data,retry:1,retryDelay:()=>2e3,enabled:!!(null==t?void 0:t.id)&&!T,staleTime:24e4,gcTime:24e4});(0,j.useEffect)(()=>(null!=em&&(document.title="".concat(em.title),F(!0),(null==O?void 0:O.user)&&ex({id:em.id,title:em.title,category:"notice",created_at:em.created_at,channelSlug:"notice"})),()=>{F(!1)}),[em,O,ex]),(0,j.useEffect)(()=>{if(eb&&!T){var e;f.Z.isAxiosError(ef)&&(null===(e=ef.response)||void 0===e?void 0:e.status)===404?v.replace("/not-found"):o("오류가 발생했습니다. 다시 시도해주세요.","error")}},[eb,ef,v,T]);let ev=(0,b.D)({mutationFn:async e=>await f.Z.delete("".concat("http://localhost:9999","/api/story/").concat(e),{withCredentials:!0}),onSuccess(){W.removeQueries({queryKey:["story","notice",null==t?void 0:t.id]}),B(!0),o("삭제 성공","success"),v.push("/")},onError:e=>{e.response&&404===e.response.data.code?o("".concat(e.response.data.data),"error"):e.response&&401===e.response.data.code?o("".concat(e.response.data.data),"error"):o("삭제 중 오류가 발생했습니다.","error")}}),[eZ,ey]=(0,j.useState)(!1),[ej,eC]=(0,j.useState)(null),ek=(e,t)=>{K(e),Q(t),$(!0),et(1),er({x:0,y:0})},eS=()=>{$(!1),K(null),et(1),er({x:0,y:0}),ea(!1)},eI=()=>{ec(null),eu("")};return ep?(0,r.jsx)(n.default,{}):eb?(0,r.jsx)(M.Z,{}):(0,r.jsxs)(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",sx:{padding:2,overflow:"hidden"},children:[eZ&&(0,r.jsx)(w.Z,{open:eZ,title:"공지사항 삭제",description:"이 공지사항을 삭제하시겠습니까? 삭제된 공지사항은 복구할 수 없습니다.",onConfirm:()=>{null!==ej&&(ev.mutate(ej),eC(null),ey(!1))},onCancel:()=>{eC(null),ey(!1)},confirmText:"삭제",cancelText:"취소"}),em&&(0,r.jsx)(l.Z,{sx:{width:"100%",boxShadow:4,padding:3,borderRadius:2,bgcolor:"background.paper"},children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(i.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:(0,r.jsx)(s.Z,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:em.title})}),(0,r.jsxs)(s.Z,{variant:"subtitle2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:1,bgcolor:"dark"===N.palette.mode?"rgba(26, 26, 46, 0.8)":"grey.100",p:1,borderRadius:1,mb:3,border:"dark"===N.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none",boxShadow:"dark"===N.palette.mode?"0 0 10px rgba(139, 92, 246, 0.2)":"none"},children:[(0,r.jsx)(C.Z,{fontSize:"small"}),"종류: 공지사항"]}),(0,r.jsxs)(i.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,r.jsxs)(i.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,r.jsx)(d.Z,{src:"".concat("http://localhost:9999").concat(em.User.avatar),sx:{width:50,height:50,boxShadow:2}}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.Z,{variant:"subtitle1",sx:{fontWeight:"bold",cursor:"pointer"},children:(0,r.jsxs)(D.default,{href:"/profile/".concat(encodeURIComponent(em.User.nickname)),passHref:!0,children:["작성자: ",em.User.nickname]})}),(0,r.jsxs)(i.Z,{sx:{display:"flex",gap:1,mt:1},children:[(0,r.jsx)(u.Z,{onClick:()=>v.back(),size:"small",variant:"contained",color:"primary",children:"뒤로가기"}),(0,r.jsx)(u.Z,{onClick:()=>{{let e=sessionStorage.getItem("previousMainPageUrl");if(e)try{let t=new URL(e),o=t.pathname+t.search;sessionStorage.removeItem("previousMainPageUrl"),v.push(o);return}catch(e){console.error("Invalid URL in session storage:",e)}}v.push("/")},size:"small",variant:"contained",sx:{backgroundColor:"#ff9800","&:hover":{backgroundColor:"#f57c00"}},children:"메인으로"})]})]})]}),(0,r.jsxs)(i.Z,{textAlign:"right",children:[(0,r.jsxs)(s.Z,{variant:"subtitle2",color:"text.secondary",children:["작성일: ",Z()(em.created_at).format("YYYY/MM/DD HH:mm:ss")]}),(0,r.jsxs)(s.Z,{variant:"subtitle2",color:"text.secondary",children:["조회수: ",em.read_count]})]})]}),(0,r.jsx)(i.Z,{sx:{lineHeight:1.7,bgcolor:"dark"===N.palette.mode?"rgba(26, 26, 46, 0.6)":"grey.50",p:2,borderRadius:1,boxShadow:"dark"===N.palette.mode?"0 0 15px rgba(139, 92, 246, 0.2)":1,mb:3,border:"dark"===N.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"},children:(()=>{let e;if(!(null==em?void 0:em.content))return null;let t=/<img[^>]*src="([^"]*)"[^>]*>/g,o=[];for(;null!==(e=t.exec(em.content));){let t=e[0],r=e[1],n=t.match(/style="([^"]*)"/),a=n?n[1]:void 0;o.push({src:r,style:a})}let n=em.content,a=0,l=(n=n.replace(t,()=>"__IMAGE_PLACEHOLDER_".concat(a++,"__"))).split(/(__IMAGE_PLACEHOLDER_\d+__)/);return(0,r.jsx)(i.Z,{children:l.map((e,t)=>{if(!e.startsWith("__IMAGE_PLACEHOLDER_"))return(0,r.jsx)(s.Z,{component:"div",sx:{lineHeight:1.8,fontSize:"1rem","& p":{marginBottom:1},"& h1, & h2, & h3, & h4, & h5, & h6":{marginTop:2,marginBottom:1,fontWeight:"bold"},"& ul, & ol":{paddingLeft:2,marginBottom:1},"& li":{marginBottom:.5},"& blockquote":{borderLeft:"4px solid #ddd",paddingLeft:2,margin:"1rem 0",fontStyle:"italic"},"& code":{backgroundColor:"dark"===N.palette.mode?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",padding:"2px 4px",borderRadius:"4px",fontSize:"0.9em"},"& pre":{backgroundColor:"dark"===N.palette.mode?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",padding:2,borderRadius:1,overflow:"auto","& code":{backgroundColor:"transparent",padding:0}}},dangerouslySetInnerHTML:{__html:e}},t);{var n,a;let t=parseInt((null===(n=e.match(/\d+/))||void 0===n?void 0:n[0])||"0"),s=null===(a=em.StoryImage)||void 0===a?void 0:a[t],l=o[t];if(s){let e;if(null==l?void 0:l.style){let t=l.style.match(/width:\s*([^;]+)/);if(t){let o=t[1].trim();o.includes("px")&&!o.includes("max-width")&&(e=o)}}return(0,r.jsx)(i.Z,{sx:{my:2,display:"flex",justifyContent:"center"},children:(0,r.jsx)(_.Z,{img:s,customWidth:e,onClick:()=>ek(s,t),isLastOddImage:!1})},"image-".concat(t))}return null}})})})()}),(0,r.jsx)(i.Z,{sx:{mt:4},children:(0,r.jsx)(U.Z,{})})]})}),(0,r.jsx)(g.Z,{open:X,onClose:eS,maxWidth:!1,fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"rgba(0, 0, 0, 0.9)",maxWidth:"95vw",maxHeight:"95vh",margin:1}},children:(0,r.jsxs)(i.Z,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80vh",backgroundColor:"transparent"},children:[(0,r.jsx)(h.Z,{onClick:eS,sx:{position:"absolute",top:8,right:8,color:"white",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(z.Z,{})}),em&&em.StoryImage&&em.StoryImage.length>1&&J>0&&(0,r.jsx)(h.Z,{onClick:()=>{if(J>0){var e;let t=J-1;Q(t),K((null==em?void 0:null===(e=em.StoryImage)||void 0===e?void 0:e[t])||null),et(1),er({x:0,y:0})}},sx:{position:"absolute",left:16,color:"white",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(L.Z,{})}),em&&em.StoryImage&&em.StoryImage.length>1&&J<em.StoryImage.length-1&&(0,r.jsx)(h.Z,{onClick:()=>{if(em&&em.StoryImage&&J<em.StoryImage.length-1){let e=J+1;Q(e),K(em.StoryImage[e]),et(1),er({x:0,y:0})}},sx:{position:"absolute",right:16,color:"white",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(R.Z,{})}),(0,r.jsxs)(i.Z,{sx:{position:"absolute",bottom:16,left:16,display:"flex",gap:1,zIndex:2},children:[(0,r.jsx)(x.Z,{title:"축소",children:(0,r.jsx)(h.Z,{onClick:()=>{et(e=>Math.max(e-.5,.5))},sx:{color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(H.Z,{})})}),(0,r.jsx)(x.Z,{title:"확대",children:(0,r.jsx)(h.Z,{onClick:()=>{et(e=>Math.min(e+.5,3))},sx:{color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,r.jsx)(E.Z,{})})})]}),G&&(0,r.jsx)(i.Z,{component:"img",src:"".concat("http://localhost:9999").concat(G.link),alt:G.image_name,sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",transform:"scale(".concat(ee,") translate(").concat(eo.x,"px, ").concat(eo.y,"px)"),cursor:ee>1?en?"grabbing":"grab":"default",transition:en?"none":"transform 0.2s ease"}}),G&&(0,r.jsx)(i.Z,{sx:{position:"absolute",bottom:16,right:16,color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:1,borderRadius:1,fontSize:"0.875rem",zIndex:2},children:em&&em.StoryImage&&em.StoryImage.length>1?"".concat(J+1," / ").concat(em.StoryImage.length):"1 / 1"})]})}),(0,r.jsx)(V.Z,{anchorEl:el,open:!!el,onClose:eI,nickname:ed,onSendMessage:()=>{eh(!0),eI()}}),(0,r.jsx)(A.Z,{open:eg,onClose:()=>{eh(!1)},receiverNickname:ed})]})}},9459:function(e,t,o){"use strict";o.d(t,{k:function(){return a}});var r=o(3011),n=o(89134);let a=(0,r.U)()((0,n.tJ)((e,t)=>({recentViews:[],addRecentView:o=>{let r=t().recentViews,n=new Date().toISOString(),a=r.findIndex(e=>e.id===o.id);if(-1!==a){let t=[...r];t.splice(a,1),t.unshift({...o,viewedAt:n}),e({recentViews:t})}else{let t=[{...o,viewedAt:n},...r];t.length>30&&t.splice(30),e({recentViews:t})}},clearRecentViews:()=>e({recentViews:[]})}),{name:"recent-views-storage"}))}},function(e){e.O(0,[5152,4419,1991,1547,6593,455,2472,7404,9631,605,7037,6931,5679,1256,6476,64,670,8666,7674,9731,2971,2117,1744],function(){return e(e.s=56256)}),_N_E=e.O()}]);