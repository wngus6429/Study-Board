(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6328],{11746:function(e,t,n){Promise.resolve().then(n.bind(n,91762))},26484:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew")},41761:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},76672:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},54862:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},63329:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 12h-2v-2h2zm0-4h-2V6h2z"}),"Feedback")},59103:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")},92495:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Mail")},72549:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},88164:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},16701:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)([(0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,o.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn")},62016:function(e,t,n){"use strict";var r=n(94630),o=n(57437);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut")},45841:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(2265),o=n(61994),i=n(20801),a=n(16210),l=n(37053),s=n(94143),c=n(50738);function d(e){return(0,c.ZP)("MuiCardMedia",e)}(0,s.Z)("MuiCardMedia",["root","media","img"]);var u=n(57437);let g=e=>{let{classes:t,isMediaComponent:n,isImageComponent:r}=e;return(0,i.Z)({root:["root",n&&"media",r&&"img"]},d,t)},x=(0,a.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e,{isMediaComponent:r,isImageComponent:o}=n;return[t.root,r&&t.media,o&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),m=["video","audio","picture","iframe","img"],p=["picture","img"];var h=r.forwardRef(function(e,t){let n=(0,l.i)({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:a="div",image:s,src:c,style:d,...h}=n,f=m.includes(a),b=!f&&s?{backgroundImage:'url("'.concat(s,'")'),...d}:d,v={...n,component:a,isMediaComponent:f,isImageComponent:p.includes(a)},Z=g(v);return(0,u.jsx)(x,{className:(0,o.Z)(Z.root,i),as:a,role:!f&&s?"img":void 0,ref:t,style:b,ownerState:v,src:f?s||c:void 0,...h,children:r})})},12258:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(2265),o=n(61994),i=n(20801),a=n(34765),l=n(16210),s=n(37053),c=n(46387),d=n(94143),u=n(50738);function g(e){return(0,u.ZP)("MuiDialogContentText",e)}(0,d.Z)("MuiDialogContentText",["root"]);var x=n(57437);let m=e=>{let{classes:t}=e,n=(0,i.Z)({root:["root"]},g,t);return{...t,...n}},p=(0,l.ZP)(c.Z,{shouldForwardProp:e=>(0,a.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var h=r.forwardRef(function(e,t){let n=(0,s.i)({props:e,name:"MuiDialogContentText"}),{children:r,className:i,...a}=n,l=m(a);return(0,x.jsx)(p,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:a,className:(0,o.Z)(l.root,i),...n,classes:l})})},53431:function(e,t,n){"use strict";var r=n(2265),o=n(61994),i=n(20801),a=n(16210),l=n(21086),s=n(37053),c=n(67752),d=n(15566),u=n(57437);let g=e=>{let{alignItems:t,classes:n}=e;return(0,i.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},c.f,n)},x=(0,a.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((0,l.Z)(e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}})),m=r.forwardRef(function(e,t){let n=(0,s.i)({props:e,name:"MuiListItemIcon"}),{className:i,...a}=n,l=r.useContext(d.Z),c={...n,alignItems:l.alignItems},m=g(c);return(0,u.jsx)(x,{className:(0,o.Z)(m.root,i),ownerState:c,ref:t,...a})});t.Z=m},91762:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(57437),o=n(94623),i=n(31691),a=n(2069),l=n(67208),s=n(36137),c=n(91991),d=n(46387),u=n(67571),g=n(67116),x=n(53392),m=n(59832),p=n(29827),h=n(16593),f=n(21770),b=n(83464),v=n(71096),Z=n.n(v),j=n(99376),S=n(2265),k=n(80605),y=n(30419),I=n(57507),C=n(71204),M=n(42082),w=n(59103),z=n(63329),W=n(72549),L=n(94630),D=(0,L.Z)([(0,r.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,r.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),H=(0,L.Z)((0,r.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8z"}),"Update"),_=(0,L.Z)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),R=n(54862),T=n(76672),E=n(8430),P=n(26484),F=n(41761),O=n(16701),V=n(62016),Y=n(83879),N=n(16859);function A(e){var t,n;let{params:v}=e,{showMessage:L}=(0,y.U)(e=>e),A=(0,j.useRouter)(),{data:U}=(0,k.useSession)(),$=(0,p.NL)(),B=(0,i.Z)(),[q,K]=(0,S.useState)(!1),[X,Q]=(0,S.useState)(null),[G,J]=(0,S.useState)(0),[ee,et]=(0,S.useState)(!1),[en,er]=(0,S.useState)(1),[eo,ei]=(0,S.useState)({x:0,y:0}),[ea,el]=(0,S.useState)(!1),[es,ec]=(0,S.useState)({x:0,y:0}),[ed,eu]=(0,S.useState)(null),[eg,ex]=(0,S.useState)(""),[em,ep]=(0,S.useState)(!1),[eh,ef]=(0,S.useState)(!1),[eb,ev]=(0,S.useState)(!1),{data:eZ,isLoading:ej,isError:eS,error:ek}=(0,h.a)({queryKey:["suggestion","detail",null==v?void 0:v.id],queryFn:async()=>(await b.Z.get("".concat("http://localhost:9999","/api/suggestion/detail/").concat(null==v?void 0:v.id),{withCredentials:!0})).data,retry:1,retryDelay:()=>2e3,enabled:!!(null==v?void 0:v.id)&&!q,staleTime:24e4,gcTime:24e4});(0,S.useEffect)(()=>{eZ&&(document.title="".concat(eZ.title))},[eZ]),(0,S.useEffect)(()=>{if(eS&&!q){var e;b.Z.isAxiosError(ek)&&(null===(e=ek.response)||void 0===e?void 0:e.status)===404?A.replace("/not-found"):L("오류가 발생했습니다. 다시 시도해주세요.","error")}},[eS,ek,A,q]);let ey=(0,f.D)({mutationFn:async e=>await b.Z.delete("".concat("http://localhost:9999","/api/suggestion/").concat(e),{withCredentials:!0}),onSuccess(){$.removeQueries({queryKey:["suggestion","detail",null==v?void 0:v.id]}),K(!0),L("삭제 성공","success"),A.push("/")},onError:e=>{e.response&&404===e.response.data.code?L("".concat(e.response.data.data),"error"):e.response&&401===e.response.data.code?L("".concat(e.response.data.data),"error"):L("삭제 중 오류가 발생했습니다.","error")}}),[eI,eC]=(0,S.useState)(!1),[eM,ew]=(0,S.useState)(null),ez=e=>{ew(e),eC(!0)},eW=(e,t)=>{Q(e),J(t),et(!0),er(1),ei({x:0,y:0})},eL=()=>{et(!1),Q(null),er(1),ei({x:0,y:0})},eD=(e,t)=>{eu(e.currentTarget),ex(t)},eH=()=>{eu(null)},e_=(0,S.useMemo)(()=>eZ&&eZ.SuggestionImage&&0!==eZ.SuggestionImage.length?eZ.SuggestionImage.map((e,t)=>{let n=t===eZ.SuggestionImage.length-1&&eZ.SuggestionImage.length%2!=0;return(0,r.jsx)(M.Z,{img:e,isLastOddImage:n,onClick:e=>eW(e,t)},"".concat(e.id,"-").concat(t))}):null,[null==eZ?void 0:eZ.SuggestionImage]);return ej?(0,r.jsx)(o.default,{}):eS?(0,r.jsx)(C.Z,{}):(0,r.jsxs)(a.Z,{sx:{minHeight:"100vh",background:"dark"===B.palette.mode?"linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 50%, rgba(51, 65, 85, 0.95) 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%)",py:4,px:2},children:[eI&&(0,r.jsx)(I.Z,{open:eI,title:"건의사항 삭제",description:"이 건의사항을 삭제하시겠습니까? 삭제된 건의사항은 복구할 수 없습니다.",onConfirm:()=>{null!==eM&&(ey.mutate(eM),ew(null),eC(!1))},onCancel:()=>{ew(null),eC(!1)},confirmText:"삭제",cancelText:"취소"}),eZ&&(0,r.jsx)(a.Z,{sx:{maxWidth:"1200px",margin:"0 auto"},children:(0,r.jsx)(l.Z,{sx:{width:"100%",boxShadow:4,padding:3,borderRadius:2,bgcolor:"background.paper"},children:(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(a.Z,{sx:{mb:2,display:"flex",gap:1},children:[(0,r.jsx)(c.Z,{onClick:()=>A.back(),startIcon:(0,r.jsx)(_,{}),variant:"outlined",size:"small",sx:{borderColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.5)":"rgba(139, 92, 246, 0.3)",color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed","&:hover":{borderColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.8)":"rgba(139, 92, 246, 0.5)",background:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)"}},children:"뒤로가기"}),(0,r.jsx)(c.Z,{onClick:()=>{A.push("/")},size:"small",variant:"contained",sx:{backgroundColor:"#ff9800","&:hover":{backgroundColor:"#f57c00"}},children:"메인으로"})]}),(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3,children:[(0,r.jsxs)(a.Z,{flex:1,mr:3,children:[(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,r.jsx)(z.Z,{sx:{fontSize:32,color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed"}}),(0,r.jsx)(d.Z,{variant:"h3",component:"h1",sx:{fontWeight:"bold",background:"dark"===B.palette.mode?"linear-gradient(135deg, #8b5cf6, #06b6d4)":"linear-gradient(135deg, #7c3aed, #0891b2)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:eZ.title})]}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(w.Z,{}),label:"카테고리: ".concat(eZ.category),variant:"outlined",sx:{borderColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.5)":"rgba(139, 92, 246, 0.3)",color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed",backgroundColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)",fontWeight:600,"& .MuiChip-icon":{color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed"}}})]}),(null==eZ?void 0:null===(t=eZ.User)||void 0===t?void 0:t.id)===(null==U?void 0:null===(n=U.user)||void 0===n?void 0:n.id)&&(0,r.jsxs)(a.Z,{display:"flex",gap:1.5,children:[(0,r.jsx)(c.Z,{variant:"outlined",color:"warning",startIcon:(0,r.jsx)(R.Z,{}),onClick:e=>{e.preventDefault(),A.push("/edit/suggestion/".concat(eZ.id))},sx:{borderRadius:3,px:3,fontWeight:600,textTransform:"none"},children:"수정"}),(0,r.jsx)(c.Z,{variant:"outlined",color:"error",startIcon:(0,r.jsx)(T.Z,{}),onClick:e=>{e.preventDefault(),ez(eZ.id)},sx:{borderRadius:3,px:3,fontWeight:600,textTransform:"none"},children:"삭제"})]})]}),(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:3,children:[(0,r.jsx)(g.Z,{src:"".concat("http://localhost:9999").concat(eZ.User.userImage),sx:{width:70,height:70,boxShadow:"dark"===B.palette.mode?"0 0 20px rgba(139, 92, 246, 0.3)":"0 4px 20px rgba(0, 0, 0, 0.15)",border:"3px solid ".concat("dark"===B.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.2)")}}),(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,r.jsx)(W.Z,{sx:{color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed"}}),(0,r.jsx)(d.Z,{variant:"h6",sx:{fontWeight:"bold",cursor:"pointer",color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed"},onClick:e=>eD(e,eZ.User.nickname),children:eZ.User.nickname})]}),(0,r.jsx)(d.Z,{variant:"body2",color:"text.secondary",sx:{fontWeight:500,mb:1},children:"건의사항 작성자"})]})]}),(0,r.jsxs)(a.Z,{textAlign:"right",children:[(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,r.jsx)(D,{fontSize:"small",sx:{color:"text.secondary"}}),(0,r.jsxs)(d.Z,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:["등록일: ",Z()(eZ.created_at).format("YYYY년 MM월 DD일 HH:mm")]})]}),(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,r.jsx)(H,{fontSize:"small",sx:{color:"text.secondary"}}),(0,r.jsxs)(d.Z,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:["수정일: ",Z()(eZ.updated_at).format("YYYY년 MM월 DD일 HH:mm")]})]})]})]}),(0,r.jsx)(a.Z,{sx:{bgcolor:"dark"===B.palette.mode?"rgba(26, 26, 46, 0.6)":"grey.50",p:3,borderRadius:3,boxShadow:"dark"===B.palette.mode?"0 0 15px rgba(139, 92, 246, 0.2)":1,mb:3,border:"dark"===B.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"},children:(()=>{if(!(null==eZ?void 0:eZ.content))return null;let e=eZ.content;eZ.SuggestionImage&&eZ.SuggestionImage.length>0&&(e=(e=e.replace(/<img[^>]*src=""[^>]*>/g,e=>{let t=e.match(/alt="([^"]*)"/),n=e.match(/title="([^"]*)"/),r=(null==t?void 0:t[1])||(null==n?void 0:n[1]);if(r){let t=r.replace(/\.[^.]+$/,""),n=eZ.SuggestionImage.find(e=>{let n=e.image_name.replace(/\.[^.]+$/,""),o=n.replace(/_\d{8}$/,"");return n.includes(t)||t.includes(n)||o.includes(t)||t.includes(o)||e.image_name.includes(r)||r.includes(e.image_name)});if(n)return e.replace(/src=""/,'src="'.concat("http://localhost:9999").concat(n.link,'"'))}return e})).replace(/<img[^>]*src="blob:[^"]*"[^>]*>/g,e=>{let t=e.match(/alt="([^"]*)"/),n=e.match(/title="([^"]*)"/),r=(null==t?void 0:t[1])||(null==n?void 0:n[1]);if(r){let t=r.replace(/\.[^.]+$/,""),n=eZ.SuggestionImage.find(e=>{let n=e.image_name.replace(/\.[^.]+$/,"");return n.includes(t)||t.includes(n)});if(n)return e.replace(/src="blob:[^"]*"/,'src="'.concat("http://localhost:9999").concat(n.link,'"'))}return""}));let t=[],n=e.match(/<img[^>]*>/g);n&&n.forEach(e=>{let n=e.match(/src="([^"]*)"/);if(n&&n[1]){var r;let e=n[1],o=null===(r=eZ.SuggestionImage)||void 0===r?void 0:r.find(t=>{if(e.includes(t.link))return!0;let n=e.split("/").pop(),r=t.link.split("/").pop();return!!n&&!!r&&n===r});o&&!t.find(e=>e.id===o.id)&&t.push(o)}});let o=e.split(/(<img[^>]*>)/),i=[],l=[],s=()=>{0!==l.length&&(i.push((0,r.jsx)(a.Z,{sx:{my:3},children:(0,r.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,justifyContent:"center"},children:l.map((e,t)=>{let n=t===l.length-1&&l.length%2!=0;return(0,r.jsx)(M.Z,{img:e.img,isLastOddImage:n,onClick:t=>eW(t,e.index),customWidth:e.customWidth,customMargin:e.customMargin},"image-".concat(e.img.id,"-").concat(e.originalIndex))})})},"image-group-".concat(i.length))),l=[])};return o.forEach((e,n)=>{if(e.match(/^<img[^>]*>$/)){let u=e.match(/src="([^"]*)"/);if(u&&u[1]){var o,c,d;let g=u[1],x=null===(o=eZ.SuggestionImage)||void 0===o?void 0:o.find(e=>{var t;if(g.includes(e.link))return!0;let n=g.split("/").pop(),r=e.link.split("/").pop();if(n&&r&&n===r)return!0;let o=null==n?void 0:n.replace(/\.[^.]+$/,""),i=null===(t=e.image_name)||void 0===t?void 0:t.replace(/\.[^.]+$/,"");return!!(o&&i&&i.includes(o))});if(!x&&eZ.SuggestionImage&&eZ.SuggestionImage.length>0&&(x=eZ.SuggestionImage[l.length%eZ.SuggestionImage.length]),x){let r,o;let i=t.findIndex(e=>e.id===x.id),a=e.match(/style="([^"]*)"/);if(a&&a[1]){let e=a[1].split(";"),t=e.find(e=>{let t=e.trim();return t.startsWith("width:")&&!t.startsWith("max-width:")});if(t){let e=null===(c=t.split(":")[1])||void 0===c?void 0:c.trim();e&&(r=e)}let n=e.find(e=>e.trim().startsWith("margin:"));if(n){let e=null===(d=n.split(":")[1])||void 0===d?void 0:d.trim();e&&(o=e)}}l.push({img:x,index:i>=0?i:0,originalIndex:n,customWidth:r,customMargin:o})}else s(),i.push((0,r.jsx)(a.Z,{sx:{my:2,textAlign:"center"},children:(0,r.jsx)(a.Z,{component:"img",src:g,alt:"이미지",sx:{maxWidth:"100%",height:"auto",borderRadius:"8px",cursor:"pointer","&:hover":{opacity:.8,transform:"scale(1.02)"},transition:"all 0.2s ease"},onClick:()=>{eW({id:Date.now(),image_name:g.split("/").pop()||"unknown",link:g.startsWith("http")?g.replace("http://localhost:9999",""):g,file_size:0,mime_type:"image/jpeg",created_at:new Date().toISOString()},0)}})},"img-fallback-".concat(n)))}}else e.trim()&&(s(),i.push((0,r.jsx)(a.Z,{sx:{lineHeight:1.8,fontSize:"1.1rem",color:B.palette.text.primary,"& p":{margin:"16px 0"},"& ol, & ul":{paddingLeft:"28px",margin:"16px 0",listStylePosition:"outside"},"& ol":{listStyleType:"decimal"},"& ul":{listStyleType:"disc"},"& li":{margin:"8px 0",paddingLeft:"4px",lineHeight:1.7},"& h1, & h2, & h3, & h4, & h5, & h6":{margin:"24px 0 16px 0",fontWeight:"bold",color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed"},"& blockquote":{borderLeft:"4px solid ".concat("dark"===B.palette.mode?"#8b5cf6":"#7c3aed"),paddingLeft:"16px",margin:"16px 0",fontStyle:"italic",background:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(139, 92, 246, 0.05)",borderRadius:"0 8px 8px 0",padding:"12px 16px"}},dangerouslySetInnerHTML:{__html:e}},"text-".concat(n))))}),s(),i})()}),e_&&eZ.content&&!eZ.content.includes("<img")&&(0,r.jsxs)(a.Z,{sx:{mt:4},children:[(0,r.jsx)(d.Z,{variant:"h5",sx:{fontWeight:"bold",mb:3,textAlign:"center",color:"dark"===B.palette.mode?"#8b5cf6":"#7c3aed",borderBottom:"2px solid ".concat("dark"===B.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(139, 92, 246, 0.2)"),pb:1},children:"\uD83D\uDDBC️ 첨부된 이미지"}),(0,r.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:2,mt:3},children:e_})]})]})})}),(0,r.jsxs)(x.Z,{open:ee,onClose:eL,maxWidth:!1,fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(0, 0, 0, 0.92)",border:"1px solid rgba(192, 192, 192, 0.5)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.1)",position:"relative",height:"85vh",width:"80vw",margin:"20px",borderRadius:"8px",overflow:"hidden"}},children:[(0,r.jsxs)(a.Z,{sx:{position:"absolute",top:0,right:0,display:"flex",justifyContent:"flex-end",alignItems:"center",p:1.5,zIndex:10},children:[(0,r.jsx)(m.Z,{onClick:()=>{er(e=>Math.max(e-.5,.5))},sx:{color:"silver","&:hover":{color:"white"},mr:1,fontSize:"1.8rem"},children:(0,r.jsx)(V.Z,{sx:{fontSize:"1.8rem"}})}),(0,r.jsxs)(d.Z,{variant:"body1",sx:{color:"silver",mx:1,fontSize:"1.1rem"},children:[(100*en).toFixed(0),"%"]}),(0,r.jsx)(m.Z,{onClick:()=>{er(e=>Math.min(e+.5,3))},sx:{color:"silver","&:hover":{color:"white"},mr:1,fontSize:"1.8rem"},children:(0,r.jsx)(O.Z,{sx:{fontSize:"1.8rem"}})}),(0,r.jsx)(m.Z,{onClick:eL,sx:{color:"silver","&:hover":{color:"white"},fontSize:"1.8rem"},children:(0,r.jsx)(E.Z,{sx:{fontSize:"1.8rem"}})})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",position:"relative"},children:[G>0&&(0,r.jsx)(m.Z,{onClick:()=>{if(G>0){let e=G-1;J(e),Q(null==eZ?void 0:eZ.SuggestionImage[e]),er(1),ei({x:0,y:0})}},sx:{position:"absolute",left:{xs:8,md:24},color:"silver","&:hover":{color:"white"},fontSize:"2rem"},children:(0,r.jsx)(P.Z,{sx:{fontSize:"2rem"}})}),X&&(0,r.jsx)(a.Z,{component:"img",src:"".concat("http://localhost:9999").concat(X.link),alt:"Selected",onMouseDown:e=>{en>1&&(el(!0),ec({x:e.clientX-eo.x,y:e.clientY-eo.y}))},onMouseMove:e=>{ea&&en>1&&ei({x:e.clientX-es.x,y:e.clientY-es.y})},onMouseUp:()=>{el(!1)},onMouseLeave:()=>{el(!1)},sx:{maxWidth:"90%",maxHeight:"80vh",objectFit:"contain",transform:"scale(".concat(en,") translate(").concat(eo.x/en,"px, ").concat(eo.y/en,"px)"),transition:ea?"none":"transform 0.2s ease-out",border:"1px solid rgba(192, 192, 192, 0.2)",cursor:en>1?ea?"grabbing":"grab":"default",userSelect:"none"},draggable:!1}),(null==eZ?void 0:eZ.SuggestionImage)&&G<eZ.SuggestionImage.length-1&&(0,r.jsx)(m.Z,{onClick:()=>{if((null==eZ?void 0:eZ.SuggestionImage)&&G<eZ.SuggestionImage.length-1){let e=G+1;J(e),Q(eZ.SuggestionImage[e]),er(1),ei({x:0,y:0})}},sx:{position:"absolute",right:{xs:8,md:24},color:"silver","&:hover":{color:"white"},fontSize:"2rem"},children:(0,r.jsx)(F.Z,{sx:{fontSize:"2rem"}})})]})]}),(0,r.jsx)(Y.Z,{open:!!ed,anchorEl:ed,onClose:eH,nickname:eg,onSendMessage:()=>{ep(!0),eH()}}),(0,r.jsx)(N.Z,{open:em,onClose:()=>{ep(!1)},receiverNickname:eg})]})}},3011:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(2265);let o=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(r,o,i);return i},i=e=>e?o(e):o,a=e=>e,l=e=>{let t=i(e),n=e=>(function(e,t=a){let n=r.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return r.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},s=e=>e?l(e):l}},function(e){e.O(0,[5152,4419,1991,1547,6593,455,2472,7404,9631,605,7037,6931,1256,7571,64,7674,2971,2117,1744],function(){return e(e.s=11746)}),_N_E=e.O()}]);