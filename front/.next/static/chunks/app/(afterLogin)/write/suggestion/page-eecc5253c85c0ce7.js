(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4340],{34191:function(e,a,r){Promise.resolve().then(r.bind(r,21522))},21522:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return w}});var t=r(57437),n=r(31691),o=r(53410),i=r(2069),l=r(46387),d=r(8350),s=r(97404),x=r(91991),p=r(35389),c=r(16593),g=r(21770),b=r(83464),u=r(99376),h=r(2265),f=r(72317),m=r(87761),k=r(30419),S=r(86874);function w(){let e=(0,u.useRouter)(),a=(0,u.useSearchParams)(),r=null==a?void 0:a.get("channel"),{showMessage:w}=(0,k.U)(e=>e),v="dark"===(0,n.Z)().palette.mode,[y,C]=(0,h.useState)(""),[Z,j]=(0,h.useState)(""),[W,I]=(0,h.useState)(S.ey),[M,_]=(0,h.useState)(!1),{data:D}=(0,c.a)({queryKey:["channel",r],queryFn:async()=>r?(await b.Z.get("".concat("http://localhost:9999","/api/channels/slug/").concat(r),{withCredentials:!0})).data:null,enabled:!!r}),F=(0,g.D)({mutationFn:async e=>{if(e.preventDefault(),y.length>2&&Z.length>2){_(!0);let e=new FormData;return e.append("category",W),e.append("title",y),e.append("content",Z),(null==D?void 0:D.id)&&e.append("channelId",D.id.toString()),await b.Z.post("".concat("http://localhost:9999","/api/suggestion/create"),e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})}w("제목과 내용을 3글자 이상 입력해주세요","error")},retry:1,retryDelay:()=>2e3,onSuccess:a=>{_(!1),w("글 작성 완료","info"),r?e.push("/channels/".concat(r)):e.push("/")},onError:a=>{_(!1),w("글 작성 실패, 이전 화면으로 이동합니다","error"),console.error(a),e.back()}});return(0,t.jsxs)(o.Z,{elevation:0,sx:{p:{xs:3,sm:4,md:5},width:{xs:"95%",sm:"80%",md:"65%",lg:"55%"},maxWidth:"900px",margin:"auto",mt:{xs:3,sm:4,md:5},mb:5,borderRadius:"16px",boxShadow:v?"0 10px 40px rgba(0, 0, 0, 0.4)":"0 10px 40px rgba(0, 0, 0, 0.07)",background:v?"rgba(30, 32, 38, 0.95)":"#ffffff",position:"relative",overflow:"hidden",border:v?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.2)"},children:[(0,t.jsx)(i.Z,{sx:{position:"absolute",top:0,left:0,right:0,height:"6px",background:"linear-gradient(90deg, #8a2387, #e94057, #f27121)"}}),(0,t.jsx)(l.Z,{variant:"h4",sx:{fontWeight:700,textAlign:"center",mb:2,mt:1,letterSpacing:"-0.5px",background:"linear-gradient(135deg, #8a2387, #e94057, #f27121)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",...v&&{color:"#fff",background:"none",WebkitTextFillColor:"unset"}},children:"건의하기"}),(0,t.jsx)(i.Z,{children:(0,t.jsx)(f.Z,{selectArray:S.CQ,defaultValue:S.ey,setSelectedCategory:I})}),(0,t.jsx)(d.Z,{sx:{mb:2,opacity:v?.3:.8}}),(0,t.jsxs)(i.Z,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3},noValidate:!0,autoComplete:"off",children:[(0,t.jsx)(s.Z,{required:!0,id:"title-input",label:"제목",placeholder:"건의사항의 제목을 입력해주세요 (3글자 이상)",variant:"outlined",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:v?"rgba(45, 48, 56, 0.8)":"rgba(249, 250, 251, 0.8)",color:v?"#ffffff":"inherit",transition:"all 0.3s ease","&:hover":{backgroundColor:v?"rgba(50, 53, 61, 1)":"rgba(245, 247, 250, 1)",boxShadow:v?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.04)"},"&.Mui-focused":{backgroundColor:v?"rgba(55, 58, 66, 1)":"#ffffff",boxShadow:v?"0 4px 12px rgba(0, 0, 0, 0.4)":"0 4px 12px rgba(0, 0, 0, 0.05)","& fieldset":{borderColor:"#e94057",borderWidth:"2px"}},"& fieldset":{borderColor:v?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.23)"}},"& .MuiInputLabel-root":{fontWeight:500,color:v?"rgba(255, 255, 255, 0.7)":"inherit"},"& .MuiInputLabel-root.Mui-focused":{color:"#e94057"},"& .MuiOutlinedInput-input::placeholder":{color:v?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.6)",opacity:1}},onChange:e=>C(e.target.value)}),(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(l.Z,{variant:"body1",sx:{fontWeight:500,mb:1,color:v?"rgba(255, 255, 255, 0.7)":"inherit",fontSize:"1rem"},children:"내용"}),(0,t.jsx)(m.Z,{value:Z,onChange:j,placeholder:"건의사항 내용을 자유롭게 작성해주세요 (3글자 이상)",height:"350px"})]}),(0,t.jsx)(d.Z,{sx:{opacity:v?.3:.9}}),(0,t.jsxs)(i.Z,{sx:{display:"flex",width:"100%",alignItems:"center"},children:[(0,t.jsx)(x.Z,{onClick:()=>e.back(),variant:"contained",sx:{fontSize:{xs:"0.95rem",sm:"1rem"},textTransform:"none",fontWeight:600,letterSpacing:"0.5px",background:"linear-gradient(135deg, #2196f3, #21cbf3)",boxShadow:v?"0 6px 15px rgba(33, 150, 243, 0.5)":"0 6px 15px rgba(33, 150, 243, 0.3)",transition:"all 0.3s ease","&:hover":{boxShadow:v?"0 8px 20px rgba(33, 150, 243, 0.6)":"0 8px 20px rgba(33, 150, 243, 0.4)",transform:"translateY(-2px)",background:"linear-gradient(135deg, #1976d2, #1e88e5)"},"&:active":{transform:"translateY(0)",boxShadow:v?"0 4px 10px rgba(33, 150, 243, 0.5)":"0 4px 10px rgba(33, 150, 243, 0.3)"},"&:disabled":{background:v?"#333":"#e0e0e0",color:v?"#666":"#a0a0a0",boxShadow:"none"},borderRadius:"12px 0 0 12px",width:{xs:"50%",sm:"30%",md:"25%"},height:"40px"},children:"뒤로가기"}),(0,t.jsx)(x.Z,{variant:"contained",onClick:F.mutate,disabled:M||y.length<3||Z.length<3,sx:{fontSize:{xs:"0.95rem",sm:"1rem"},textTransform:"none",fontWeight:600,letterSpacing:"0.5px",background:"linear-gradient(135deg, #8a2387, #e94057, #f27121)",boxShadow:v?"0 6px 15px rgba(233, 64, 87, 0.5)":"0 6px 15px rgba(233, 64, 87, 0.3)",transition:"all 0.3s ease","&:hover":{boxShadow:v?"0 8px 20px rgba(233, 64, 87, 0.6)":"0 8px 20px rgba(233, 64, 87, 0.4)",transform:"translateY(-2px)",background:"linear-gradient(135deg, #7a1d77, #d93a4f, #e2671e)"},"&:active":{transform:"translateY(0)",boxShadow:v?"0 4px 10px rgba(233, 64, 87, 0.5)":"0 4px 10px rgba(233, 64, 87, 0.3)"},"&:disabled":{background:v?"#333":"#e0e0e0",color:v?"#666":"#a0a0a0",boxShadow:"none"},borderRadius:"0 12px 12px 0",width:{xs:"50%",sm:"70%",md:"75%"},height:"40px"},startIcon:M?(0,t.jsx)(p.Z,{size:20,color:"inherit"}):null,children:M?"등록 중...":"건의하기"})]})]})]})}}},function(e){e.O(0,[3572,7902,5152,4419,1991,1547,6593,455,2472,7404,9631,7037,5679,4636,7799,9859,2971,2117,1744],function(){return e(e.s=34191)}),_N_E=e.O()}]);