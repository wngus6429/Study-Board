(()=>{var e={};e.id=739,e.ids=[739],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},99165:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(69459),r(60246),r(91884),r(59198);var s=r(30170),a=r(45002),o=r(83876),i=r.n(o),n=r(66299),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["(afterLogin)",{children:["edit",{children:["story",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69459)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\(afterLogin)\\edit\\story\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e),async e=>(await Promise.resolve().then(r.bind(r,71150))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,60246)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,91884)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,59198)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e),async e=>(await Promise.resolve().then(r.bind(r,71150))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\(afterLogin)\\edit\\story\\[id]\\page.tsx"],u="/(afterLogin)/edit/story/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(afterLogin)/edit/story/[id]/page",pathname:"/edit/story/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},35420:(e,t,r)=>{Promise.resolve().then(r.bind(r,65584))},78726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)([(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,a.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt")},89533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 12h-2v-2h2zm0-4h-2V6h2z"}),"Feedback")},77740:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)((0,a.jsx)("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1m-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1"}),"Forum")},21460:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},41738:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)((0,a.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")},79385:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)((0,a.jsx)("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1m-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1"}),"QuestionAnswer")},22546:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(70531),a=r(97247);let o=(0,s.Z)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14zm12 0h-7.5l2-2H18z"}),"RateReview")},65584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var s=r(97247),a=r(28964),o=r(34178),i=r(41755),n=r(9190),l=r(88111),c=r(10863),d=r(24222),u=r(42658),p=r(24091),h=r(74247),m=r(53187),x=r(72497),g=r(37247),v=r(53291),f=r(3701),y=r(19898),b=r(64560);function Z({params:e}){let t=(0,i.NL)(),r=(0,o.useRouter)(),{data:Z,status:j}=(0,y.useSession)(),{showMessage:w}=(0,b.U)(e=>e),[C,q]=(0,a.useState)(""),[P,S]=(0,a.useState)(""),[L,$]=(0,a.useState)(v.E2),[_,E]=(0,a.useState)([]),[M,k]=(0,a.useState)(!1),{data:A,isLoading:D}=(0,n.a)({queryKey:["story","edit",e?.id],queryFn:async()=>{try{return(await c.Z.get(`http://localhost:9999/api/story/detail/edit/${e.id}?userId=${Z?.user.id}`,{withCredentials:!0})).data}catch(e){throw c.Z.isAxiosError(e)&&e.response?.status===403&&r.push("/"),e}},retry:1,retryDelay:()=>2e3,enabled:!!e.id&&!!Z?.user.id}),U=(0,l.D)({mutationFn:async t=>{await c.Z.post(`http://localhost:9999/api/story/update/${e.id}`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})},retry:1,retryDelay:()=>2e3,onSuccess:()=>{k(!1),w("수정 성공","success"),t.invalidateQueries({queryKey:["story","detail",e.id]}),A?.Channel?.slug?r.push(`/channels/${A.Channel.slug}/detail/story/${e.id}`):r.push("/")},onError:e=>{k(!1),w("수정 실패, 이전 화면으로 이동합니다","error"),console.error(e),r.back()}});return D?s.jsx(x.default,{}):(0,s.jsxs)(d.Z,{padding:4,component:"form",sx:{width:"60%",margin:"auto",mt:5,bgcolor:"background.paper",boxShadow:3,borderRadius:3,mb:5},children:[s.jsx(u.Z,{variant:"h4",marginBottom:3,sx:{fontWeight:"bold",textAlign:"center",color:"primary.main"},children:"글 수정하기"}),s.jsx(p.Z,{name:"title",label:"제목 (필수)",variant:"outlined",fullWidth:!0,margin:"normal",value:C,onChange:e=>q(e.target.value),sx:{bgcolor:"background.default",borderRadius:2,mb:2}}),s.jsx(f.Z,{selectArray:v.KX,defaultValue:v.E2,setSelectedCategory:$,value:L}),(0,s.jsxs)(d.Z,{sx:{mb:2},children:[s.jsx(u.Z,{variant:"body1",sx:{mb:1,fontWeight:500,mt:-1},children:"내용 (필수)"}),s.jsx(g.Z,{value:P,onChange:S,placeholder:"글 내용을 입력해주세요",height:"400px",onFilesChange:e=>{E(e)}})]}),(0,s.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[s.jsx(h.Z,{variant:"outlined",color:"error",onClick:()=>r.back(),sx:{flex:1,marginRight:1,fontWeight:"bold"},children:"취소"}),s.jsx(h.Z,{variant:"contained",color:"success",onClick:e=>{if(C.length<3||P.length<3){w("제목과 내용을 3글자 이상 입력해주세요","error");return}k(!0),e.preventDefault();let t=new FormData;t.append("title",C);let r=P,s="http://localhost:9999";if(s){let e=s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=RegExp(`src="${e}/upload/([^"]+)"`,"g");P.match(t),r=r.replace(t,'src="/upload/$1"');let a=RegExp(`src="${e}/videoUpload/([^"]+)"`,"g");P.match(a),r=r.replace(a,'src="/videoUpload/$1"');let o=RegExp(`<source([^>]*)src="${e}/videoUpload/([^"]+)"([^>]*)>`,"g");P.match(o),r=r.replace(o,'<source$1src="/videoUpload/$2"$3>');let i=/src="blob:[^"]*"/g;P.match(i),r=r.replace(i,'src=""')}t.append("content",r),t.append("category",L),_.forEach(e=>{t.append("files",e)}),Array.from(t.entries()).forEach(([e,t])=>{}),U.mutate(t)},disabled:M||C.length<3||P.length<3,sx:{flex:1,marginLeft:1,fontWeight:"bold"},startIcon:M&&s.jsx(m.Z,{size:20,color:"inherit"}),children:"수정"})]})]})}},3701:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(97247),a=r(28964),o=r(54468),i=r(71831),n=r(35361),l=r(94307);let c=({selectArray:e,defaultValue:t,setSelectedCategory:r,value:c})=>{let d=e.find(e=>e.value===t),[u,p]=(0,a.useState)(d?.value||""),[h,m]=(0,a.useState)(!1);return(0,s.jsxs)(n.Z,{sx:{m:1,width:"100%",margin:0,marginBottom:3},children:[s.jsx(o.Z,{id:"demo-controlled-open-select-label",children:"종류"}),s.jsx(l.Z,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:h,onClose:()=>m(!1),onOpen:()=>m(!0),value:c||u,label:"글 종류",onChange:e=>{p(e.target.value),r(e.target.value)},MenuProps:{disableScrollLock:!0},children:e.map((e,t)=>s.jsx(i.Z,{value:e.value,children:e.name},t))})]})}},53291:(e,t,r)=>{"use strict";r.d(t,{ey:()=>g,E2:()=>h,CQ:()=>x,Ik:()=>m,KX:()=>p});var s=r(97247),a=r(77740),o=r(79385),i=r(21460),n=r(22546),l=r(78726),c=r(41738);let d=(0,r(70531).Z)((0,s.jsx)("path",{d:"M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L12 10.66 10.48 12h.01L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l2.83-2.5.01.01L13.52 12h-.01l2.69-2.39c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37"}),"AllInclusive");var u=r(89533);let p=[{name:"잡담",value:"chat",icon:s.jsx(a.Z,{})},{name:"질문",value:"question",icon:s.jsx(o.Z,{})},{name:"정보",value:"info",icon:s.jsx(i.Z,{})},{name:"리뷰",value:"review",icon:s.jsx(n.Z,{})},{name:"스샷",value:"screenshot",icon:s.jsx(l.Z,{})},{name:"기타",value:"etc",icon:s.jsx(c.Z,{})}],h=p[0].value,m=[{name:"전체",value:"all",icon:s.jsx(d,{})},...p,{name:"건의",value:"suggestion",icon:s.jsx(u.Z,{})}],x=[{name:"건의",value:"suggestion"},{name:"문의",value:"inquiry"},{name:"신고",value:"report"}],g="suggestion"},69459:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\(afterLogin)\edit\story\[id]\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,819,507,33,247],()=>r(99165));module.exports=s})();