exports.id=33,exports.ids=[33],exports.modules={95438:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63642,23)),Promise.resolve().then(r.t.bind(r,87586,23)),Promise.resolve().then(r.t.bind(r,47838,23)),Promise.resolve().then(r.t.bind(r,58057,23)),Promise.resolve().then(r.t.bind(r,77741,23)),Promise.resolve().then(r.t.bind(r,13118,23))},90826:(e,t,r)=>{Promise.resolve().then(r.bind(r,78440)),Promise.resolve().then(r.bind(r,12430)),Promise.resolve().then(r.bind(r,24446)),Promise.resolve().then(r.bind(r,34202)),Promise.resolve().then(r.bind(r,42236)),Promise.resolve().then(r.bind(r,10637)),Promise.resolve().then(r.bind(r,93936)),Promise.resolve().then(r.bind(r,4239)),Promise.resolve().then(r.bind(r,71582)),Promise.resolve().then(r.bind(r,65997))},24451:(e,t,r)=>{Promise.resolve().then(r.bind(r,72497))},50424:(e,t,r)=>{Promise.resolve().then(r.bind(r,85295))},84274:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(10863);let n=a.Z.create({baseURL:"http://localhost:9999",withCredentials:!0});n.interceptors.request.use(e=>e,e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{let t=e.config;if("/api/auth/refresh"===t.url)return window.location.href="/login",Promise.reject(e);if(e.response?.status===401&&!t._retry){t._retry=!0;try{return await a.Z.post("http://localhost:9999/api/auth/refresh",{},{withCredentials:!0,headers:{"Content-Type":"application/json"}}),n(t)}catch(e){return window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let o=n},11209:(e,t,r)=>{"use strict";r.d(t,{$f:()=>n,Lc:()=>o,tf:()=>i});var a=r(84274);let n=async e=>(await a.Z.post("http://localhost:9999/api/blinds",e,{withCredentials:!0})).data,o=async(e=1,t=20)=>(await a.Z.get("http://localhost:9999/api/blinds",{params:{page:e,limit:t},withCredentials:!0})).data,i=async e=>{await a.Z.delete(`http://localhost:9999/api/blinds/${e}`,{withCredentials:!0})}},91146:(e,t,r)=>{"use strict";r.d(t,{Bh:()=>p,Ky:()=>n,S0:()=>l,b8:()=>s,ec:()=>d,mi:()=>c,mr:()=>o,u3:()=>i,w4:()=>x});var a=r(10863);let n=async()=>(await a.Z.get("http://localhost:9999/api/channels",{withCredentials:!0})).data,o=async e=>(await a.Z.get(`http://localhost:9999/api/channels/${e}`,{withCredentials:!0})).data,i=async e=>(await a.Z.get(`http://localhost:9999/api/channels/slug/${e}`,{withCredentials:!0})).data,s=async e=>(await a.Z.post(`http://localhost:9999/api/channels/${e}/subscribe`,{},{withCredentials:!0})).data,l=async e=>(await a.Z.delete(`http://localhost:9999/api/channels/${e}/subscribe`,{withCredentials:!0})).data,d=async()=>(await a.Z.get("http://localhost:9999/api/channels/user/subscriptions",{withCredentials:!0})).data,c=async(e,t)=>(await a.Z.post("http://localhost:9999/api/channels/create",{channelName:e,slug:t},{withCredentials:!0})).data,p=async(e,t)=>{let r=new FormData;return r.append("channelImage",t),(await a.Z.post(`http://localhost:9999/api/channels/${e}/upload-image`,r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},x=async e=>(await a.Z.delete(`http://localhost:9999/api/channels/${e}/image`,{withCredentials:!0})).data},80613:(e,t,r)=>{"use strict";r.d(t,{FY:()=>n,Go:()=>l,Ix:()=>s,kW:()=>i,no:()=>d,xQ:()=>o});var a=r(84274);let n=async()=>(await a.Z.get("http://localhost:9999/api/notifications",{withCredentials:!0})).data.filter(e=>"comment"===e.type||"reply"===e.type),o=async()=>(await a.Z.get("http://localhost:9999/api/notifications",{withCredentials:!0})).data.filter(e=>"channel_post"===e.type),i=async(e=1,t=20)=>(await a.Z.get("http://localhost:9999/api/notifications/all",{params:{page:e,limit:t},withCredentials:!0})).data,s=async e=>{await a.Z.patch(`http://localhost:9999/api/notifications/${e}/read`,{},{withCredentials:!0})},l=async()=>{await a.Z.patch("http://localhost:9999/api/notifications/read-all",{},{withCredentials:!0})},d=async e=>{await a.Z.delete(`http://localhost:9999/api/notifications/${e}`,{withCredentials:!0})}},83307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r(97247),n=r(28964),o=r(9190),i=r(19898),s=r(11209),l=r(55592);let d=()=>{let{data:e}=(0,i.useSession)(),{setBlindUsers:t,isUserBlinded:r}=(0,l.L)(),{data:a}=(0,o.a)({queryKey:["blindUsers"],queryFn:()=>(0,s.Lc)(1,100),enabled:!!e?.user,staleTime:3e5});return(0,n.useEffect)(()=>{a?.items&&t(a.items)},[a?.items,t]),{isUserBlinded:r,blindUsers:a?.items||[]}};var c=r(42658),p=r(66071);let x=({type:e,className:t})=>(0,a.jsxs)(c.Z,{variant:"body2",color:"text.disabled",sx:{display:"flex",alignItems:"center",gap:.5,fontStyle:"italic"},className:t,children:[a.jsx(p.Z,{fontSize:"small"}),"블라인드된 사용자입니다"]}),h=({userId:e,type:t,children:r,className:n})=>{let{isUserBlinded:o}=d();return o(e)?a.jsx(x,{type:t,className:n}):a.jsx(a.Fragment,{children:r})}},34202:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var a=r(97247),n=r(28964),o=r(79906),i=r(24222),s=r(42658),l=r(53187),d=r(78708),c=r(82891),p=r(35421),x=r(71804),h=r(40998),u=r(13142),g=r(70380),m=r(99084),b=r(96172),f=r(19898),y=r(34178);let j=()=>{let e=(0,g.Z)(),t=(0,y.useRouter)(),r=(0,y.usePathname)(),{subscribedChannels:j,loading:k,error:w,loadSubscriptions:Z,clearSubscriptions:v}=(0,m.Z)(),{currentChannelSlug:C,currentPage:S,currentCategory:I,stories:P}=(0,b.X)(),{data:D}=(0,f.useSession)(),z=r?.includes("/channels/")&&r?.includes("/detail/"),B=r?.match(/\/channels\/([^\/]+)/)?.[1],F=z&&C===B&&P.length>0;return(0,n.useEffect)(()=>{D?.user?Z():v()},[D?.user,Z,v]),(0,a.jsxs)(i.Z,{sx:{position:"fixed",top:150,left:20,display:{xs:"none",sm:"none",md:"none",lg:"flex"},flexDirection:"column",width:"230px",maxHeight:"calc(100vh - 120px)",overflow:"auto",bgcolor:"dark"===e.palette.mode?"rgba(26, 26, 46, 0.95)":"rgba(255, 255, 255, 0.95)",border:"dark"===e.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"12px",boxShadow:"dark"===e.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.15)":"0 4px 20px rgba(0, 0, 0, 0.1)",p:2,backdropFilter:"blur(10px)",zIndex:999},children:[a.jsx(s.Z,{variant:"subtitle2",sx:{color:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2",fontWeight:600,mb:1,px:1},children:"구독한 채널"}),k?a.jsx(i.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:a.jsx(l.Z,{size:20})}):j.length>0?a.jsx(d.Z,{dense:!0,children:j.map(t=>a.jsx(c.ZP,{disablePadding:!0,children:(0,a.jsxs)(p.Z,{component:o.default,href:`/channels/${t.slug}`,sx:{borderRadius:1,py:.5,"&:hover":{backgroundColor:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.04)"}},children:[a.jsx(x.Z,{sx:{width:24,height:24,mr:1,fontSize:"0.8rem",background:"dark"===e.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.6), rgba(6, 182, 212, 0.6))":"linear-gradient(135deg, #1976d2, #42a5f5)"},children:t.channel_name.charAt(0)}),(0,a.jsxs)(i.Z,{sx:{flex:1,minWidth:0},children:[a.jsx(s.Z,{variant:"body2",sx:{color:"dark"===e.palette.mode?"#e2e8f0":"inherit",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.channel_name}),(0,a.jsxs)(s.Z,{variant:"caption",sx:{color:"dark"===e.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)"},children:[t.story_count,"개 글"]})]})]})},t.id))}):a.jsx(s.Z,{variant:"caption",sx:{color:"dark"===e.palette.mode?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",px:1,display:"block"},children:"구독한 채널이 없습니다"}),F&&a.jsx(h.Z,{sx:{my:2,borderColor:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.2)":"rgba(0, 0, 0, 0.1)"}}),F&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{variant:"subtitle2",sx:{color:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2",fontWeight:600,mb:1,px:1},children:["현재 페이지 (",S,"페이지)"]}),a.jsx(d.Z,{dense:!0,children:P.map(r=>a.jsx(c.ZP,{disablePadding:!0,children:a.jsx(p.Z,{onClick:()=>{t.push(`/channels/${C}/detail/story/${r.id}`)},sx:{borderRadius:1,py:.5,px:1,"&:hover":{backgroundColor:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.04)"}},children:(0,a.jsxs)(i.Z,{sx:{flex:1,minWidth:0},children:[a.jsx(s.Z,{variant:"body2",sx:{color:"dark"===e.palette.mode?"#e2e8f0":"inherit",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.8rem",lineHeight:1.2},children:r.title}),(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:.5,mt:.25},children:[a.jsx(u.Z,{label:"all"===r.category?"전체":r.category,size:"small",sx:{height:16,fontSize:"0.65rem",backgroundColor:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.2)":"rgba(25, 118, 210, 0.1)",color:"dark"===e.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2","& .MuiChip-label":{px:.5}}}),a.jsx(s.Z,{variant:"caption",sx:{color:"dark"===e.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",fontSize:"0.7rem"},children:r.nickname})]})]})})},r.id))}),(0,a.jsxs)(s.Z,{variant:"caption",sx:{color:"dark"===e.palette.mode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",px:1,display:"block",textAlign:"center",mt:1},children:["총 ",P.length,"개 게시글"]})]})]})}},42236:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(97247),n=r(19898);function o({children:e}){return a.jsx(n.SessionProvider,{children:e})}},10637:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(97247),n=r(28964),o=r(19898),i=r(24222),s=r(42658),l=r(74247),d=r(83268),c=r(53246),p=r(27150),x=r(32263),h=r(75087);let u=({children:e})=>{let{data:t}=(0,o.useSession)(),[r,u]=(0,n.useState)("default"),[g,m]=(0,n.useState)(!1),[b,f]=(0,n.useState)(!1),[y,j]=(0,n.useState)("");(0,n.useEffect)(()=>{"Notification"in window&&(u(Notification.permission),t?.user&&"default"===Notification.permission&&m(!0))},[t]);let k=async()=>{if("Notification"in window)try{let e=await Notification.requestPermission();u(e),m(!1),"granted"===e?(j("브라우저 알림이 활성화되었습니다! 이제 댓글 알림을 받을 수 있습니다."),f(!0),w({title:"Study Board 알림 설정 완료",body:"이제 새로운 댓글 알림을 받을 수 있습니다!",icon:"/icon.png"})):"denied"===e&&(j("알림 권한이 거부되었습니다. 브라우저 설정에서 변경할 수 있습니다."),f(!0))}catch(e){console.error("알림 권한 요청 실패:",e)}},w=e=>{if("granted"===r&&"Notification"in window){let t=new Notification(e.title,{body:e.body,icon:e.icon||"/icon.png",badge:"/icon.png",tag:"study-board-notification",requireInteraction:!1,data:e.data});return t.onclick=()=>{window.focus(),e.onClick&&e.onClick(),t.close()},setTimeout(()=>{t.close()},5e3),t}return null};return(0,n.useEffect)(()=>{},[r]),(0,a.jsxs)(a.Fragment,{children:[e,g&&a.jsx(i.Z,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:9999,backgroundColor:"primary.main",color:"white",p:2},children:(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1200,margin:"0 auto"},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[a.jsx(x.Z,{}),a.jsx(s.Z,{variant:"body1",children:"새로운 댓글 알림을 받으시겠습니까? 브라우저 알림을 허용하면 실시간으로 알림을 받을 수 있습니다."})]}),(0,a.jsxs)(i.Z,{sx:{display:"flex",gap:1},children:[a.jsx(l.Z,{variant:"outlined",color:"inherit",size:"small",onClick:k,sx:{borderColor:"white",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"white"}},children:"허용"}),a.jsx(d.Z,{size:"small",onClick:()=>m(!1),sx:{color:"white"},children:a.jsx(h.Z,{})})]})]})}),a.jsx(c.Z,{open:b,autoHideDuration:4e3,onClose:()=>f(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:a.jsx(p.Z,{onClose:()=>f(!1),severity:"granted"===r?"success":"warning",sx:{width:"100%"},children:y})})]})}},93936:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(97247),n=r(28964),o=r(58797),i=r(41755),s=r(36634);let l=function({children:e}){let[t]=(0,n.useState)(new o.S({defaultOptions:{queries:{refetchOnWindowFocus:!1,retryOnMount:!0,refetchOnReconnect:!1,retry:!1}}}));return(0,a.jsxs)(i.aH,{client:t,children:[e,a.jsx(s.t,{initialIsOpen:"local"===process.env.NEXT_PUBLIC_MODE})]})}},4239:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var a=r(97247),n=r(28964),o=r(19898),i=r(99084);function s({children:e}){let{data:t,status:r}=(0,o.useSession)(),{subscribedChannels:s,loading:l,loadSubscriptions:d,clearSubscriptions:c}=(0,i.Z)();return(0,n.useRef)(!1),a.jsx(a.Fragment,{children:e})}},71582:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var a=r(97247),n=r(28964),o=r(72512),i=r(9299),s=r(77729),l=r(6368);let d={typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600,borderRadius:12,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}}}},c=(0,l.Z)({...d,palette:{mode:"light",primary:{main:"#6366f1",light:"#818cf8",dark:"#4f46e5",contrastText:"#ffffff"},secondary:{main:"#ec4899",light:"#f472b6",dark:"#db2777",contrastText:"#ffffff"},background:{default:"#f8fafc",paper:"#ffffff"},text:{primary:"#1e293b",secondary:"#64748b"}},components:{...d.components,MuiAppBar:{styleOverrides:{root:{backgroundColor:"#ffffff",color:"#1e293b",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"}}}}}),p=(0,l.Z)({...d,palette:{mode:"dark",primary:{main:"#8b5cf6",light:"#a78bfa",dark:"#7c3aed",contrastText:"#ffffff"},secondary:{main:"#06b6d4",light:"#22d3ee",dark:"#0891b2",contrastText:"#ffffff"},background:{default:"#0f0f23",paper:"#1a1a2e"},text:{primary:"#e2e8f0",secondary:"#94a3b8"},error:{main:"#ef4444",light:"#f87171",dark:"#dc2626"},warning:{main:"#f59e0b",light:"#fbbf24",dark:"#d97706"},info:{main:"#3b82f6",light:"#60a5fa",dark:"#2563eb"},success:{main:"#10b981",light:"#34d399",dark:"#059669"}},components:{...d.components,MuiAppBar:{styleOverrides:{root:{backgroundColor:"#1a1a2e",color:"#e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600,borderRadius:12,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:"0 0 20px rgba(139, 92, 246, 0.4)",transform:"translateY(-1px)"}},contained:{background:"linear-gradient(45deg, #8b5cf6 30%, #06b6d4 90%)",boxShadow:"0 4px 15px 0 rgba(139, 92, 246, 0.3)","&:hover":{background:"linear-gradient(45deg, #7c3aed 30%, #0891b2 90%)",boxShadow:"0 6px 20px 0 rgba(139, 92, 246, 0.5)"}},outlined:{borderColor:"rgba(139, 92, 246, 0.5)",color:"#8b5cf6","&:hover":{borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",boxShadow:"0 0 15px rgba(139, 92, 246, 0.3)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:"#1a1a2e",border:"1px solid rgba(139, 92, 246, 0.2)","&:hover":{border:"1px solid rgba(139, 92, 246, 0.4)",boxShadow:"0 8px 25px rgba(139, 92, 246, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(139, 92, 246, 0.3)"},"&:hover fieldset":{borderColor:"rgba(139, 92, 246, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#8b5cf6",boxShadow:"0 0 10px rgba(139, 92, 246, 0.3)"}}}}},MuiAvatar:{styleOverrides:{root:{border:"2px solid rgba(139, 92, 246, 0.3)","&:hover":{border:"2px solid rgba(139, 92, 246, 0.6)",boxShadow:"0 0 15px rgba(139, 92, 246, 0.4)"}}}}}});function x({children:e}){let{isDarkMode:t}=(0,s.f)();return(0,n.useCallback)(()=>{let e=document.documentElement;requestAnimationFrame(()=>{t?e.setAttribute("data-theme","dark"):e.removeAttribute("data-theme")})},[t]),(0,a.jsxs)(o.Z,{theme:t?p:c,children:[a.jsx(i.ZP,{enableColorScheme:!0}),e]})}},65997:(e,t,r)=>{"use strict";r.d(t,{default:()=>Q});var a=r(97247),n=r(28964),o=r(24222),i=r(83268),s=r(50043),l=r(70380),d=r(71804),c=r(74247),p=r(19922),x=r(71831),h=r(52833),u=r(11611),g=r(34178),m=r(84274),b=r(43460),f=r.n(b),y=r(19898),j=r(79906),k=r(9190),w=r(64560),Z=r(16803),v=r(72688),C=r(80460),S=r(42658),I=r(40998),P=r(53187),D=r(32263),z=r(41755),B=r(88111),F=r(80613),A=r(67325),R=r(37688);let T=()=>{let e=(0,g.useRouter)(),t=(0,z.NL)(),[r,s]=(0,n.useState)(null),{data:l}=(0,y.useSession)(),d=(0,n.useRef)([]),h=(0,n.useRef)(!0),{data:u=[],isLoading:m}=(0,k.a)({queryKey:["unreadCommentNotifications"],queryFn:F.FY,refetchInterval:15e3,enabled:!!l?.user});(0,n.useEffect)(()=>{if(!u||h.current){d.current=u,h.current=!1;return}let e=d.current,t=u.filter(t=>!e.some(e=>e.id===t.id));t.length>0&&t.forEach(e=>{if("comment"===e.type||"reply"===e.type){let t=window.showCommentNotification;t&&e.comment&&t({authorName:e.comment.author.nickname,content:e.comment.content,storyId:e.comment.storyId,commentId:e.comment.id,channelSlug:e.comment.channelSlug})}}),d.current=u},[u]);let b=(0,B.D)({mutationFn:F.Ix,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadCommentNotifications"]})}}),f=(0,B.D)({mutationFn:F.Go,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadCommentNotifications"]})}}),j=()=>{s(null)},w=async t=>{if(t.isRead||await b.mutateAsync(t.id),("comment"===t.type||"reply"===t.type)&&t.comment?.storyId&&t.comment?.channelSlug){let r=`/channels/${t.comment.channelSlug}/detail/story/${t.comment.storyId}#comment-${t.comment.id}`;e.push(r)}j()},Z=async()=>{await f.mutateAsync()},v=e=>(0,A.Q)(new Date(e),{addSuffix:!0,locale:R.ko}),T=e=>{if("comment"===e.type){let t=e.comment?.author.nickname||"알 수 없는 사용자",r=e.comment?.content||"",n=r.length>30?r.substring(0,30)+"...":r;return(0,a.jsxs)(a.Fragment,{children:[`${t}님이 회원님의 글에 댓글을 남겼습니다.`,a.jsx("br",{}),n]})}if("reply"!==e.type)return e.message||"새로운 알림이 있습니다.";{let t=e.comment?.author.nickname||"알 수 없는 사용자",r=e.comment?.content||"",n=r.length>30?r.substring(0,30)+"...":r;return(0,a.jsxs)(a.Fragment,{children:[`${t}님이 회원님의 댓글에 답글을 남겼습니다.`,a.jsx("br",{}),n]})}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.Z,{size:"large","aria-label":"댓글 알림",color:"inherit",onClick:e=>{s(e.currentTarget)},sx:{mr:1,color:"white"},children:a.jsx(C.Z,{badgeContent:u.length,color:"error",children:a.jsx(D.Z,{})})}),(0,a.jsxs)(p.Z,{anchorEl:r,open:!!r,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{width:350,maxHeight:500,overflow:"auto"}}},children:[(0,a.jsxs)(o.Z,{sx:{px:2,py:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(S.Z,{variant:"h6",fontWeight:"bold",children:"댓글 알림"}),u.length>0&&a.jsx(c.Z,{size:"small",onClick:Z,disabled:f.isPending,children:"모두 읽음"}),a.jsx(c.Z,{size:"small",onClick:()=>{e.push("/notifications")},sx:{fontSize:"16px"},children:"알림 페이지로 이동"})]}),a.jsx(I.Z,{}),m?a.jsx(o.Z,{sx:{display:"flex",justifyContent:"center",py:3},children:a.jsx(P.Z,{size:30})}):0===u.length?a.jsx(o.Z,{sx:{px:2,py:3,textAlign:"center"},children:a.jsx(S.Z,{color:"text.secondary",children:"새로운 댓글 알림이 없습니다"})}):u.map(e=>a.jsx(x.Z,{onClick:()=>w(e),sx:{py:2,px:2,display:"block","&:hover":{backgroundColor:"action.hover"},borderBottom:"1px solid",borderColor:"divider"},children:(0,a.jsxs)(o.Z,{children:[a.jsx(S.Z,{variant:"body2",sx:{fontWeight:e.isRead?"normal":"bold",mb:.5},children:T(e)}),a.jsx(S.Z,{variant:"caption",color:"text.secondary",children:v(e.createdAt)})]})},e.id)),u.length>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(I.Z,{}),a.jsx(x.Z,{onClick:()=>{e.push("/notifications"),j()},sx:{py:1.5,justifyContent:"center",color:"primary.main"},children:a.jsx(S.Z,{variant:"body2",children:"모든 댓글 알림 보기"})})]})]})]})};var U=r(23514);let E=()=>{let e=(0,g.useRouter)(),t=(0,z.NL)(),[r,s]=(0,n.useState)(null),{data:l}=(0,y.useSession)(),d=(0,n.useRef)([]),h=(0,n.useRef)(!0),{data:u=[],isLoading:m}=(0,k.a)({queryKey:["unreadChannelNotifications"],queryFn:F.xQ,refetchInterval:15e3,enabled:!!l?.user});(0,n.useEffect)(()=>{if(!u||h.current){d.current=u,h.current=!1;return}let e=d.current,t=u.filter(t=>!e.some(e=>e.id===t.id));t.length>0&&t.forEach(e=>{if("channel_post"===e.type){let t=window.showChannelPostNotification;t&&e.post&&t({authorName:e.post.author?.nickname||"알수없음",title:e.post.title,channelName:e.post.channelName||"채널",storyId:e.post.id,channelSlug:e.post.channelSlug||""})}}),d.current=u},[u]);let b=(0,B.D)({mutationFn:F.Ix,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadChannelNotifications"]})}}),f=(0,B.D)({mutationFn:F.Go,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadChannelNotifications"]})}}),j=()=>{s(null)},w=async t=>{if(t.isRead||await b.mutateAsync(t.id),"channel_post"===t.type&&t.post?.id&&t.post?.channelSlug){let r=`/channels/${t.post.channelSlug}/detail/story/${t.post.id}`;e.push(r)}j()},Z=async()=>{await f.mutateAsync()},v=e=>(0,A.Q)(new Date(e),{addSuffix:!0,locale:R.ko}),D=e=>{if("channel_post"!==e.type)return e.message||"새로운 알림이 있습니다.";{let t=e.post?.author?.nickname||"알 수 없는 사용자",r=e.post?.title||"",n=e.post?.channelName||"채널",o=r.length>30?r.substring(0,30)+"...":r;return(0,a.jsxs)(a.Fragment,{children:[n,"에 ",t,"님이 새 게시글을 올렸습니다.",a.jsx("br",{}),o]})}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.Z,{size:"large","aria-label":"채널 알림",color:"inherit",onClick:e=>{s(e.currentTarget)},sx:{mr:1,color:"white"},children:a.jsx(C.Z,{badgeContent:u.length,color:"secondary",children:a.jsx(U.Z,{})})}),(0,a.jsxs)(p.Z,{anchorEl:r,open:!!r,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{width:400,maxHeight:500,overflow:"auto"}}},children:[(0,a.jsxs)(o.Z,{sx:{px:2,py:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(S.Z,{variant:"h6",fontWeight:"bold",children:"채널 알림"}),u.length>0&&a.jsx(c.Z,{size:"small",onClick:Z,disabled:f.isPending,children:"모두 읽음"}),a.jsx(c.Z,{size:"small",onClick:()=>{e.push("/channel-notifications")},sx:{fontSize:"16px"},children:"채널 알림 페이지로 이동"})]}),a.jsx(I.Z,{}),m?a.jsx(o.Z,{sx:{display:"flex",justifyContent:"center",py:3},children:a.jsx(P.Z,{size:30})}):0===u.length?a.jsx(o.Z,{sx:{px:2,py:3,textAlign:"center"},children:a.jsx(S.Z,{color:"text.secondary",children:"새로운 채널 알림이 없습니다"})}):u.map(e=>a.jsx(x.Z,{onClick:()=>w(e),sx:{py:2,px:2,display:"block","&:hover":{backgroundColor:"action.hover"},borderBottom:"1px solid",borderColor:"divider"},children:(0,a.jsxs)(o.Z,{children:[a.jsx(S.Z,{variant:"body2",sx:{fontWeight:e.isRead?"normal":"bold",mb:.5},children:D(e)}),a.jsx(S.Z,{variant:"caption",color:"text.secondary",children:v(e.createdAt)})]})},e.id)),u.length>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(I.Z,{}),a.jsx(x.Z,{onClick:()=>{e.push("/channel-notifications"),j()},sx:{py:1.5,justifyContent:"center",color:"primary.main"},children:a.jsx(S.Z,{variant:"body2",children:"모든 채널 알림 보기"})})]})]})]})};var _=r(81430),W=r(44937),$=r(93937),N=r(77729);let M=(0,r(9380).ZP)(i.Z)(({theme:e})=>({position:"relative",width:48,height:48,borderRadius:"50%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",..."light"===e.palette.mode&&{backgroundColor:"rgba(99, 102, 241, 0.1)",color:"#6366f1",border:"2px solid rgba(99, 102, 241, 0.2)","&:hover":{backgroundColor:"rgba(99, 102, 241, 0.2)",transform:"scale(1.05)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.3)"}},..."dark"===e.palette.mode&&{backgroundColor:"rgba(139, 92, 246, 0.1)",color:"#a78bfa",border:"2px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 0 10px rgba(139, 92, 246, 0.2)","&:hover":{backgroundColor:"rgba(139, 92, 246, 0.2)",transform:"scale(1.05)",boxShadow:"0 0 20px rgba(139, 92, 246, 0.4), 0 0 40px rgba(139, 92, 246, 0.2)",border:"2px solid rgba(139, 92, 246, 0.5)"},"&:active":{transform:"scale(0.95)",boxShadow:"0 0 25px rgba(139, 92, 246, 0.6)"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"linear-gradient(45deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.1))",opacity:0,transition:"opacity 0.3s ease"},"&:hover::before":{opacity:1}},"& .MuiSvgIcon-root":{fontSize:"1.5rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"rotate(180deg)"}}})),q=()=>{let{isDarkMode:e,toggleTheme:t}=(0,N.f)();return(0,l.Z)(),a.jsx(_.Z,{title:e?"라이트 모드로 전환":"다크 모드로 전환",placement:"bottom",arrow:!0,children:a.jsx(M,{onClick:t,"aria-label":"테마 전환",size:"medium",children:e?a.jsx(W.Z,{}):a.jsx($.Z,{})})})};var O=r(58602),L=r(82151),H=r(64851),K=r(66071),Y=r(99086);function Q(){let e=(0,g.useRouter)(),t=(0,l.Z)(),{data:r,status:b}=(0,y.useSession)(),{showMessage:C}=(0,w.U)(e=>e),{setUserImageUrl:S,TopBarImageDelete:I}=(0,Z.a)(),{setCurrentPage:P}=(0,v.Z)(),[D,z]=(0,n.useState)(null),B={borderRadius:"12px",padding:"8px 20px",fontWeight:600,textTransform:"none",position:"relative",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",transition:"left 0.5s ease"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)","&::before":{left:"100%"}},"&:active":{transform:"translateY(0px)"}},{data:F,error:A,refetch:R}=(0,k.a)({queryKey:["userTopImage",r?.user.id],queryFn:async()=>{if(r?.user!=null){let e=await m.Z.get(`http://localhost:9999/api/auth/${r.user.id}`,{withCredentials:!0});if(null!=e.data.image.link)return e.data.image.link}},enabled:"authenticated"===b,staleTime:1/0}),U=async()=>{try{let[t]=await Promise.all([await m.Z.post("http://localhost:9999/api/auth/logout",{},{withCredentials:!0}),await (0,y.signOut)()]);200===t.status&&(C("로그아웃 성공","warning"),e.refresh())}catch(e){console.error("로그아웃 실패:",e)}},_=()=>{z(null)};return(0,a.jsxs)("div",{className:f().container,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx(j.default,{href:"/channels","aria-label":"Home",className:f().title,onClick:()=>P(1),style:{fontSize:"2rem",fontWeight:"bold",color:"dark"===t.palette.mode?"#A78BFA":"#7C3AED",padding:"0.5rem 1rem",borderRadius:"12px",textDecoration:"none",transition:"all 0.4s ease",display:"inline-block",letterSpacing:"1px",cursor:"pointer",textShadow:"dark"===t.palette.mode?"0 0 20px rgba(167, 139, 250, 0.4), 0 2px 4px rgba(0,0,0,0.3)":"0 0 15px rgba(124, 58, 237, 0.3), 0 2px 4px rgba(0,0,0,0.1)",filter:"dark"===t.palette.mode?"brightness(1.1)":"brightness(1)"},children:"Hobby Channel"}),a.jsx(q,{})]}),a.jsx(o.Z,{sx:{width:64,height:64,position:"relative",background:"dark"===t.palette.mode?"linear-gradient(145deg, #2a2a3e 0%, #1a1a2e 50%, #2a2a3e 100%)":"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 50%, #f8f9fa 100%)",borderRadius:"50%",padding:"4px",boxShadow:"dark"===t.palette.mode?`
              0 12px 40px rgba(0, 0, 0, 0.6),
              0 4px 12px rgba(139, 92, 246, 0.2),
              inset 0 2px 4px rgba(255, 255, 255, 0.1),
              inset 0 -2px 4px rgba(0, 0, 0, 0.4),
              inset 0 0 20px rgba(139, 92, 246, 0.05)
            `:`
              0 12px 40px rgba(0, 0, 0, 0.15),
              0 4px 12px rgba(218, 165, 32, 0.3),
              inset 0 2px 4px rgba(255, 255, 255, 0.9),
              inset 0 -2px 4px rgba(0, 0, 0, 0.1),
              inset 0 0 20px rgba(218, 165, 32, 0.1)
            `,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)","&::before":{content:'""',position:"absolute",top:-3,left:-3,right:-3,bottom:-3,background:"dark"===t.palette.mode?"conic-gradient(from 0deg, #8B5CF6, #06B6D4, #10B981, #F59E0B, #EF4444, #8B5CF6)":"conic-gradient(from 0deg, #DAA520, #FF6B6B, #4ECDC4, #45B7D1, #9C27B0, #DAA520)",borderRadius:"50%",opacity:.8,transition:"opacity 0.3s ease",zIndex:-1,animation:"frameGlow 6s linear infinite"},"&::after":{content:'""',position:"absolute",top:2,left:2,right:2,bottom:2,background:"dark"===t.palette.mode?"linear-gradient(145deg, rgba(42, 42, 62, 0.9), rgba(26, 26, 46, 0.9))":"linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(240, 240, 240, 0.9))",borderRadius:"50%",border:"dark"===t.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(218, 165, 32, 0.4)",zIndex:1},"&:hover":{transform:"scale(1.08) rotate(3deg)",boxShadow:"dark"===t.palette.mode?`
                0 16px 50px rgba(0, 0, 0, 0.8),
                0 6px 20px rgba(139, 92, 246, 0.4),
                inset 0 3px 6px rgba(255, 255, 255, 0.15),
                inset 0 -3px 6px rgba(0, 0, 0, 0.5),
                inset 0 0 30px rgba(139, 92, 246, 0.1)
              `:`
                0 16px 50px rgba(0, 0, 0, 0.25),
                0 6px 20px rgba(218, 165, 32, 0.5),
                inset 0 3px 6px rgba(255, 255, 255, 1),
                inset 0 -3px 6px rgba(0, 0, 0, 0.15),
                inset 0 0 30px rgba(218, 165, 32, 0.15)
              `,"&::before":{opacity:1,transform:"scale(1.1)"}},"@keyframes frameGlow":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}},children:a.jsx(d.Z,{src:F?`http://localhost:9999${F}`:"/assets/noprofileImage.png",sx:{width:56,height:56,position:"relative",zIndex:2,border:"dark"===t.palette.mode?"2px solid rgba(139, 92, 246, 0.5)":"2px solid rgba(218, 165, 32, 0.7)",boxShadow:"dark"===t.palette.mode?`
                0 0 25px rgba(139, 92, 246, 0.4),
                inset 0 3px 6px rgba(255, 255, 255, 0.1),
                inset 0 -3px 6px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.05)
              `:`
                0 6px 25px rgba(218, 165, 32, 0.4),
                inset 0 3px 6px rgba(255, 255, 255, 0.8),
                inset 0 -3px 6px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.3)
              `,transition:"all 0.3s ease",cursor:"pointer",filter:"contrast(1.08) saturate(1.15) brightness(1.02)","&:hover":{filter:"contrast(1.15) saturate(1.25) brightness(1.08)",transform:"scale(1.02)",boxShadow:"dark"===t.palette.mode?`
                  0 0 35px rgba(139, 92, 246, 0.6),
                  inset 0 4px 8px rgba(255, 255, 255, 0.15),
                  inset 0 -4px 8px rgba(0, 0, 0, 0.4),
                  0 0 0 2px rgba(255, 255, 255, 0.1)
                `:`
                  0 8px 35px rgba(218, 165, 32, 0.5),
                  inset 0 4px 8px rgba(255, 255, 255, 0.9),
                  inset 0 -4px 8px rgba(0, 0, 0, 0.15),
                  0 0 0 2px rgba(255, 255, 255, 0.5)
                `}}})}),(0,a.jsxs)("nav",{className:f().nav,children:[r?.user&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(T,{}),a.jsx(E,{})]}),!r?.user&&a.jsx(c.Z,{size:"medium",variant:"contained",onClick:()=>e.push("/login"),color:"info",sx:{...B,background:"dark"===t.palette.mode?"linear-gradient(135deg, #3B82F6 0%, #1E40AF 100%)":"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)","&:hover":{...B["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #1E40AF 0%, #1E3A8A 100%)":"linear-gradient(135deg, #1976D2 0%, #1565C0 100%)"}},children:"로그인"}),r?.user&&a.jsx(c.Z,{size:"medium",variant:"contained",onClick:U,color:"error",sx:{...B,background:"dark"===t.palette.mode?"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)":"linear-gradient(135deg, #F44336 0%, #D32F2F 100%)","&:hover":{...B["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)":"linear-gradient(135deg, #D32F2F 0%, #C62828 100%)"}},children:"로그아웃"}),!r?.user&&a.jsx(c.Z,{size:"medium",variant:"contained",onClick:()=>e.push("/signup"),color:"inherit",sx:{...B,background:"dark"===t.palette.mode?"linear-gradient(135deg, #6B7280 0%, #4B5563 100%)":"linear-gradient(135deg, #9E9E9E 0%, #757575 100%)",color:"white","&:hover":{...B["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #4B5563 0%, #374151 100%)":"linear-gradient(135deg, #757575 0%, #616161 100%)"}},children:"회원가입"}),r?.user&&a.jsx(c.Z,{size:"medium",variant:"contained",onClick:()=>e.push("/setting/profile"),color:"error",sx:{...B,background:"dark"===t.palette.mode?"linear-gradient(135deg, #10B981 0%, #059669 100%)":"linear-gradient(135deg, #4CAF50 0%, #388E3C 100%)","&:hover":{...B["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #059669 0%, #047857 100%)":"linear-gradient(135deg, #388E3C 0%, #2E7D32 100%)"}},children:"프로필"}),r?.user&&a.jsx(i.Z,{size:"large",edge:"end","aria-label":"settings menu","aria-haspopup":"true",color:"inherit",sx:{color:"white",borderRadius:"50%",padding:"10px",background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2))":"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(33, 150, 243, 0.1))",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease","&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(25, 118, 210, 0.2)",transform:"rotate(90deg) scale(1.1)",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"}},onClick:e=>{z(e.currentTarget)},children:a.jsx(s.Z,{})}),(0,a.jsxs)(p.Z,{anchorEl:D,open:!!D,onClose:_,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(35, 35, 60, 0.95))":"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.95))",backdropFilter:"blur(20px)",border:"dark"===t.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"12px",boxShadow:"dark"===t.palette.mode?"0 20px 40px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(139, 92, 246, 0.1)":"0 20px 40px rgba(0, 0, 0, 0.1)",overflow:"hidden",minWidth:200},"& .MuiMenuItem-root":{borderRadius:"8px",margin:"4px 8px",padding:"12px 16px",transition:"all 0.2s ease","&:hover":{background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1))":"linear-gradient(135deg, rgba(25, 118, 210, 0.05), rgba(33, 150, 243, 0.05))",transform:"translateX(4px)"}}},children:[(0,a.jsxs)(x.Z,{onClick:()=>{_(),e.push("/messages")},children:[a.jsx(h.Z,{children:a.jsx(O.Z,{fontSize:"small"})}),a.jsx(u.Z,{children:"쪽지"})]}),(0,a.jsxs)(x.Z,{onClick:()=>{_(),e.push("/recent-views")},children:[a.jsx(h.Z,{children:a.jsx(L.Z,{fontSize:"small"})}),a.jsx(u.Z,{children:"최근에 봤던 게시물"})]}),(0,a.jsxs)(x.Z,{onClick:()=>{_(),e.push("/scraps")},children:[a.jsx(h.Z,{children:a.jsx(H.Z,{fontSize:"small"})}),a.jsx(u.Z,{children:"스크랩"})]}),(0,a.jsxs)(x.Z,{onClick:()=>{_(),e.push("/blinds")},children:[a.jsx(h.Z,{children:a.jsx(K.Z,{fontSize:"small"})}),a.jsx(u.Z,{children:"블라인드"})]}),(0,a.jsxs)(x.Z,{onClick:()=>{_(),e.push("/reports")},children:[a.jsx(h.Z,{children:a.jsx(Y.Z,{fontSize:"small"})}),a.jsx(u.Z,{children:"신고 목록"})]})]})]})]})}},51864:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r(97247),n=r(28964),o=r(70380),i=r(24222),s=r(71804),l=r(42658),d=r(24091),c=r(74247),p=r(27150),x=r(34150),h=r(41755),u=r(9190),g=r(51370),m=r(88111),b=r(10863),f=r(19898),y=r(34178),j=r(99801),k=r.n(j),w=r(72497),Z=r(76510),v=r(64560),C=r(84957),S=r(83307),I=r(89262);let P=({channelId:e,channelCreatorId:t}={})=>{let{id:r}=(0,y.useParams)(),{showMessage:j}=(0,v.U)(e=>e),{data:P,status:D}=(0,f.useSession)(),z=(0,h.NL)(),B=(0,o.Z)(),F=(0,I.A)(),[A,R]=(0,n.useState)(""),[T,U]=(0,n.useState)(null),[E,_]=(0,n.useState)([]),[W,$]=(0,n.useState)(1),N=C.bP,[M,q]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=window.location.hash;e.startsWith("#comment-")&&O(parseInt(e.replace("#comment-","")))},[]);let O=async e=>{try{let{page:t}=(await b.Z.get(`http://localhost:9999/api/story/comment/${r}/page/${e}?limit=${N}`)).data;t!==W?($(t),setTimeout(()=>{L(e.toString())},1500)):setTimeout(()=>{L(e.toString())},1e3)}catch(t){console.error("댓글 페이지를 찾는 중 오류 발생:",t),setTimeout(()=>{L(e.toString())},1e3)}},L=e=>{let t=document.getElementById(`comment-${e}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.backgroundColor="#fff3cd",t.style.border="2px solid #ffc107",setTimeout(()=>{t.style.backgroundColor="",t.style.border=""},3e3))},{data:H,isLoading:K,isError:Y,refetch:Q}=(0,u.a)({queryKey:["story","detail","comments",r,W,N],queryFn:async()=>(await b.Z.post(`http://localhost:9999/api/story/detail/comment/${r}`,{page:W,limit:N})).data,enabled:!!r&&"loading"!==D,placeholderData:g.Wk,refetchOnWindowFocus:!1});(0,n.useEffect)(()=>{if(H){_(H.processedComments),q(H.totalCount);let e=window.location.hash;if(e.startsWith("#comment-")){let t=e.replace("#comment-","");setTimeout(()=>{L(t)},500)}}},[H]);let G=(0,m.D)({mutationFn:async({storyId:e,content:t,parentId:r,authorId:a})=>(await b.Z.post(`http://localhost:9999/api/story/comment/${e}`,{storyId:e,content:t,parentId:r,authorId:a},{withCredentials:!0})).data,onSuccess:async e=>{R("");let t=e.commentId,a=await Q();if(a.data){let e=a.data.processedComments,n=Math.ceil(a.data.totalCount/N);e.some(e=>e.id===t)?z.invalidateQueries({queryKey:["story","detail","comments",r]}):$(n)}},onError:()=>{j("댓글 등록 오류가 발생했습니다.","error")}}),X=(0,m.D)({mutationFn:async({commentId:e,storyId:t})=>(await b.Z.put(`http://localhost:9999/api/story/comment/${e}`,{storyId:t},{withCredentials:!0})).status,onSuccess:async e=>{if(200===e||201===e){let e=await Q();if(e.data){let t=Math.ceil(e.data.totalCount/N)||1;W>t?$(t):z.invalidateQueries({queryKey:["story","detail","comments",r]})}}},onError:()=>{j("댓글 삭제 오류가 발생했습니다.","error")}}),V=(0,m.D)({mutationFn:async({commentId:e,newContent:t})=>(await b.Z.patch(`http://localhost:9999/api/story/comment/${e}`,{content:t},{withCredentials:!0})).status,onSuccess:e=>{(200===e||201===e)&&Q()},onError:()=>{j("댓글 수정 오류가 발생했습니다.","error")}}),[J,ee]=(0,n.useState)(!1),[et,er]=(0,n.useState)(null),[ea,en]=(0,n.useState)({open:!1,commentId:null,content:""}),eo=e=>{er(e),ee(!0)},ei=async()=>{ea.commentId&&(X.mutate({commentId:ea.commentId,storyId:r}),en({open:!1,commentId:null,content:""}),j("댓글이 삭제되었습니다.","success"))};return(0,a.jsxs)(i.Z,{sx:{width:"100%",border:"dark"===B.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid #ddd",backgroundColor:"dark"===B.palette.mode?"rgba(26, 26, 46, 0.5)":"#ffffff",padding:2,mt:2,mb:2,borderRadius:3,boxShadow:"dark"===B.palette.mode?"0 4px 20px rgba(139, 92, 246, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[K&&a.jsx(w.default,{}),Y&&a.jsx(p.Z,{severity:"error",children:"댓글을 불러오는 중 에러가 발생했습니다. 잠시 후 다시 시도해주세요."}),J&&a.jsx(Z.Z,{open:J,title:"댓글 삭제",description:"댓글을 삭제하시겠습니까? 삭제된 댓글은 복구할 수 없습니다.",onConfirm:()=>{null!==et&&(X.mutate({commentId:et,storyId:r}),er(null),ee(!1))},onCancel:()=>{er(null),ee(!1)},confirmText:"삭제",cancelText:"취소"}),ea.open&&a.jsx(Z.Z,{open:ea.open,title:"\uD83D\uDEE1️ 관리자 권한으로 댓글 삭제",description:`다음 댓글을 삭제하시겠습니까?

"${ea.content}"

⚠️ 이 작업은 되돌릴 수 없습니다.`,onConfirm:ei,onCancel:()=>{en({open:!1,commentId:null,content:""})},confirmText:F.isLoading?"삭제 중...":"삭제",cancelText:"취소"}),a.jsx(l.Z,{variant:"h6",gutterBottom:!0,sx:{color:"dark"===B.palette.mode?"#a78bfa":"#1e293b",fontWeight:700,ml:1},children:"댓글"}),0===E.length&&!K&&a.jsx(i.Z,{sx:{textAlign:"center",padding:2},children:(0,a.jsxs)(l.Z,{variant:"body1",color:"textSecondary",children:["아직 댓글이 없습니다.",a.jsx("br",{}),"첫 번째 댓글을 작성해보세요!"]})}),a.jsx(({comments:r,toggleReply:p,handleReplySubmit:x,replyTo:h,handleEditSubmit:u,handleAdminDeleteComment:g})=>{let[m,b]=(0,n.useState)(""),[f,y]=(0,n.useState)(null),[j,w]=(0,n.useState)(""),Z=(0,o.Z)();return a.jsx(i.Z,{children:r.map(r=>(0,a.jsxs)(i.Z,{id:`comment-${r.id}`,sx:{display:"flex",flexDirection:"column",border:"dark"===Z.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid #ddd",backgroundColor:"dark"===Z.palette.mode?"rgba(26, 26, 46, 0.8)":"#ffffff",ml:`${30*Math.min(r.depth||0,4)}px`,p:1,mb:1,transition:"all 0.3s ease",borderRadius:2,"&:hover":{border:"dark"===Z.palette.mode?"1px solid rgba(139, 92, 246, 0.5)":"1px solid #bbb",boxShadow:"dark"===Z.palette.mode?"0 4px 15px rgba(139, 92, 246, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)"}},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",backgroundColor:"dark"===Z.palette.mode?"rgba(139, 92, 246, 0.15)":"#e6e6ff",p:.5,borderRadius:1,mb:1},children:[a.jsx(s.Z,{src:`http://localhost:9999${r.link}`,sx:{width:32,height:32,mr:1}}),a.jsx(l.Z,{variant:"body2",sx:{fontWeight:"bold",color:"dark"===Z.palette.mode?"#a78bfa":"#4f46e5"},children:r.nickname}),(0,a.jsxs)(i.Z,{sx:{ml:"auto",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[a.jsx(l.Z,{variant:"caption",sx:{color:"dark"===Z.palette.mode?"#94a3b8":"gray"},children:k()(r.updated_at).format("YYYY-MM-DD")}),a.jsx(l.Z,{variant:"caption",sx:{color:"dark"===Z.palette.mode?"#94a3b8":"gray"},children:k()(r.updated_at).format("HH:mm:ss")})]})]}),f===r.id?(0,a.jsxs)(i.Z,{sx:{mt:1},children:[a.jsx(d.Z,{fullWidth:!0,value:j,onChange:e=>w(e.target.value),placeholder:"댓글 수정...",size:"small"}),(0,a.jsxs)(i.Z,{sx:{mt:1,display:"flex",gap:1},children:[a.jsx(c.Z,{size:"small",variant:"contained",onClick:()=>{u(r.id,j),y(null),w("")},children:"저장"}),a.jsx(c.Z,{size:"small",variant:"outlined",onClick:()=>{y(null),w("")},children:"취소"})]})]}):(0,a.jsxs)(l.Z,{variant:"body1",sx:{mt:1,color:"dark"===Z.palette.mode?"#e2e8f0":"#1e293b",lineHeight:1.6},children:[r.parentNickname&&(0,a.jsxs)(i.Z,{component:"span",sx:{fontWeight:"bold",backgroundColor:"dark"===Z.palette.mode?"rgba(6, 182, 212, 0.8)":"#FFEB3B",color:"dark"===Z.palette.mode?"#0f0f23":"#1e293b",padding:"2px 8px",borderRadius:"6px",mr:1,fontSize:"0.875rem",boxShadow:"dark"===Z.palette.mode?"0 0 8px rgba(6, 182, 212, 0.3)":"none"},children:["@",r.parentNickname]}),r.userId?a.jsx(S.Z,{userId:r.userId,type:"comment",children:r.content}):r.content]}),null!=r.nickname&&(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",mt:1},children:[P?.user.id&&a.jsx(c.Z,{size:"small",variant:"dark"===Z.palette.mode?"contained":"outlined",onClick:()=>p(r.id),color:"primary",sx:{textTransform:"none",..."dark"===Z.palette.mode&&{background:"linear-gradient(45deg, #3b82f6, #1e40af)","&:hover":{background:"linear-gradient(45deg, #2563eb, #1d4ed8)"}}},children:"답글"}),r.userId===P?.user.id&&a.jsx(a.Fragment,{children:f!==r.id&&a.jsx(c.Z,{size:"small",variant:"dark"===Z.palette.mode?"contained":"outlined",onClick:()=>{y(r.id),w(r.content)},color:"secondary",sx:{textTransform:"none",ml:1,..."dark"===Z.palette.mode&&{background:"linear-gradient(45deg, #8b5cf6, #7c3aed)","&:hover":{background:"linear-gradient(45deg, #7c3aed, #6d28d9)"}}},children:"수정"})}),(r.userId===P?.user.id||F.hasAdminPermission({channelId:e,creatorId:t}))&&a.jsx(c.Z,{size:"small",onClick:()=>{F.hasAdminPermission({channelId:e,creatorId:t})?g(r.id,r.content):eo(r.id)},variant:"dark"===Z.palette.mode?"contained":"outlined",color:"error",sx:{textTransform:"none",ml:1,..."dark"===Z.palette.mode&&{background:"linear-gradient(45deg, #ef4444, #dc2626)","&:hover":{background:"linear-gradient(45deg, #dc2626, #b91c1c)"}}},disabled:F.isLoading,children:F.hasAdminPermission({channelId:e,creatorId:t})?"관리자 삭제":"삭제"})]}),h===r.id&&(0,a.jsxs)(i.Z,{sx:{mt:1},children:[a.jsx(d.Z,{fullWidth:!0,value:m,onChange:e=>b(e.target.value),placeholder:"답글을 입력하세요...",size:"small"}),a.jsx(c.Z,{onClick:()=>{x(r.id,m),b("")},variant:"contained",size:"small",sx:{mt:1,..."dark"===Z.palette.mode&&{background:"linear-gradient(45deg, #10b981, #059669)","&:hover":{background:"linear-gradient(45deg, #059669, #047857)",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transform:"translateY(-1px)"}}},children:"댓글 작성"})]})]},r.id))})},{comments:E,toggleReply:e=>{U(t=>t===e?null:e)},handleReplySubmit:(e,t)=>{t.trim()&&(G.mutate({storyId:r,content:t,parentId:e,authorId:P?.user.id}),U(null))},replyTo:T,handleEditSubmit:(e,t)=>{t.trim()&&V.mutate({commentId:e,newContent:t})},handleAdminDeleteComment:(e,t)=>{en({open:!0,commentId:e,content:t})}}),P?.user?.id&&(0,a.jsxs)(i.Z,{sx:{width:"100%",border:"dark"===B.palette.mode?"1px solid rgba(139, 92, 246, 0.4)":"1px solid #ddd",backgroundColor:"dark"===B.palette.mode?"rgba(26, 26, 46, 0.8)":"#ffffff",borderRadius:"8px",padding:2,display:"flex",flexDirection:"column",boxShadow:"dark"===B.palette.mode?"0 4px 15px rgba(139, 92, 246, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",marginBottom:2},children:[P?.user?.image&&a.jsx(s.Z,{src:`http://localhost:9999${P?.user?.image}`,sx:{width:40,height:40,marginRight:1}}),a.jsx(l.Z,{variant:"body1",sx:{fontWeight:"bold",color:"dark"===B.palette.mode?"#a78bfa":"#4f46e5"},children:P?.user?.nickname})]}),a.jsx(d.Z,{fullWidth:!0,multiline:!0,minRows:2,maxRows:4,placeholder:"나쁜말 쓰면 큰일남",value:A,onChange:e=>R(e.target.value),sx:{marginBottom:1}}),(0,a.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[a.jsx(l.Z,{variant:"body2",sx:{color:"dark"===B.palette.mode?"#94a3b8":"gray",marginBottom:2},children:"내 마음에 안들면 댓글 삭제"}),a.jsx(c.Z,{onClick:()=>{A.trim()&&(G.mutate({storyId:r,content:A,parentId:null,authorId:P?.user.id}),R(""))},variant:"contained",sx:{background:"dark"===B.palette.mode?"linear-gradient(45deg, #8b5cf6 30%, #06b6d4 90%)":"#007BFF",color:"white",padding:"8px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,"&:hover":{background:"dark"===B.palette.mode?"linear-gradient(45deg, #7c3aed 30%, #0891b2 90%)":"#0056b3",boxShadow:"dark"===B.palette.mode?"0 6px 20px rgba(139, 92, 246, 0.4)":"0 4px 12px rgba(0, 123, 255, 0.3)",transform:"translateY(-1px)"}},children:"댓글 작성"})]})]}),P?.user?.id&&!P?.user?.nickname&&(0,a.jsxs)(i.Z,{sx:{mt:2,textAlign:"center"},children:[a.jsx(l.Z,{variant:"body2",color:"error",children:"댓글 작성을 위한, 로그인 정보를 가져오는 중 문제가 발생했습니다."}),a.jsx(c.Z,{variant:"dark"===B.palette.mode?"contained":"outlined",color:"primary",onClick:()=>Q(),sx:{mt:1,..."dark"===B.palette.mode&&{background:"linear-gradient(45deg, #3b82f6, #1e40af)","&:hover":{background:"linear-gradient(45deg, #2563eb, #1d4ed8)",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transform:"translateY(-1px)"}}},children:"다시 시도"})]}),a.jsx(i.Z,{sx:{display:"flex",justifyContent:"center",flex:1,mt:2},children:a.jsx(x.Z,{count:Math.ceil(M/N),page:W,onChange:(e,t)=>{$(t)},sx:{"& .MuiPaginationItem-root":{color:"dark"===B.palette.mode?"#e2e8f0":"#374151",borderColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.3)":"#d1d5db",backgroundColor:"dark"===B.palette.mode?"rgba(26, 26, 46, 0.6)":"#f9fafb",fontWeight:600,"&:hover":{backgroundColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.2)":"#e5e7eb",borderColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.5)":"#9ca3af"},"&.Mui-selected":{backgroundColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.8)":"#3b82f6",color:"#ffffff",borderColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 1)":"#3b82f6",fontWeight:700,"&:hover":{backgroundColor:"dark"===B.palette.mode?"rgba(139, 92, 246, 0.9)":"#2563eb"}},"&.MuiPaginationItem-previousNext":{color:"dark"===B.palette.mode?"#a78bfa":"#4f46e5",fontWeight:600}}}})})]})}},76510:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r(97247);r(28964);var n=r(70380),o=r(19065),i=r(77528),s=r(66122),l=r(44171),d=r(73275),c=r(74247);let p=({open:e,title:t,description:r,onConfirm:p,onCancel:x,confirmText:h="확인",cancelText:u="취소"})=>{let g=(0,n.Z)();return(0,a.jsxs)(o.Z,{open:e,onClose:x,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",sx:{"& .MuiDialog-paper":{borderRadius:"16px",padding:"10px",backgroundColor:"dark"===g.palette.mode?"rgba(26, 26, 46, 0.95)":"#f9f9f9",boxShadow:"dark"===g.palette.mode?"0px 8px 25px rgba(139, 92, 246, 0.15)":"0px 4px 10px rgba(0, 0, 0, 0.1)",border:"dark"===g.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"}},children:[a.jsx(i.Z,{id:"confirm-dialog-title",sx:{fontWeight:"bold",fontSize:"1.5rem",textAlign:"center",color:"dark"===g.palette.mode?"#a78bfa":"#3f51b5"},children:t}),a.jsx(s.Z,{sx:{display:"flex",justifyContent:"center",textAlign:"center",padding:"12px 24px"},children:a.jsx(l.Z,{id:"confirm-dialog-description",sx:{fontSize:"1rem",color:"dark"===g.palette.mode?"#e2e8f0":"#555",whiteSpace:"pre-line"},children:r})}),(0,a.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"center",gap:"16px",padding:"8px"},children:[a.jsx(c.Z,{onClick:x,variant:"outlined",color:"primary",sx:{textTransform:"none",fontWeight:"bold",borderRadius:"8px",padding:"8px 16px",color:"dark"===g.palette.mode?"#a78bfa":"#3f51b5",borderColor:"dark"===g.palette.mode?"rgba(139, 92, 246, 0.5)":"#3f51b5","&:hover":{backgroundColor:"dark"===g.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(63, 81, 181, 0.04)",borderColor:"dark"===g.palette.mode?"rgba(139, 92, 246, 0.8)":"#3f51b5"}},children:u}),a.jsx(c.Z,{onClick:p,variant:"contained",color:"error",sx:{textTransform:"none",fontWeight:"bold",borderRadius:"8px",padding:"8px 16px",backgroundColor:"dark"===g.palette.mode?"#dc2626":"#f44336","&:hover":{backgroundColor:"dark"===g.palette.mode?"#b91c1c":"#d32f2f"}},children:h})]})]})}},72497:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(97247),n=r(53187),o=r(70380);function i(){let e=(0,o.Z)();return a.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"dark"===e.palette.mode?"rgba(18, 18, 18, 0.3)":"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(1px)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.3s ease"},children:(0,a.jsxs)("div",{style:{textAlign:"center",backgroundColor:"dark"===e.palette.mode?"#1e1e1e":"#ffffff",padding:"24px 32px",borderRadius:"12px",boxShadow:"dark"===e.palette.mode?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 8px 24px rgba(0, 0, 0, 0.15)",border:"dark"===e.palette.mode?"1px solid #333333":"1px solid #e0e0e0"},children:[a.jsx(n.Z,{size:48,thickness:4,sx:{color:"dark"===e.palette.mode?"#bb86fc":"#1976d2",marginBottom:1}}),a.jsx("div",{style:{marginTop:"12px",fontSize:"14px",color:"dark"===e.palette.mode?"#e0e0e0":"#666666",fontWeight:500},children:"로딩 중..."})]})})}r(28964)},78440:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var a=r(97247);r(28964);var n=r(8906),o=r(63751),i=r(53246),s=r(27150);function l(e){return a.jsx(n.Z,{...e})}function d(e){return a.jsx(o.Z,{...e,direction:"up"})}function c({open:e,setOpen:t,message:r,severity:n="success",transition:o="fade"}){let c=(e,r)=>{"clickaway"!==r&&t(!1)};return a.jsx(i.Z,{open:e,autoHideDuration:2e3,onClose:c,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:(()=>{switch(o){case"grow":return l;case"slide":return d}})(),children:a.jsx(s.Z,{onClose:c,severity:n,children:r})})}var p=r(64560);function x(){let{messageState:e,messageContent:t,messageStyle:r,hideMessage:n,messageTransition:o}=(0,p.U)(e=>e);return a.jsx(a.Fragment,{children:e&&a.jsx(c,{open:e,setOpen:()=>{n()},message:t,severity:r,transition:o})})}},12430:(e,t,r)=>{"use strict";r.d(t,{default:()=>D});var a=r(97247),n=r(34178),o=r(9190),i=r(51864),s=r(28964),l=r.n(s),d=r(44597);function c(){return a.jsx("div",{style:{width:"100%"},children:a.jsx(d.default,{src:"/assets/right.jpg",alt:"Right Icon",width:0,height:0,sizes:"100vw",style:{width:"100%",height:"auto"}})})}var p=r(94742),x=r(81090),h=r(42658),u=r(78708),g=r(82891),m=r(24222),b=r(13142),f=r(40998),y=r(67243),j=r(10863),k=r(99801),w=r.n(k),Z=r(62013),v=r.n(Z),C=r(84957);function S(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),r=e?.slug,{data:i}=(0,o.a)({queryKey:["channelInfo",r],queryFn:async()=>{if(!r)throw Error("Channel slug is required");return(await j.Z.get(`http://localhost:9999/api/channels/slug/${r}`)).data},enabled:!!r,staleTime:6e5}),{data:s,isLoading:d,error:c}=(0,o.a)({queryKey:["channelTopStories",i?.id,C.jL,C.oi],queryFn:async()=>{if(!i?.id)return{results:[],total:0};let e=`http://localhost:9999/api/story/pageTableData?channelId=${i.id}&minRecommend=${C.jL}&limit=${C.oi}&offset=0`;return(await j.Z.get(e)).data},enabled:!!i?.id,staleTime:3e5}),k=s?.results||[];if(d)return a.jsx(p.Z,{sx:{mb:2,boxShadow:2},children:a.jsx(x.Z,{sx:{p:2},children:a.jsx(h.Z,{variant:"h6",color:"text.secondary",children:"\uD83D\uDD04 개념글 로딩 중..."})})});if(c)return a.jsx(p.Z,{sx:{mb:2,boxShadow:2},children:a.jsx(x.Z,{sx:{p:2},children:(0,a.jsxs)(h.Z,{variant:"h6",color:"error",children:["❌ 개념글 로딩 에러: ",c.message]})})});if(!k||0===k.length)return a.jsx(p.Z,{sx:{mb:2,boxShadow:2},children:a.jsx(x.Z,{sx:{p:2,display:"flex",justifyContent:"center"},children:a.jsx(h.Z,{variant:"h6",color:"text.secondary",children:"\uD83D\uDCED 추천 개념글이 없습니다"})})});let Z=e=>{t.push(`/channels/${r}/detail/story/${e}`)};return a.jsx(p.Z,{sx:{mb:1,boxShadow:2},children:(0,a.jsxs)(x.Z,{sx:{p:2},children:[a.jsx(h.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main",display:"flex",alignItems:"center"},children:"\uD83D\uDD25 이 채널의 개념글"}),a.jsx(u.Z,{sx:{p:0},children:k.map((e,t)=>(0,a.jsxs)(l().Fragment,{children:[a.jsx(g.ZP,{sx:{p:0,cursor:"pointer",borderRadius:1,"&:hover":{bgcolor:"action.hover"}},onClick:()=>Z(e.id),children:(0,a.jsxs)(m.Z,{sx:{width:"100%"},children:[(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[a.jsx(h.Z,{variant:"body2",sx:{fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.title}),"question"===e.category&&a.jsx(b.Z,{label:"질문",size:"small",color:"primary",sx:{fontSize:"0.7rem",height:"20px"}})]}),(0,a.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(h.Z,{variant:"caption",color:"text.secondary",children:[e.nickname," \xb7 ",w()(e.created_at).fromNow()]}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:.5,mr:1},children:[a.jsx(y.Z,{sx:{fontSize:"14px",color:"error.main"}}),a.jsx(h.Z,{variant:"caption",color:"error.main",sx:{fontWeight:"bold"},children:e.recommend_Count})]})]})]})}),t<k.length-1&&a.jsx(f.Z,{sx:{mx:1}})]},e.id))})]})})}w().extend(v());var I=r(73882),P=r(91146);function D(){let{isCommentOpen:e}=(0,I.x)(),t=(0,n.usePathname)(),r=t?.startsWith("/channels/"),s=r&&t?t.split("/")[2]:null,{data:l}=(0,o.a)({queryKey:["channel","slug",s],queryFn:()=>(0,P.u3)(s),enabled:!!s&&e,staleTime:3e5});return e?a.jsx(i.Z,{channelId:l?.id,channelCreatorId:l?.creator?.id}):(0,a.jsxs)(a.Fragment,{children:[r&&a.jsx(S,{}),a.jsx(c,{})]})}},24446:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var a=r(97247),n=r(28086),o=r(3951),i=r(70380);let s=()=>{let e=(0,i.Z)();return a.jsx(n.Z,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"맨 위로 이동",sx:{position:"fixed",bottom:64,right:50,background:"dark"===e.palette.mode?"linear-gradient(45deg, #8b5cf6, #06b6d4)":"linear-gradient(45deg, #1E90FF, #C0C0C0)",color:"#fff",boxShadow:"dark"===e.palette.mode?"0px 4px 15px rgba(139, 92, 246, 0.4)":"0px 3px 5px rgba(0, 0, 0, 0.2)","&:hover":{background:"dark"===e.palette.mode?"linear-gradient(45deg, #7c3aed, #0891b2)":"linear-gradient(45deg, #1C86EE, #B0B0B0)",boxShadow:"dark"===e.palette.mode?"0px 6px 20px rgba(139, 92, 246, 0.6)":"0px 4px 8px rgba(0, 0, 0, 0.3)",transform:"dark"===e.palette.mode?"translateY(-2px)":"scale(1.05)"}},children:a.jsx(o.Z,{})})}},84957:(e,t,r)=>{"use strict";r.d(t,{D$:()=>a,Tq:()=>n,VI:()=>s,bP:()=>i,jL:()=>o,oi:()=>l});let a=6,n=6,o=1,i=6,s=6,l=5},89262:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(28964),n=r(19898),o=r(84274);let i={forceDeleteStory:async e=>(await o.Z.delete(`/api/story/admin/force-delete/${e}`)).data,channelAdminDeleteStory:async e=>(await o.Z.delete(`/api/story/admin/channel-delete/${e}`)).data,batchDeleteStories:async e=>(await o.Z.delete("/api/story/admin/batch-delete",{data:{storyIds:e}})).data},s={utils:{deleteByPermission:async(e,t,r)=>{if(r.isSuperAdmin){if("story"===e)return i.forceDeleteStory(t);throw Error("댓글 삭제는 일반 삭제 함수를 사용하세요.")}if(r.isChannelAdmin){if("story"===e)return i.channelAdminDeleteStory(t);throw Error("댓글 삭제는 일반 삭제 함수를 사용하세요.")}throw Error("관리자 권한이 없습니다.")},batchDeleteByPermission:async(e,t,r)=>{if(!r.isSuperAdmin)throw Error("일괄 삭제는 총 관리자만 가능합니다.");if("story"===e)return i.batchDeleteStories(t);throw Error("댓글 일괄 삭제는 지원되지 않습니다.")}}},l=()=>{let{data:e}=(0,n.useSession)(),[t,r]=(0,a.useState)(!1),o=e?.user||null,i=()=>o?.is_super_admin===!0,l=(0,a.useCallback)(e=>!!o&&"number"!=typeof e&&(e?.creatorId?o.id===e.creatorId:(e?.channelId||e?.channelSlug,!1)),[o]),d=(0,a.useCallback)(e=>i()||l(e),[l]),c=e=>{let t=i(),r=l(e);return{isSuperAdmin:t,isChannelAdmin:r,hasAnyAdminPermission:t||r}},p=async(e,t,a,n)=>{try{r(!0);let n=c(t);if(!n.hasAnyAdminPermission)throw Error("관리자 권한이 없습니다.");await s.utils.deleteByPermission("story",e,n),a?.()}catch(t){let e=t instanceof Error?t:Error("알 수 없는 오류가 발생했습니다.");n?.(e)}finally{r(!1)}},x=async(e,t,a,n)=>{try{r(!0);let n=c();if(!n.isSuperAdmin)throw Error("일괄 삭제는 총 관리자만 가능합니다.");let o=await s.utils.batchDeleteByPermission(e,t,n);a?.(o.deletedCount)}catch(t){let e=t instanceof Error?t:Error("알 수 없는 오류가 발생했습니다.");n?.(e)}finally{r(!1)}};return{isSuperAdmin:i(),isChannelAdmin:l,hasAdminPermission:d,getAdminPermission:c,currentUser:o,getAdminBadgeText:e=>i()?"총관리자":l(e)?"채널관리자":"",getAdminBadgeColor:e=>i()?"error":l(e)?"warning":"default",deleteStory:p,batchDelete:x,isLoading:t}}},85295:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(97247),n=r(24222),o=r(42658),i=r(74247),s=r(34178);let l=()=>{let e=(0,s.useRouter)();return(0,a.jsxs)(n.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",backgroundColor:"#f5f5f5",padding:4},children:[a.jsx("img",{src:"/assets/nn.png",alt:"Not Found",style:{width:"300px",height:"auto",marginBottom:"20px"}}),a.jsx(o.Z,{variant:"h6",sx:{marginBottom:3,color:"#616161"},children:"페이지를 찾을 수 없습니다."}),a.jsx(i.Z,{variant:"contained",color:"primary",onClick:()=>{e.push("/")},sx:{textTransform:"none",padding:"10px 20px",fontSize:"1rem"},children:"홈으로 돌아가기"})]})}},55592:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});let a=(0,r(99713).U)((e,t)=>({blindUsers:[],blindedUserIds:new Set,setBlindUsers:t=>e({blindUsers:t,blindedUserIds:new Set(t.map(e=>e.targetUserId))}),addBlindUser:t=>e(e=>{let r=[...e.blindUsers,t],a=new Set(e.blindedUserIds);return a.add(t.targetUserId),{blindUsers:r,blindedUserIds:a}}),removeBlindUser:t=>e(e=>{let r=e.blindUsers.find(e=>e.id===t),a=e.blindUsers.filter(e=>e.id!==t),n=new Set(e.blindedUserIds);return r&&n.delete(r.targetUserId),{blindUsers:a,blindedUserIds:n}}),isUserBlinded:e=>t().blindedUserIds.has(e),clearBlindUsers:()=>e({blindUsers:[],blindedUserIds:new Set})}))},96172:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var a=r(99713),n=r(92377);let o=(0,a.U)()((0,n.tJ)((e,t)=>({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1,setChannelPageData:(t,r,a,n)=>{e({currentChannelSlug:t,currentPage:r,currentCategory:a,stories:n,isLoading:!1})},clearChannelPageData:()=>{e({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1})},updateStory:(r,a)=>{let{stories:n}=t();e({stories:n.map(e=>e.id===r?{...e,...a}:e)})}}),{name:"channel-page-storage",partialize:e=>({currentChannelSlug:e.currentChannelSlug,currentPage:e.currentPage,currentCategory:e.currentCategory,stories:e.stories})}))},73882:(e,t,r)=>{"use strict";r.d(t,{x:()=>a});let a=(0,r(99713).U)(e=>({isCommentOpen:!1,openCloseComments:t=>e({isCommentOpen:t})}))},64560:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});let a=(0,r(99713).U)(e=>({messageState:!1,messageContent:"",messageStyle:"success",messageTransition:"fade",showMessage:(t,r="success",a="fade")=>e({messageState:!0,messageContent:t,messageStyle:r,messageTransition:a}),hideMessage:()=>e({messageState:!1,messageContent:""})}))},72688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(99713).U)(e=>({currentPage:1,setCurrentPage:t=>e({currentPage:t})}))},99084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(99713),n=r(91146);let o=(0,a.U)((e,t)=>({subscribedChannels:[],loading:!1,error:null,isInitialized:!1,loadSubscriptions:async()=>{let{isInitialized:r}=t();if(!r)try{e({loading:!0,error:null});let t=await (0,n.ec)();e({subscribedChannels:t,loading:!1,isInitialized:!0})}catch(t){if(t?.response?.status===401){e({loading:!1,error:null});return}console.error("구독 채널 목록을 불러오는데 실패했습니다:",t),e({error:"구독 채널 목록을 불러오는데 실패했습니다.",loading:!1})}},addSubscription:r=>{let{subscribedChannels:a}=t();a.find(e=>e.id===r.id)||e({subscribedChannels:[...a,r]})},removeSubscription:r=>{let{subscribedChannels:a}=t();e({subscribedChannels:a.filter(e=>e.id!==r)})},isSubscribed:e=>{let{subscribedChannels:r}=t();return r.some(t=>t.id===e)},clearSubscriptions:()=>{e({subscribedChannels:[],error:null,isInitialized:!1})}}))},77729:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var a=r(99713),n=r(92377);let o=(0,a.U)()((0,n.tJ)(e=>({isDarkMode:!1,toggleTheme:()=>e(e=>({isDarkMode:!e.isDarkMode})),setTheme:t=>e({isDarkMode:t})}),{name:"theme-storage"}))},16803:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});let a=(0,r(99713).U)(e=>({userImageUrl:"",setUserImageUrl:t=>e({userImageUrl:t}),TopBarImageDelete:!1,setTopBarImageDelete:()=>e({TopBarImageDelete:!0})}))},43460:e=>{e.exports={container:"TopBar_container__qLF19",title:"TopBar_title__3rYyW",nav:"TopBar_nav___ZPXR"}},4969:e=>{e.exports={main_container:"layout_main_container__azbLo",content_wrapper:"layout_content_wrapper__lLOxD",main_content:"layout_main_content__GTutG",right_section:"layout_right_section__Quqe0"}},4050:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(45347).createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\common\Loading.tsx#default`)},60246:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j,metadata:()=>y});var a=r(72051),n=r(37233),o=r.n(n);r(5023);var i=r(45347);let s=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\NavMenuBar.tsx#default`),l=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\Provider\RQProvider.tsx#default`),d=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\TopBar.tsx#default`),c=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\Provider\AuthSessionCom.tsx#default`),p=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\common\MessageView.tsx#default`),x=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\common\RightView.tsx#default`),h=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\Provider\SubscriptionProvider.tsx#default`);var u=r(4969),g=r.n(u);let m=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\common\ScrollUpButton.tsx#default`),b=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\Provider\ThemeProvider.tsx#default`),f=(0,i.createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\components\Provider\BrowserNotification.tsx#default`),y={title:"Hobby Channel",description:"Hobby Channel 게시판",icons:{icon:"/assets/logo.png",apple:"/assets/logo.png"}};function j({children:e}){return a.jsx("html",{lang:"en",className:"alwaysScroll",children:a.jsx("body",{className:o().className,children:a.jsx(b,{children:a.jsx(l,{children:a.jsx(c,{children:a.jsx(f,{children:(0,a.jsxs)(h,{children:[a.jsx(d,{}),(0,a.jsxs)("div",{className:g().main_container,children:[(0,a.jsxs)("div",{className:g().content_wrapper,children:[a.jsx(s,{}),a.jsx("div",{className:g().main_content,children:e}),a.jsx("div",{className:g().right_section,children:a.jsx(x,{})})]}),a.jsx(p,{})]}),a.jsx(m,{})]})})})})})})})}},91884:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(72051),n=r(4050);function o(){return a.jsx(n.Z,{})}},59198:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(45347).createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\not-found.tsx#default`)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(54564);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},71150:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(54564);let n=e=>[{type:"image/png",sizes:"1024x1024",url:(0,a.fillMetadataSegment)(".",e.params,"icon.png")+"?2fc06eb83a5d3106"}]},5023:()=>{}};