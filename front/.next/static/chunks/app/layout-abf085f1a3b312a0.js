(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{64420:function(e,t,n){Promise.resolve().then(n.t.bind(n,14811,23)),Promise.resolve().then(n.bind(n,66324)),Promise.resolve().then(n.bind(n,90586)),Promise.resolve().then(n.bind(n,37686)),Promise.resolve().then(n.bind(n,59975)),Promise.resolve().then(n.bind(n,94140)),Promise.resolve().then(n.bind(n,36418)),Promise.resolve().then(n.bind(n,62814)),Promise.resolve().then(n.bind(n,29631)),Promise.resolve().then(n.bind(n,83770)),Promise.resolve().then(n.bind(n,33520)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.t.bind(n,34121,23))},56162:function(e,t,n){"use strict";n.d(t,{Bh:function(){return u},Ky:function(){return a},S0:function(){return s},b8:function(){return l},ec:function(){return d},mi:function(){return c},mr:function(){return o},u3:function(){return i},w4:function(){return p}});var r=n(83464);let a=async()=>(await r.Z.get("".concat("http://localhost:9999","/api/channels"),{withCredentials:!0})).data,o=async e=>(await r.Z.get("".concat("http://localhost:9999","/api/channels/").concat(e),{withCredentials:!0})).data,i=async e=>(await r.Z.get("".concat("http://localhost:9999","/api/channels/slug/").concat(e),{withCredentials:!0})).data,l=async e=>(await r.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{},{withCredentials:!0})).data,s=async e=>(await r.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{withCredentials:!0})).data,d=async()=>(await r.Z.get("".concat("http://localhost:9999","/api/channels/user/subscriptions"),{withCredentials:!0})).data,c=async(e,t)=>(await r.Z.post("".concat("http://localhost:9999","/api/channels/create"),{channelName:e,slug:t},{withCredentials:!0})).data,u=async(e,t)=>{let n=new FormData;return n.append("channelImage",t),(await r.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/upload-image"),n,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},p=async e=>(await r.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/image"),{withCredentials:!0})).data},83076:function(e,t,n){"use strict";n.d(t,{FY:function(){return a},Go:function(){return s},Ix:function(){return l},kW:function(){return i},no:function(){return d},xQ:function(){return o}});var r=n(47990);let a=async()=>(await r.Z.get("".concat("http://localhost:9999","/api/notifications"),{withCredentials:!0})).data.filter(e=>"comment"===e.type||"reply"===e.type),o=async()=>(await r.Z.get("".concat("http://localhost:9999","/api/notifications"),{withCredentials:!0})).data.filter(e=>"channel_post"===e.type),i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await r.Z.get("".concat("http://localhost:9999","/api/notifications/all"),{params:{page:e,limit:t},withCredentials:!0})).data},l=async e=>{await r.Z.patch("".concat("http://localhost:9999","/api/notifications/").concat(e,"/read"),{},{withCredentials:!0})},s=async()=>{await r.Z.patch("".concat("http://localhost:9999","/api/notifications/read-all"),{},{withCredentials:!0})},d=async e=>{await r.Z.delete("".concat("http://localhost:9999","/api/notifications/").concat(e),{withCredentials:!0})}},59975:function(e,t,n){"use strict";var r=n(57437),a=n(2265),o=n(27648),i=n(2069),l=n(46387),s=n(35389),d=n(15273),c=n(87055),u=n(11741),p=n(67116),h=n(8350),x=n(67571),g=n(31691),b=n(96407),f=n(4871),m=n(80605),v=n(99376);t.default=()=>{var e;let t=(0,g.Z)(),n=(0,v.useRouter)(),y=(0,v.usePathname)(),{subscribedChannels:j,loading:k,error:Z,loadSubscriptions:w,clearSubscriptions:C}=(0,b.Z)(),{currentChannelSlug:S,currentPage:z,currentCategory:I,stories:F}=(0,f.X)(),{data:D}=(0,m.useSession)(),_=(null==y?void 0:y.includes("/channels/"))&&(null==y?void 0:y.includes("/detail/")),P=null==y?void 0:null===(e=y.match(/\/channels\/([^\/]+)/))||void 0===e?void 0:e[1],R=_&&S===P&&F.length>0;return(0,a.useEffect)(()=>{(null==D?void 0:D.user)?w():C()},[null==D?void 0:D.user,w,C]),(0,r.jsxs)(i.Z,{sx:{position:"fixed",top:150,left:20,display:{xs:"none",sm:"none",md:"none",lg:"flex"},flexDirection:"column",width:"230px",maxHeight:"calc(100vh - 120px)",overflow:"auto",bgcolor:"dark"===t.palette.mode?"rgba(26, 26, 46, 0.95)":"rgba(255, 255, 255, 0.95)",border:"dark"===t.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"12px",boxShadow:"dark"===t.palette.mode?"0 8px 25px rgba(139, 92, 246, 0.15)":"0 4px 20px rgba(0, 0, 0, 0.1)",p:2,backdropFilter:"blur(10px)",zIndex:999},children:[(0,r.jsx)(l.Z,{variant:"subtitle2",sx:{color:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2",fontWeight:600,mb:1,px:1},children:"구독한 채널"}),k?(0,r.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,r.jsx)(s.Z,{size:20})}):j.length>0?(0,r.jsx)(d.Z,{dense:!0,children:j.map(e=>(0,r.jsx)(c.ZP,{disablePadding:!0,children:(0,r.jsxs)(u.Z,{component:o.default,href:"/channels/".concat(e.slug),sx:{borderRadius:1,py:.5,"&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.04)"}},children:[(0,r.jsx)(p.Z,{sx:{width:24,height:24,mr:1,fontSize:"0.8rem",background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.6), rgba(6, 182, 212, 0.6))":"linear-gradient(135deg, #1976d2, #42a5f5)"},children:e.channel_name.charAt(0)}),(0,r.jsxs)(i.Z,{sx:{flex:1,minWidth:0},children:[(0,r.jsx)(l.Z,{variant:"body2",sx:{color:"dark"===t.palette.mode?"#e2e8f0":"inherit",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.channel_name}),(0,r.jsxs)(l.Z,{variant:"caption",sx:{color:"dark"===t.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)"},children:[e.story_count,"개 글"]})]})]})},e.id))}):(0,r.jsx)(l.Z,{variant:"caption",sx:{color:"dark"===t.palette.mode?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",px:1,display:"block"},children:"구독한 채널이 없습니다"}),R&&(0,r.jsx)(h.Z,{sx:{my:2,borderColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.2)":"rgba(0, 0, 0, 0.1)"}}),R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Z,{variant:"subtitle2",sx:{color:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2",fontWeight:600,mb:1,px:1},children:["현재 페이지 (",z,"페이지)"]}),(0,r.jsx)(d.Z,{dense:!0,children:F.map(e=>(0,r.jsx)(c.ZP,{disablePadding:!0,children:(0,r.jsx)(u.Z,{onClick:()=>{n.push("/channels/".concat(S,"/detail/story/").concat(e.id))},sx:{borderRadius:1,py:.5,px:1,"&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.04)"}},children:(0,r.jsxs)(i.Z,{sx:{flex:1,minWidth:0},children:[(0,r.jsx)(l.Z,{variant:"body2",sx:{color:"dark"===t.palette.mode?"#e2e8f0":"inherit",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.8rem",lineHeight:1.2},children:e.title}),(0,r.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:.5,mt:.25},children:[(0,r.jsx)(x.Z,{label:"all"===e.category?"전체":e.category,size:"small",sx:{height:16,fontSize:"0.65rem",backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.2)":"rgba(25, 118, 210, 0.1)",color:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.8)":"#1976d2","& .MuiChip-label":{px:.5}}}),(0,r.jsx)(l.Z,{variant:"caption",sx:{color:"dark"===t.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",fontSize:"0.7rem"},children:e.nickname})]})]})})},e.id))}),(0,r.jsxs)(l.Z,{variant:"caption",sx:{color:"dark"===t.palette.mode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",px:1,display:"block",textAlign:"center",mt:1},children:["총 ",F.length,"개 게시글"]})]})]})}},94140:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var r=n(57437),a=n(80605);function o(e){let{children:t}=e;return(0,r.jsx)(a.SessionProvider,{children:t})}},36418:function(e,t,n){"use strict";var r=n(57437),a=n(2265),o=n(80605),i=n(2069),l=n(46387),s=n(91991),d=n(59832),c=n(8444),u=n(82279),p=n(33188),h=n(8430);t.default=e=>{let{children:t}=e,{data:n}=(0,o.useSession)(),[x,g]=(0,a.useState)("default"),[b,f]=(0,a.useState)(!1),[m,v]=(0,a.useState)(!1),[y,j]=(0,a.useState)("");(0,a.useEffect)(()=>{"Notification"in window&&(g(Notification.permission),(null==n?void 0:n.user)&&"default"===Notification.permission&&f(!0))},[n]);let k=async()=>{if("Notification"in window)try{let e=await Notification.requestPermission();g(e),f(!1),"granted"===e?(j("브라우저 알림이 활성화되었습니다! 이제 댓글 알림을 받을 수 있습니다."),v(!0),Z({title:"Study Board 알림 설정 완료",body:"이제 새로운 댓글 알림을 받을 수 있습니다!",icon:"/icon.png"})):"denied"===e&&(j("알림 권한이 거부되었습니다. 브라우저 설정에서 변경할 수 있습니다."),v(!0))}catch(e){console.error("알림 권한 요청 실패:",e)}},Z=e=>{if("granted"===x&&"Notification"in window){let t=new Notification(e.title,{body:e.body,icon:e.icon||"/icon.png",badge:"/icon.png",tag:"study-board-notification",requireInteraction:!1,data:e.data});return t.onclick=()=>{window.focus(),e.onClick&&e.onClick(),t.close()},setTimeout(()=>{t.close()},5e3),t}return null},w=e=>{let t=e.content.length>100?e.content.substring(0,100)+"...":e.content;return Z({title:"".concat(e.authorName,"님이 댓글을 남겼습니다"),body:t,icon:"/icon.png",data:{type:"comment",storyId:e.storyId,commentId:e.commentId,channelSlug:e.channelSlug},onClick:()=>{let t=e.channelSlug?"/channels/".concat(e.channelSlug,"/detail/story/").concat(e.storyId,"#comment-").concat(e.commentId):"/detail/story/".concat(e.storyId,"#comment-").concat(e.commentId);window.location.href=t}})},C=e=>{let t=e.title.length>80?e.title.substring(0,80)+"...":e.title;return Z({title:"".concat(e.channelName," 채널에 새 게시글이 올라왔습니다"),body:"".concat(e.authorName,": ").concat(t),icon:"/icon.png",data:{type:"channel_post",storyId:e.storyId,channelSlug:e.channelSlug},onClick:()=>{let t="/channels/".concat(e.channelSlug,"/detail/story/").concat(e.storyId);window.location.href=t}})};return(0,a.useEffect)(()=>{window.showCommentNotification=w,window.showChannelPostNotification=C,window.showBrowserNotification=Z},[x]),(0,r.jsxs)(r.Fragment,{children:[t,b&&(0,r.jsx)(i.Z,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:9999,backgroundColor:"primary.main",color:"white",p:2},children:(0,r.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1200,margin:"0 auto"},children:[(0,r.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(p.Z,{}),(0,r.jsx)(l.Z,{variant:"body1",children:"새로운 댓글 알림을 받으시겠습니까? 브라우저 알림을 허용하면 실시간으로 알림을 받을 수 있습니다."})]}),(0,r.jsxs)(i.Z,{sx:{display:"flex",gap:1},children:[(0,r.jsx)(s.Z,{variant:"outlined",color:"inherit",size:"small",onClick:k,sx:{borderColor:"white",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"white"}},children:"허용"}),(0,r.jsx)(d.Z,{size:"small",onClick:()=>f(!1),sx:{color:"white"},children:(0,r.jsx)(h.Z,{})})]})]})}),(0,r.jsx)(c.Z,{open:m,autoHideDuration:4e3,onClose:()=>v(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,r.jsx)(u.Z,{onClose:()=>v(!1),severity:"granted"===x?"success":"warning",sx:{width:"100%"},children:y})})]})}},62814:function(e,t,n){"use strict";var r=n(57437),a=n(2265),o=n(21623),i=n(29827),l=n(3204),s=n(40257);t.default=function(e){let{children:t}=e,[n]=(0,a.useState)(new o.S({defaultOptions:{queries:{refetchOnWindowFocus:!1,retryOnMount:!0,refetchOnReconnect:!1,retry:!1}}}));return(0,r.jsxs)(i.aH,{client:n,children:[t,(0,r.jsx)(l.t,{initialIsOpen:"local"===s.env.NEXT_PUBLIC_MODE})]})}},29631:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var r=n(57437),a=n(2265),o=n(80605),i=n(96407);function l(e){let{children:t}=e,{data:n,status:l}=(0,o.useSession)(),{subscribedChannels:s,loading:d,loadSubscriptions:c,clearSubscriptions:u}=(0,i.Z)(),p=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{"authenticated"===l&&(null==n?void 0:n.user)&&!d&&0===s.length&&!p.current&&(p.current=!0,c()),"unauthenticated"===l&&s.length>0&&(p.current=!1,u())},[l,null==n?void 0:n.user,d,s.length]),(0,r.jsx)(r.Fragment,{children:t})}},83770:function(e,t,n){"use strict";n.d(t,{default:function(){return p}});var r=n(57437),a=n(2265),o=n(59619),i=n(93062),l=n(95387),s=n(99163);let d={typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600,borderRadius:12,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}}}},c=(0,s.Z)({...d,palette:{mode:"light",primary:{main:"#6366f1",light:"#818cf8",dark:"#4f46e5",contrastText:"#ffffff"},secondary:{main:"#ec4899",light:"#f472b6",dark:"#db2777",contrastText:"#ffffff"},background:{default:"#f8fafc",paper:"#ffffff"},text:{primary:"#1e293b",secondary:"#64748b"}},components:{...d.components,MuiAppBar:{styleOverrides:{root:{backgroundColor:"#ffffff",color:"#1e293b",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)"}}}}}),u=(0,s.Z)({...d,palette:{mode:"dark",primary:{main:"#8b5cf6",light:"#a78bfa",dark:"#7c3aed",contrastText:"#ffffff"},secondary:{main:"#06b6d4",light:"#22d3ee",dark:"#0891b2",contrastText:"#ffffff"},background:{default:"#0f0f23",paper:"#1a1a2e"},text:{primary:"#e2e8f0",secondary:"#94a3b8"},error:{main:"#ef4444",light:"#f87171",dark:"#dc2626"},warning:{main:"#f59e0b",light:"#fbbf24",dark:"#d97706"},info:{main:"#3b82f6",light:"#60a5fa",dark:"#2563eb"},success:{main:"#10b981",light:"#34d399",dark:"#059669"}},components:{...d.components,MuiAppBar:{styleOverrides:{root:{backgroundColor:"#1a1a2e",color:"#e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600,borderRadius:12,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:"0 0 20px rgba(139, 92, 246, 0.4)",transform:"translateY(-1px)"}},contained:{background:"linear-gradient(45deg, #8b5cf6 30%, #06b6d4 90%)",boxShadow:"0 4px 15px 0 rgba(139, 92, 246, 0.3)","&:hover":{background:"linear-gradient(45deg, #7c3aed 30%, #0891b2 90%)",boxShadow:"0 6px 20px 0 rgba(139, 92, 246, 0.5)"}},outlined:{borderColor:"rgba(139, 92, 246, 0.5)",color:"#8b5cf6","&:hover":{borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",boxShadow:"0 0 15px rgba(139, 92, 246, 0.3)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:"#1a1a2e",border:"1px solid rgba(139, 92, 246, 0.2)","&:hover":{border:"1px solid rgba(139, 92, 246, 0.4)",boxShadow:"0 8px 25px rgba(139, 92, 246, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(139, 92, 246, 0.3)"},"&:hover fieldset":{borderColor:"rgba(139, 92, 246, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#8b5cf6",boxShadow:"0 0 10px rgba(139, 92, 246, 0.3)"}}}}},MuiAvatar:{styleOverrides:{root:{border:"2px solid rgba(139, 92, 246, 0.3)","&:hover":{border:"2px solid rgba(139, 92, 246, 0.6)",boxShadow:"0 0 15px rgba(139, 92, 246, 0.4)"}}}}}});function p(e){let{children:t}=e,{isDarkMode:n}=(0,l.f)(),s=n?u:c,d=(0,a.useCallback)(()=>{let e=document.documentElement;requestAnimationFrame(()=>{n?e.setAttribute("data-theme","dark"):e.removeAttribute("data-theme")})},[n]);return(0,a.useLayoutEffect)(()=>{d()},[d]),(0,r.jsxs)(o.Z,{theme:s,children:[(0,r.jsx)(i.ZP,{enableColorScheme:!0}),t]})}},33520:function(e,t,n){"use strict";n.d(t,{default:function(){return Y}});var r=n(57437),a=n(2265),o=n(2069),i=n(59832),l=n(84485),s=n(31691),d=n(67116),c=n(91991),u=n(98534),p=n(42187),h=n(53431),x=n(67051),g=n(99376),b=n(47990),f=n(65361),m=n.n(f),v=n(80605),y=n(27648),j=n(16593),k=n(30419),Z=n(69183),w=n(99154),C=n(75293),S=n(46387),z=n(8350),I=n(35389),F=n(33188),D=n(29827),_=n(21770),P=n(83076),R=n(39795),E=n(56410),B=()=>{let e=(0,g.useRouter)(),t=(0,D.NL)(),[n,l]=(0,a.useState)(null),{data:s}=(0,v.useSession)(),d=(0,a.useRef)([]),h=(0,a.useRef)(!0),{data:x=[],isLoading:b}=(0,j.a)({queryKey:["unreadCommentNotifications"],queryFn:P.FY,refetchInterval:15e3,enabled:!!(null==s?void 0:s.user)});(0,a.useEffect)(()=>{if(!x||h.current){d.current=x,h.current=!1;return}let e=d.current,t=x.filter(t=>!e.some(e=>e.id===t.id));t.length>0&&t.forEach(e=>{if("comment"===e.type||"reply"===e.type){let t=window.showCommentNotification;t&&e.comment&&t({authorName:e.comment.author.nickname,content:e.comment.content,storyId:e.comment.storyId,commentId:e.comment.id,channelSlug:e.comment.channelSlug})}}),d.current=x},[x]);let f=(0,_.D)({mutationFn:P.Ix,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadCommentNotifications"]})}}),m=(0,_.D)({mutationFn:P.Go,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadCommentNotifications"]})}}),y=()=>{l(null)},k=async t=>{if(t.isRead||await f.mutateAsync(t.id),"comment"===t.type||"reply"===t.type){var n,r;if((null===(n=t.comment)||void 0===n?void 0:n.storyId)&&(null===(r=t.comment)||void 0===r?void 0:r.channelSlug)){let n="/channels/".concat(t.comment.channelSlug,"/detail/story/").concat(t.comment.storyId,"#comment-").concat(t.comment.id);e.push(n)}}y()},Z=async()=>{await m.mutateAsync()},w=e=>(0,R.Q)(new Date(e),{addSuffix:!0,locale:E.ko}),B=e=>{var t,n,a,o;if("comment"===e.type){let a=(null===(t=e.comment)||void 0===t?void 0:t.author.nickname)||"알 수 없는 사용자",o=(null===(n=e.comment)||void 0===n?void 0:n.content)||"",i=o.length>30?o.substring(0,30)+"...":o;return(0,r.jsxs)(r.Fragment,{children:["".concat(a,"님이 회원님의 글에 댓글을 남겼습니다."),(0,r.jsx)("br",{}),i]})}if("reply"!==e.type)return e.message||"새로운 알림이 있습니다.";{let t=(null===(a=e.comment)||void 0===a?void 0:a.author.nickname)||"알 수 없는 사용자",n=(null===(o=e.comment)||void 0===o?void 0:o.content)||"",i=n.length>30?n.substring(0,30)+"...":n;return(0,r.jsxs)(r.Fragment,{children:["".concat(t,"님이 회원님의 댓글에 답글을 남겼습니다."),(0,r.jsx)("br",{}),i]})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:"large","aria-label":"댓글 알림",color:"inherit",onClick:e=>{l(e.currentTarget)},sx:{mr:1,color:"white"},children:(0,r.jsx)(C.Z,{badgeContent:x.length,color:"error",children:(0,r.jsx)(F.Z,{})})}),(0,r.jsxs)(u.Z,{anchorEl:n,open:!!n,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{width:350,maxHeight:500,overflow:"auto"}}},children:[(0,r.jsxs)(o.Z,{sx:{px:2,py:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(S.Z,{variant:"h6",fontWeight:"bold",children:"댓글 알림"}),x.length>0&&(0,r.jsx)(c.Z,{size:"small",onClick:Z,disabled:m.isPending,children:"모두 읽음"}),(0,r.jsx)(c.Z,{size:"small",onClick:()=>{e.push("/notifications")},sx:{fontSize:"16px"},children:"알림 페이지로 이동"})]}),(0,r.jsx)(z.Z,{}),b?(0,r.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",py:3},children:(0,r.jsx)(I.Z,{size:30})}):0===x.length?(0,r.jsx)(o.Z,{sx:{px:2,py:3,textAlign:"center"},children:(0,r.jsx)(S.Z,{color:"text.secondary",children:"새로운 댓글 알림이 없습니다"})}):x.map(e=>(0,r.jsx)(p.Z,{onClick:()=>k(e),sx:{py:2,px:2,display:"block","&:hover":{backgroundColor:"action.hover"},borderBottom:"1px solid",borderColor:"divider"},children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(S.Z,{variant:"body2",sx:{fontWeight:e.isRead?"normal":"bold",mb:.5},children:B(e)}),(0,r.jsx)(S.Z,{variant:"caption",color:"text.secondary",children:w(e.createdAt)})]})},e.id)),x.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{}),(0,r.jsx)(p.Z,{onClick:()=>{e.push("/notifications"),y()},sx:{py:1.5,justifyContent:"center",color:"primary.main"},children:(0,r.jsx)(S.Z,{variant:"body2",children:"모든 댓글 알림 보기"})})]})]})]})},T=n(81997),N=()=>{let e=(0,g.useRouter)(),t=(0,D.NL)(),[n,l]=(0,a.useState)(null),{data:s}=(0,v.useSession)(),d=(0,a.useRef)([]),h=(0,a.useRef)(!0),{data:x=[],isLoading:b}=(0,j.a)({queryKey:["unreadChannelNotifications"],queryFn:P.xQ,refetchInterval:15e3,enabled:!!(null==s?void 0:s.user)});(0,a.useEffect)(()=>{if(!x||h.current){d.current=x,h.current=!1;return}let e=d.current,t=x.filter(t=>!e.some(e=>e.id===t.id));t.length>0&&t.forEach(e=>{if("channel_post"===e.type){let n=window.showChannelPostNotification;if(n&&e.post){var t;n({authorName:(null===(t=e.post.author)||void 0===t?void 0:t.nickname)||"알수없음",title:e.post.title,channelName:e.post.channelName||"채널",storyId:e.post.id,channelSlug:e.post.channelSlug||""})}}}),d.current=x},[x]);let f=(0,_.D)({mutationFn:P.Ix,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadChannelNotifications"]})}}),m=(0,_.D)({mutationFn:P.Go,onSuccess:()=>{t.invalidateQueries({queryKey:["unreadChannelNotifications"]})}}),y=()=>{l(null)},k=async t=>{if(t.isRead||await f.mutateAsync(t.id),"channel_post"===t.type){var n,r;if((null===(n=t.post)||void 0===n?void 0:n.id)&&(null===(r=t.post)||void 0===r?void 0:r.channelSlug)){let n="/channels/".concat(t.post.channelSlug,"/detail/story/").concat(t.post.id);e.push(n)}}y()},Z=async()=>{await m.mutateAsync()},w=e=>(0,R.Q)(new Date(e),{addSuffix:!0,locale:E.ko}),F=e=>{if("channel_post"!==e.type)return e.message||"새로운 알림이 있습니다.";{var t,n,a,o;let i=(null===(n=e.post)||void 0===n?void 0:null===(t=n.author)||void 0===t?void 0:t.nickname)||"알 수 없는 사용자",l=(null===(a=e.post)||void 0===a?void 0:a.title)||"",s=(null===(o=e.post)||void 0===o?void 0:o.channelName)||"채널",d=l.length>30?l.substring(0,30)+"...":l;return(0,r.jsxs)(r.Fragment,{children:[s,"에 ",i,"님이 새 게시글을 올렸습니다.",(0,r.jsx)("br",{}),d]})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:"large","aria-label":"채널 알림",color:"inherit",onClick:e=>{l(e.currentTarget)},sx:{mr:1,color:"white"},children:(0,r.jsx)(C.Z,{badgeContent:x.length,color:"secondary",children:(0,r.jsx)(T.Z,{})})}),(0,r.jsxs)(u.Z,{anchorEl:n,open:!!n,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{width:400,maxHeight:500,overflow:"auto"}}},children:[(0,r.jsxs)(o.Z,{sx:{px:2,py:1.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(S.Z,{variant:"h6",fontWeight:"bold",children:"채널 알림"}),x.length>0&&(0,r.jsx)(c.Z,{size:"small",onClick:Z,disabled:m.isPending,children:"모두 읽음"}),(0,r.jsx)(c.Z,{size:"small",onClick:()=>{e.push("/channel-notifications")},sx:{fontSize:"16px"},children:"채널 알림 페이지로 이동"})]}),(0,r.jsx)(z.Z,{}),b?(0,r.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",py:3},children:(0,r.jsx)(I.Z,{size:30})}):0===x.length?(0,r.jsx)(o.Z,{sx:{px:2,py:3,textAlign:"center"},children:(0,r.jsx)(S.Z,{color:"text.secondary",children:"새로운 채널 알림이 없습니다"})}):x.map(e=>(0,r.jsx)(p.Z,{onClick:()=>k(e),sx:{py:2,px:2,display:"block","&:hover":{backgroundColor:"action.hover"},borderBottom:"1px solid",borderColor:"divider"},children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(S.Z,{variant:"body2",sx:{fontWeight:e.isRead?"normal":"bold",mb:.5},children:F(e)}),(0,r.jsx)(S.Z,{variant:"caption",color:"text.secondary",children:w(e.createdAt)})]})},e.id)),x.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{}),(0,r.jsx)(p.Z,{onClick:()=>{e.push("/channel-notifications"),y()},sx:{py:1.5,justifyContent:"center",color:"primary.main"},children:(0,r.jsx)(S.Z,{variant:"body2",children:"모든 채널 알림 보기"})})]})]})]})},A=n(24902),O=n(40024),W=n(48394),q=n(95387);let M=(0,n(16210).ZP)(i.Z)(e=>{let{theme:t}=e;return{position:"relative",width:48,height:48,borderRadius:"50%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",..."light"===t.palette.mode&&{backgroundColor:"rgba(99, 102, 241, 0.1)",color:"#6366f1",border:"2px solid rgba(99, 102, 241, 0.2)","&:hover":{backgroundColor:"rgba(99, 102, 241, 0.2)",transform:"scale(1.05)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.3)"}},..."dark"===t.palette.mode&&{backgroundColor:"rgba(139, 92, 246, 0.1)",color:"#a78bfa",border:"2px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 0 10px rgba(139, 92, 246, 0.2)","&:hover":{backgroundColor:"rgba(139, 92, 246, 0.2)",transform:"scale(1.05)",boxShadow:"0 0 20px rgba(139, 92, 246, 0.4), 0 0 40px rgba(139, 92, 246, 0.2)",border:"2px solid rgba(139, 92, 246, 0.5)"},"&:active":{transform:"scale(0.95)",boxShadow:"0 0 25px rgba(139, 92, 246, 0.6)"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"linear-gradient(45deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.1))",opacity:0,transition:"opacity 0.3s ease"},"&:hover::before":{opacity:1}},"& .MuiSvgIcon-root":{fontSize:"1.5rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"rotate(180deg)"}}}});var U=()=>{let{isDarkMode:e,toggleTheme:t}=(0,q.f)();return(0,s.Z)(),(0,r.jsx)(A.Z,{title:e?"라이트 모드로 전환":"다크 모드로 전환",placement:"bottom",arrow:!0,children:(0,r.jsx)(M,{onClick:t,"aria-label":"테마 전환",size:"medium",children:e?(0,r.jsx)(O.Z,{}):(0,r.jsx)(W.Z,{})})})},L=n(32841),K=n(77716),H=n(19693),Q=n(14759),G=n(77692);function Y(){let e=(0,g.useRouter)(),t=(0,s.Z)(),{data:n,status:f}=(0,v.useSession)(),{showMessage:C}=(0,k.U)(e=>e),{setUserImageUrl:S,TopBarImageDelete:z}=(0,Z.a)(),{setCurrentPage:I}=(0,w.Z)(),[F,D]=(0,a.useState)(null),_={borderRadius:"12px",padding:"8px 20px",fontWeight:600,textTransform:"none",position:"relative",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",transition:"left 0.5s ease"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)","&::before":{left:"100%"}},"&:active":{transform:"translateY(0px)"}},{data:P,error:R,refetch:E}=(0,j.a)({queryKey:["userTopImage",null==n?void 0:n.user.id],queryFn:async()=>{if((null==n?void 0:n.user)!=null){let e=await b.Z.get("".concat("http://localhost:9999","/api/auth/").concat(n.user.id),{withCredentials:!0});if(null!=e.data.image.link)return e.data.image.link}},enabled:"authenticated"===f,staleTime:1/0});(0,a.useEffect)(()=>{z&&E()},[z]);let T=async()=>{try{let[t]=await Promise.all([await b.Z.post("".concat("http://localhost:9999","/api/auth/logout"),{},{withCredentials:!0}),await (0,v.signOut)()]);200===t.status&&(C("로그아웃 성공","warning"),e.refresh())}catch(e){console.error("로그아웃 실패:",e)}};(0,a.useEffect)(()=>{P&&S(P)},[P]);let A=()=>{D(null)};return(0,r.jsxs)("div",{className:m().container,children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)(y.default,{href:"/channels","aria-label":"Home",className:m().title,onClick:()=>I(1),style:{fontSize:"2rem",fontWeight:"bold",color:"dark"===t.palette.mode?"#A78BFA":"#7C3AED",padding:"0.5rem 1rem",borderRadius:"12px",textDecoration:"none",transition:"all 0.4s ease",display:"inline-block",letterSpacing:"1px",cursor:"pointer",textShadow:"dark"===t.palette.mode?"0 0 20px rgba(167, 139, 250, 0.4), 0 2px 4px rgba(0,0,0,0.3)":"0 0 15px rgba(124, 58, 237, 0.3), 0 2px 4px rgba(0,0,0,0.1)",filter:"dark"===t.palette.mode?"brightness(1.1)":"brightness(1)"},children:"Hobby Channel"}),(0,r.jsx)(U,{})]}),(0,r.jsx)(o.Z,{sx:{width:64,height:64,position:"relative",background:"dark"===t.palette.mode?"linear-gradient(145deg, #2a2a3e 0%, #1a1a2e 50%, #2a2a3e 100%)":"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 50%, #f8f9fa 100%)",borderRadius:"50%",padding:"4px",boxShadow:"dark"===t.palette.mode?"\n              0 12px 40px rgba(0, 0, 0, 0.6),\n              0 4px 12px rgba(139, 92, 246, 0.2),\n              inset 0 2px 4px rgba(255, 255, 255, 0.1),\n              inset 0 -2px 4px rgba(0, 0, 0, 0.4),\n              inset 0 0 20px rgba(139, 92, 246, 0.05)\n            ":"\n              0 12px 40px rgba(0, 0, 0, 0.15),\n              0 4px 12px rgba(218, 165, 32, 0.3),\n              inset 0 2px 4px rgba(255, 255, 255, 0.9),\n              inset 0 -2px 4px rgba(0, 0, 0, 0.1),\n              inset 0 0 20px rgba(218, 165, 32, 0.1)\n            ",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)","&::before":{content:'""',position:"absolute",top:-3,left:-3,right:-3,bottom:-3,background:"dark"===t.palette.mode?"conic-gradient(from 0deg, #8B5CF6, #06B6D4, #10B981, #F59E0B, #EF4444, #8B5CF6)":"conic-gradient(from 0deg, #DAA520, #FF6B6B, #4ECDC4, #45B7D1, #9C27B0, #DAA520)",borderRadius:"50%",opacity:.8,transition:"opacity 0.3s ease",zIndex:-1,animation:"frameGlow 6s linear infinite"},"&::after":{content:'""',position:"absolute",top:2,left:2,right:2,bottom:2,background:"dark"===t.palette.mode?"linear-gradient(145deg, rgba(42, 42, 62, 0.9), rgba(26, 26, 46, 0.9))":"linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(240, 240, 240, 0.9))",borderRadius:"50%",border:"dark"===t.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(218, 165, 32, 0.4)",zIndex:1},"&:hover":{transform:"scale(1.08) rotate(3deg)",boxShadow:"dark"===t.palette.mode?"\n                0 16px 50px rgba(0, 0, 0, 0.8),\n                0 6px 20px rgba(139, 92, 246, 0.4),\n                inset 0 3px 6px rgba(255, 255, 255, 0.15),\n                inset 0 -3px 6px rgba(0, 0, 0, 0.5),\n                inset 0 0 30px rgba(139, 92, 246, 0.1)\n              ":"\n                0 16px 50px rgba(0, 0, 0, 0.25),\n                0 6px 20px rgba(218, 165, 32, 0.5),\n                inset 0 3px 6px rgba(255, 255, 255, 1),\n                inset 0 -3px 6px rgba(0, 0, 0, 0.15),\n                inset 0 0 30px rgba(218, 165, 32, 0.15)\n              ","&::before":{opacity:1,transform:"scale(1.1)"}},"@keyframes frameGlow":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}},children:(0,r.jsx)(d.Z,{src:P?"".concat("http://localhost:9999").concat(P):"/assets/noprofileImage.png",sx:{width:56,height:56,position:"relative",zIndex:2,border:"dark"===t.palette.mode?"2px solid rgba(139, 92, 246, 0.5)":"2px solid rgba(218, 165, 32, 0.7)",boxShadow:"dark"===t.palette.mode?"\n                0 0 25px rgba(139, 92, 246, 0.4),\n                inset 0 3px 6px rgba(255, 255, 255, 0.1),\n                inset 0 -3px 6px rgba(0, 0, 0, 0.3),\n                0 0 0 1px rgba(255, 255, 255, 0.05)\n              ":"\n                0 6px 25px rgba(218, 165, 32, 0.4),\n                inset 0 3px 6px rgba(255, 255, 255, 0.8),\n                inset 0 -3px 6px rgba(0, 0, 0, 0.1),\n                0 0 0 1px rgba(255, 255, 255, 0.3)\n              ",transition:"all 0.3s ease",cursor:"pointer",filter:"contrast(1.08) saturate(1.15) brightness(1.02)","&:hover":{filter:"contrast(1.15) saturate(1.25) brightness(1.08)",transform:"scale(1.02)",boxShadow:"dark"===t.palette.mode?"\n                  0 0 35px rgba(139, 92, 246, 0.6),\n                  inset 0 4px 8px rgba(255, 255, 255, 0.15),\n                  inset 0 -4px 8px rgba(0, 0, 0, 0.4),\n                  0 0 0 2px rgba(255, 255, 255, 0.1)\n                ":"\n                  0 8px 35px rgba(218, 165, 32, 0.5),\n                  inset 0 4px 8px rgba(255, 255, 255, 0.9),\n                  inset 0 -4px 8px rgba(0, 0, 0, 0.15),\n                  0 0 0 2px rgba(255, 255, 255, 0.5)\n                "}}})}),(0,r.jsxs)("nav",{className:m().nav,children:[(null==n?void 0:n.user)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B,{}),(0,r.jsx)(N,{})]}),!(null==n?void 0:n.user)&&(0,r.jsx)(c.Z,{size:"medium",variant:"contained",onClick:()=>e.push("/login"),color:"info",sx:{..._,background:"dark"===t.palette.mode?"linear-gradient(135deg, #3B82F6 0%, #1E40AF 100%)":"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)","&:hover":{..._["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #1E40AF 0%, #1E3A8A 100%)":"linear-gradient(135deg, #1976D2 0%, #1565C0 100%)"}},children:"로그인"}),(null==n?void 0:n.user)&&(0,r.jsx)(c.Z,{size:"medium",variant:"contained",onClick:T,color:"error",sx:{..._,background:"dark"===t.palette.mode?"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)":"linear-gradient(135deg, #F44336 0%, #D32F2F 100%)","&:hover":{..._["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)":"linear-gradient(135deg, #D32F2F 0%, #C62828 100%)"}},children:"로그아웃"}),!(null==n?void 0:n.user)&&(0,r.jsx)(c.Z,{size:"medium",variant:"contained",onClick:()=>e.push("/signup"),color:"inherit",sx:{..._,background:"dark"===t.palette.mode?"linear-gradient(135deg, #6B7280 0%, #4B5563 100%)":"linear-gradient(135deg, #9E9E9E 0%, #757575 100%)",color:"white","&:hover":{..._["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #4B5563 0%, #374151 100%)":"linear-gradient(135deg, #757575 0%, #616161 100%)"}},children:"회원가입"}),(null==n?void 0:n.user)&&(0,r.jsx)(c.Z,{size:"medium",variant:"contained",onClick:()=>e.push("/setting/profile"),color:"error",sx:{..._,background:"dark"===t.palette.mode?"linear-gradient(135deg, #10B981 0%, #059669 100%)":"linear-gradient(135deg, #4CAF50 0%, #388E3C 100%)","&:hover":{..._["&:hover"],background:"dark"===t.palette.mode?"linear-gradient(135deg, #059669 0%, #047857 100%)":"linear-gradient(135deg, #388E3C 0%, #2E7D32 100%)"}},children:"프로필"}),(null==n?void 0:n.user)&&(0,r.jsx)(i.Z,{size:"large",edge:"end","aria-label":"settings menu","aria-haspopup":"true",color:"inherit",sx:{color:"white",borderRadius:"50%",padding:"10px",background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2))":"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(33, 150, 243, 0.1))",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease","&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.3)":"rgba(25, 118, 210, 0.2)",transform:"rotate(90deg) scale(1.1)",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"}},onClick:e=>{D(e.currentTarget)},children:(0,r.jsx)(l.Z,{})}),(0,r.jsxs)(u.Z,{anchorEl:F,open:!!F,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(35, 35, 60, 0.95))":"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.95))",backdropFilter:"blur(20px)",border:"dark"===t.palette.mode?"1px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"12px",boxShadow:"dark"===t.palette.mode?"0 20px 40px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(139, 92, 246, 0.1)":"0 20px 40px rgba(0, 0, 0, 0.1)",overflow:"hidden",minWidth:200},"& .MuiMenuItem-root":{borderRadius:"8px",margin:"4px 8px",padding:"12px 16px",transition:"all 0.2s ease","&:hover":{background:"dark"===t.palette.mode?"linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1))":"linear-gradient(135deg, rgba(25, 118, 210, 0.05), rgba(33, 150, 243, 0.05))",transform:"translateX(4px)"}}},children:[(0,r.jsxs)(p.Z,{onClick:()=>{A(),e.push("/messages")},children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(L.Z,{fontSize:"small"})}),(0,r.jsx)(x.Z,{children:"쪽지"})]}),(0,r.jsxs)(p.Z,{onClick:()=>{A(),e.push("/recent-views")},children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(K.Z,{fontSize:"small"})}),(0,r.jsx)(x.Z,{children:"최근에 봤던 게시물"})]}),(0,r.jsxs)(p.Z,{onClick:()=>{A(),e.push("/scraps")},children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(H.Z,{fontSize:"small"})}),(0,r.jsx)(x.Z,{children:"스크랩"})]}),(0,r.jsxs)(p.Z,{onClick:()=>{A(),e.push("/blinds")},children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(Q.Z,{fontSize:"small"})}),(0,r.jsx)(x.Z,{children:"블라인드"})]}),(0,r.jsxs)(p.Z,{onClick:()=>{A(),e.push("/reports")},children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(G.Z,{fontSize:"small"})}),(0,r.jsx)(x.Z,{children:"신고 목록"})]})]})]})]})}},57507:function(e,t,n){"use strict";var r=n(57437);n(2265);var a=n(31691),o=n(53392),i=n(79507),l=n(77468),s=n(12258),d=n(9026),c=n(91991);t.Z=e=>{let{open:t,title:n,description:u,onConfirm:p,onCancel:h,confirmText:x="확인",cancelText:g="취소"}=e,b=(0,a.Z)();return(0,r.jsxs)(o.Z,{open:t,onClose:h,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",sx:{"& .MuiDialog-paper":{borderRadius:"16px",padding:"10px",backgroundColor:"dark"===b.palette.mode?"rgba(26, 26, 46, 0.95)":"#f9f9f9",boxShadow:"dark"===b.palette.mode?"0px 8px 25px rgba(139, 92, 246, 0.15)":"0px 4px 10px rgba(0, 0, 0, 0.1)",border:"dark"===b.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"none"}},children:[(0,r.jsx)(i.Z,{id:"confirm-dialog-title",sx:{fontWeight:"bold",fontSize:"1.5rem",textAlign:"center",color:"dark"===b.palette.mode?"#a78bfa":"#3f51b5"},children:n}),(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",textAlign:"center",padding:"12px 24px"},children:(0,r.jsx)(s.Z,{id:"confirm-dialog-description",sx:{fontSize:"1rem",color:"dark"===b.palette.mode?"#e2e8f0":"#555",whiteSpace:"pre-line"},children:u})}),(0,r.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"center",gap:"16px",padding:"8px"},children:[(0,r.jsx)(c.Z,{onClick:h,variant:"outlined",color:"primary",sx:{textTransform:"none",fontWeight:"bold",borderRadius:"8px",padding:"8px 16px",color:"dark"===b.palette.mode?"#a78bfa":"#3f51b5",borderColor:"dark"===b.palette.mode?"rgba(139, 92, 246, 0.5)":"#3f51b5","&:hover":{backgroundColor:"dark"===b.palette.mode?"rgba(139, 92, 246, 0.1)":"rgba(63, 81, 181, 0.04)",borderColor:"dark"===b.palette.mode?"rgba(139, 92, 246, 0.8)":"#3f51b5"}},children:g}),(0,r.jsx)(c.Z,{onClick:p,variant:"contained",color:"error",sx:{textTransform:"none",fontWeight:"bold",borderRadius:"8px",padding:"8px 16px",backgroundColor:"dark"===b.palette.mode?"#dc2626":"#f44336","&:hover":{backgroundColor:"dark"===b.palette.mode?"#b91c1c":"#d32f2f"}},children:x})]})]})}},94623:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var r=n(57437),a=n(35389),o=n(31691);function i(){let e=(0,o.Z)();return(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"dark"===e.palette.mode?"rgba(18, 18, 18, 0.3)":"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(1px)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.3s ease"},children:(0,r.jsxs)("div",{style:{textAlign:"center",backgroundColor:"dark"===e.palette.mode?"#1e1e1e":"#ffffff",padding:"24px 32px",borderRadius:"12px",boxShadow:"dark"===e.palette.mode?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 8px 24px rgba(0, 0, 0, 0.15)",border:"dark"===e.palette.mode?"1px solid #333333":"1px solid #e0e0e0"},children:[(0,r.jsx)(a.Z,{size:48,thickness:4,sx:{color:"dark"===e.palette.mode?"#bb86fc":"#1976d2",marginBottom:1}}),(0,r.jsx)("div",{style:{marginTop:"12px",fontSize:"14px",color:"dark"===e.palette.mode?"#e0e0e0":"#666666",fontWeight:500},children:"로딩 중..."})]})})}n(2265)},66324:function(e,t,n){"use strict";n.d(t,{default:function(){return p}});var r=n(57437);n(2265);var a=n(78826),o=n(58414),i=n(8444),l=n(82279);function s(e){return(0,r.jsx)(a.Z,{...e})}function d(e){return(0,r.jsx)(o.Z,{...e,direction:"up"})}function c(e){let{open:t,setOpen:n,message:a,severity:o="success",transition:c="fade"}=e,u=(e,t)=>{"clickaway"!==t&&n(!1)};return(0,r.jsx)(i.Z,{open:t,autoHideDuration:2e3,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:(()=>{switch(c){case"grow":return s;case"slide":return d}})(),children:(0,r.jsx)(l.Z,{onClose:u,severity:o,children:a})})}var u=n(30419);function p(){let{messageState:e,messageContent:t,messageStyle:n,hideMessage:a,messageTransition:o}=(0,u.U)(e=>e);return(0,r.jsx)(r.Fragment,{children:e&&(0,r.jsx)(c,{open:e,setOpen:()=>{a()},message:t,severity:n,transition:o})})}},90586:function(e,t,n){"use strict";n.d(t,{default:function(){return I}});var r=n(57437),a=n(99376),o=n(16593),i=n(44304),l=n(2265),s=n(33145);function d(){return(0,r.jsx)("div",{style:{width:"100%"},children:(0,r.jsx)(s.default,{src:"/assets/right.jpg",alt:"Right Icon",width:0,height:0,sizes:"100vw",style:{width:"100%",height:"auto"}})})}var c=n(67208),u=n(36137),p=n(46387),h=n(15273),x=n(87055),g=n(2069),b=n(67571),f=n(8350),m=n(94896),v=n(83464),y=n(71096),j=n.n(y),k=n(45721),Z=n.n(k),w=n(11471);function C(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),n=null==e?void 0:e.slug,{data:i}=(0,o.a)({queryKey:["channelInfo",n],queryFn:async()=>{if(!n)throw Error("Channel slug is required");return(await v.Z.get("".concat("http://localhost:9999","/api/channels/slug/").concat(n))).data},enabled:!!n,staleTime:6e5}),{data:s,isLoading:d,error:y}=(0,o.a)({queryKey:["channelTopStories",null==i?void 0:i.id,w.jL,w.oi],queryFn:async()=>{if(!(null==i?void 0:i.id))return{results:[],total:0};let e="".concat("http://localhost:9999","/api/story/pageTableData?channelId=").concat(i.id,"&minRecommend=").concat(w.jL,"&limit=").concat(w.oi,"&offset=0");return(await v.Z.get(e)).data},enabled:!!(null==i?void 0:i.id),staleTime:3e5}),k=(null==s?void 0:s.results)||[];if(d)return(0,r.jsx)(c.Z,{sx:{mb:2,boxShadow:2},children:(0,r.jsx)(u.Z,{sx:{p:2},children:(0,r.jsx)(p.Z,{variant:"h6",color:"text.secondary",children:"\uD83D\uDD04 개념글 로딩 중..."})})});if(y)return(0,r.jsx)(c.Z,{sx:{mb:2,boxShadow:2},children:(0,r.jsx)(u.Z,{sx:{p:2},children:(0,r.jsxs)(p.Z,{variant:"h6",color:"error",children:["❌ 개념글 로딩 에러: ",y.message]})})});if(!k||0===k.length)return(0,r.jsx)(c.Z,{sx:{mb:2,boxShadow:2},children:(0,r.jsx)(u.Z,{sx:{p:2,display:"flex",justifyContent:"center"},children:(0,r.jsx)(p.Z,{variant:"h6",color:"text.secondary",children:"\uD83D\uDCED 추천 개념글이 없습니다"})})});let Z=e=>{t.push("/channels/".concat(n,"/detail/story/").concat(e))};return(0,r.jsx)(c.Z,{sx:{mb:1,boxShadow:2},children:(0,r.jsxs)(u.Z,{sx:{p:2},children:[(0,r.jsx)(p.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main",display:"flex",alignItems:"center"},children:"\uD83D\uDD25 이 채널의 개념글"}),(0,r.jsx)(h.Z,{sx:{p:0},children:k.map((e,t)=>(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(x.ZP,{sx:{p:0,cursor:"pointer",borderRadius:1,"&:hover":{bgcolor:"action.hover"}},onClick:()=>Z(e.id),children:(0,r.jsxs)(g.Z,{sx:{width:"100%"},children:[(0,r.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,r.jsx)(p.Z,{variant:"body2",sx:{fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.title}),"question"===e.category&&(0,r.jsx)(b.Z,{label:"질문",size:"small",color:"primary",sx:{fontSize:"0.7rem",height:"20px"}})]}),(0,r.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(p.Z,{variant:"caption",color:"text.secondary",children:[e.nickname," \xb7 ",j()(e.created_at).fromNow()]}),(0,r.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",gap:.5,mr:1},children:[(0,r.jsx)(m.Z,{sx:{fontSize:"14px",color:"error.main"}}),(0,r.jsx)(p.Z,{variant:"caption",color:"error.main",sx:{fontWeight:"bold"},children:e.recommend_Count})]})]})]})}),t<k.length-1&&(0,r.jsx)(f.Z,{sx:{mx:1}})]},e.id))})]})})}j().extend(Z());var S=n(35574),z=n(56162);function I(){let{isCommentOpen:e}=(0,S.x)(),t=(0,a.usePathname)(),n=null==t?void 0:t.startsWith("/channels/"),l=n&&t?t.split("/")[2]:null,{data:s}=(0,o.a)({queryKey:["channel","slug",l],queryFn:()=>(0,z.u3)(l),enabled:!!l&&e,staleTime:3e5});if(e){var c;return(0,r.jsx)(i.Z,{channelId:null==s?void 0:s.id,channelCreatorId:null==s?void 0:null===(c=s.creator)||void 0===c?void 0:c.id})}return(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(C,{}),(0,r.jsx)(d,{})]})}},37686:function(e,t,n){"use strict";var r=n(57437),a=n(137),o=n(13512),i=n(31691);t.default=()=>{let e=(0,i.Z)();return(0,r.jsx)(a.Z,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"맨 위로 이동",sx:{position:"fixed",bottom:64,right:50,background:"dark"===e.palette.mode?"linear-gradient(45deg, #8b5cf6, #06b6d4)":"linear-gradient(45deg, #1E90FF, #C0C0C0)",color:"#fff",boxShadow:"dark"===e.palette.mode?"0px 4px 15px rgba(139, 92, 246, 0.4)":"0px 3px 5px rgba(0, 0, 0, 0.2)","&:hover":{background:"dark"===e.palette.mode?"linear-gradient(45deg, #7c3aed, #0891b2)":"linear-gradient(45deg, #1C86EE, #B0B0B0)",boxShadow:"dark"===e.palette.mode?"0px 6px 20px rgba(139, 92, 246, 0.6)":"0px 4px 8px rgba(0, 0, 0, 0.3)",transform:"dark"===e.palette.mode?"translateY(-2px)":"scale(1.05)"}},children:(0,r.jsx)(o.Z,{})})}},4871:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(3011),a=n(89134);let o=(0,r.U)()((0,a.tJ)((e,t)=>({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1,setChannelPageData:(t,n,r,a)=>{e({currentChannelSlug:t,currentPage:n,currentCategory:r,stories:a,isLoading:!1})},clearChannelPageData:()=>{e({currentChannelSlug:null,currentPage:1,currentCategory:"all",stories:[],isLoading:!1})},updateStory:(n,r)=>{let{stories:a}=t();e({stories:a.map(e=>e.id===n?{...e,...r}:e)})}}),{name:"channel-page-storage",partialize:e=>({currentChannelSlug:e.currentChannelSlug,currentPage:e.currentPage,currentCategory:e.currentCategory,stories:e.stories})}))},30419:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r=(0,n(3011).U)(e=>({messageState:!1,messageContent:"",messageStyle:"success",messageTransition:"fade",showMessage:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fade";return e({messageState:!0,messageContent:t,messageStyle:n,messageTransition:r})},hideMessage:()=>e({messageState:!1,messageContent:""})}))},99154:function(e,t,n){"use strict";let r=(0,n(3011).U)(e=>({currentPage:1,setCurrentPage:t=>e({currentPage:t})}));t.Z=r},96407:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3011),a=n(56162);let o=(0,r.U)((e,t)=>({subscribedChannels:[],loading:!1,error:null,isInitialized:!1,loadSubscriptions:async()=>{let{isInitialized:n}=t();if(!n)try{e({loading:!0,error:null});let t=await (0,a.ec)();e({subscribedChannels:t,loading:!1,isInitialized:!0})}catch(t){var r;if((null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status)===401){e({loading:!1,error:null});return}console.error("구독 채널 목록을 불러오는데 실패했습니다:",t),e({error:"구독 채널 목록을 불러오는데 실패했습니다.",loading:!1})}},addSubscription:n=>{let{subscribedChannels:r}=t();r.find(e=>e.id===n.id)||e({subscribedChannels:[...r,n]})},removeSubscription:n=>{let{subscribedChannels:r}=t();e({subscribedChannels:r.filter(e=>e.id!==n)})},isSubscribed:e=>{let{subscribedChannels:n}=t();return n.some(t=>t.id===e)},clearSubscriptions:()=>{e({subscribedChannels:[],error:null,isInitialized:!1})}}))},95387:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(3011),a=n(89134);let o=(0,r.U)()((0,a.tJ)(e=>({isDarkMode:!1,toggleTheme:()=>e(e=>({isDarkMode:!e.isDarkMode})),setTheme:t=>e({isDarkMode:t})}),{name:"theme-storage"}))},69183:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});let r=(0,n(3011).U)(e=>({userImageUrl:"",setUserImageUrl:t=>e({userImageUrl:t}),TopBarImageDelete:!1,setTopBarImageDelete:()=>e({TopBarImageDelete:!0})}))},2778:function(){},65361:function(e){e.exports={container:"TopBar_container__qLF19",title:"TopBar_title__3rYyW",nav:"TopBar_nav___ZPXR"}},34121:function(e){e.exports={main_container:"layout_main_container__azbLo",content_wrapper:"layout_content_wrapper__lLOxD",main_content:"layout_main_content__GTutG",right_section:"layout_right_section__Quqe0"}}},function(e){e.O(0,[4632,5152,4419,1991,1547,6593,455,2472,7404,9631,605,7037,6931,5679,1256,7571,6476,8921,64,9795,670,8666,9796,8444,3420,9731,2971,2117,1744],function(){return e(e.s=64420)}),_N_E=e.O()}]);