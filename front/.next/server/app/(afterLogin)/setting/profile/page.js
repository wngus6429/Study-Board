(()=>{var e={};e.id=985,e.ids=[985],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},55140:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>d}),r(56496),r(60246),r(91884),r(59198);var a=r(30170),s=r(45002),i=r(83876),o=r.n(i),n=r(66299),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["(afterLogin)",{children:["setting",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,56496)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\(afterLogin)\\setting\\profile\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e),async e=>(await Promise.resolve().then(r.bind(r,71150))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,60246)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,91884)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,59198)),"C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e),async e=>(await Promise.resolve().then(r.bind(r,71150))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["C:\\Users\\wngus\\Documents\\Study-Board\\front\\src\\app\\(afterLogin)\\setting\\profile\\page.tsx"],u="/(afterLogin)/setting/profile/page",c={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(afterLogin)/setting/profile/page",pathname:"/setting/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3681:(e,t,r)=>{Promise.resolve().then(r.bind(r,97772))},97772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var a=r(97247),s=r(28964),i=r(70380),o=r(24222),n=r(42658),l=r(71804),d=r(74247),p=r(24091),u=r(53187),c=r(41755),x=r(9190),g=r(88111),h=r(10863),m=r(19898),b=r(72497),f=r(34178),y=r(64560),w=r(16803),j=r(84957),v=r(84991),Z=r(94290),C=r(56534);let S=function(){let[e,t]=(0,s.useState)(""),[r,S]=(0,s.useState)(null),[k,D]=(0,s.useState)(null),{showMessage:P}=(0,y.U)(e=>e),[q,B]=(0,s.useState)(!1),[F,I]=(0,s.useState)(!1),[W,R]=(0,s.useState)(!1),[G,_]=(0,s.useState)(""),[T,E]=(0,s.useState)(""),A=(0,i.Z)(),z=(0,f.useRouter)(),L=(0,c.NL)(),{data:K,status:U,update:M}=(0,m.useSession)(),{setTopBarImageDelete:Q,setUserImageUrl:$}=(0,w.a)(),O=async e=>(await h.Z.get(`http://localhost:9999/api/auth/${e}`,{withCredentials:!0})).data;"authenticated"===U&&K?.user?.id&&L.prefetchQuery({queryKey:["userInfo",K.user.id],queryFn:()=>O(K.user.id)});let{data:H,error:N,isLoading:J}=(0,x.a)({queryKey:["userInfo",K?.user.id],queryFn:()=>{O(K?.user.id)},retry:1,retryDelay:()=>2e3,enabled:"authenticated"===U,staleTime:1e4,gcTime:3e4}),[V,X]=(0,s.useState)(1),[Y,ee]=(0,s.useState)(1),et=j.Tq,{data:er,error:ea,isLoading:es,isFetching:ei,isPlaceholderData:eo}=(0,x.a)({queryKey:["user","stories",V],queryFn:async()=>{let e=(V-1)*et;return(await h.Z.post("http://localhost:9999/api/auth/userStoryTableData",{offset:e,limit:et,userId:K?.user.id},{withCredentials:!0})).data},enabled:"authenticated"===U,retry:1,retryDelay:()=>2e3,staleTime:1e4,gcTime:3e4,placeholderData:e=>e,refetchOnWindowFocus:!1}),{data:en,error:el,isLoading:ed,isFetching:ep,isPlaceholderData:eu}=(0,x.a)({queryKey:["user","comments",Y],queryFn:async()=>{let e=(Y-1)*et;return(await h.Z.post("http://localhost:9999/api/auth/userCommentsTableData",{offset:e,limit:et,userId:K?.user.id},{withCredentials:!0})).data},retry:1,retryDelay:()=>2e3,enabled:"authenticated"===U,staleTime:1e4,gcTime:3e4,placeholderData:e=>e,refetchOnWindowFocus:!1}),ec=(0,g.D)({mutationFn:async()=>{if(!K?.user.id){P("로그인 해라","error");return}return await h.Z.delete("http://localhost:9999/api/auth/delete",{data:{id:K.user.id},withCredentials:!0})},retry:1,retryDelay:()=>2e3,onSuccess:async()=>{D(null),L.removeQueries({queryKey:["userTopImage",K?.user.id]}),Q(),$(""),P("프로필 사진 삭제 완료","success"),await M({image:null})},onError:e=>{P("프로필 사진 삭제 실패","error"),console.error(e)}}),ex=async()=>{if(e!==T){if(!e.trim()){P("닉네임을 입력해주세요.","warning");return}try{R(!0);let{isAvailable:t,message:r}=(await h.Z.get(`http://localhost:9999/api/auth/check-nickname/${encodeURIComponent(e)}`)).data;if(!t){P(r,"error"),I(!1),B(!0),_(r);return}I(!0),B(!0),_(r)}catch(e){console.error("닉네임 중복 확인 실패:",e),P("중복 확인 중 오류가 발생했습니다.","error");return}finally{R(!1)}}eg.mutate()},eg=(0,g.D)({mutationFn:async()=>{if(!K?.user.id){P("로그인 해라","error");return}if(null!=K){let t=new FormData;return t.append("nickname",e),t.append("id",K.user.id),r&&t.append("profileImage",r),await h.Z.post("http://localhost:9999/api/auth/update",t,{withCredentials:!0})}},retry:1,retryDelay:()=>2e3,onSuccess:async t=>{await M({image:t?.data.image,nickname:t?.data.nickname}),await L.invalidateQueries({queryKey:["userInfo",K?.user.id]}),await L.refetchQueries({queryKey:["userTopImage",K?.user.id]}),E(t?.data.nickname||e),B(!1),I(!1),_(""),P("프로필 변경 완료","success"),z.push("/")},onError:e=>{e.response&&401===e.response.data.statusCode&&P(`${e.response.data.message}`,"error")}}),[eh,em]=(0,s.useState)(!1),[eb,ef]=(0,s.useState)(""),ey=()=>{em(!1),ef(""),ev(!1),eC(""),ek("")},ew=async()=>{try{(await h.Z.post("http://localhost:9999/api/auth/verifyPassword",{id:K?.user.id,currentPassword:eb},{withCredentials:!0})).data?(ev(!0),em(!1),ef(""),P("현재 비밀번호 확인 완료","success")):P("현재 비밀번호가 일치하지 않습니다.","error")}catch(e){P("비밀번호 확인 에러","error")}},[ej,ev]=(0,s.useState)(!1),[eZ,eC]=(0,s.useState)(""),[eS,ek]=(0,s.useState)(""),eD=(0,g.D)({mutationFn:async e=>await h.Z.delete(`http://localhost:9999/api/story/${e}`,{withCredentials:!0}),onSuccess:()=>{P("게시글이 삭제되었습니다.","success"),L.invalidateQueries({queryKey:["user","stories"]})},onError:e=>{P(e.response?.data?.message||"게시글 삭제에 실패했습니다.","error")}}),eP=(0,g.D)({mutationFn:async e=>{if(!K?.user?.id)throw Error("로그인이 필요합니다.");return await h.Z.put(`http://localhost:9999/api/story/profile/comment/${e}`,{userId:K.user.id},{withCredentials:!0})},onSuccess:()=>{P("댓글이 삭제되었습니다.","success"),L.invalidateQueries({queryKey:["user","comments"]})},onError:e=>{P(e.response?.data?.message||"댓글 삭제에 실패했습니다.","error")}}),eq=async()=>{if(eZ!==eS){P("비밀번호가 일치하지 않습니다.","error");return}try{await h.Z.post("http://localhost:9999/api/auth/password",{id:K?.user.id,password:eZ},{withCredentials:!0}),P("비밀번호 변경 완료","success"),ey()}catch(e){P("비밀번호 변경 실패","error")}};return J?a.jsx(b.default,{}):(0,a.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:3,minHeight:"75vh",gap:4},children:[(0,a.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",gap:4,width:"100%",maxWidth:"1400px",alignItems:"flex-start"},children:[a.jsx(o.Z,{sx:{width:"400px",flexShrink:0},children:(0,a.jsxs)(o.Z,{sx:{bgcolor:"background.paper",boxShadow:3,p:3,borderRadius:2},children:[a.jsx(n.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,color:"primary.main",textAlign:"center"},children:"프로필 수정"}),(0,a.jsxs)(o.Z,{display:"flex",flexDirection:"row",alignItems:"flex-start",sx:{gap:3,mb:3},children:[a.jsx(o.Z,{sx:{width:130,height:130,position:"relative",flexShrink:0,background:"dark"===A.palette.mode?"linear-gradient(145deg, #2a2a3e 0%, #1a1a2e 50%, #2a2a3e 100%)":"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 50%, #f8f9fa 100%)",borderRadius:"50%",padding:"6px",boxShadow:"dark"===A.palette.mode?`
                      0 16px 50px rgba(0, 0, 0, 0.6),
                      0 6px 16px rgba(139, 92, 246, 0.3),
                      inset 0 3px 6px rgba(255, 255, 255, 0.1),
                      inset 0 -3px 6px rgba(0, 0, 0, 0.4),
                      inset 0 0 25px rgba(139, 92, 246, 0.05)
                    `:`
                      0 16px 50px rgba(0, 0, 0, 0.15),
                      0 6px 16px rgba(218, 165, 32, 0.3),
                      inset 0 3px 6px rgba(255, 255, 255, 0.9),
                      inset 0 -3px 6px rgba(0, 0, 0, 0.1),
                      inset 0 0 25px rgba(218, 165, 32, 0.1)
                    `,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)","&::before":{content:'""',position:"absolute",top:-4,left:-4,right:-4,bottom:-4,background:"dark"===A.palette.mode?"conic-gradient(from 0deg, #8B5CF6, #06B6D4, #10B981, #F59E0B, #EF4444, #8B5CF6)":"conic-gradient(from 0deg, #DAA520, #FF6B6B, #4ECDC4, #45B7D1, #9C27B0, #DAA520)",borderRadius:"50%",opacity:.8,transition:"opacity 0.3s ease",zIndex:-1,animation:"profileFrameGlow 8s linear infinite"},"&::after":{content:'""',position:"absolute",top:3,left:3,right:3,bottom:3,background:"dark"===A.palette.mode?"linear-gradient(145deg, rgba(42, 42, 62, 0.9), rgba(26, 26, 46, 0.9))":"linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(240, 240, 240, 0.9))",borderRadius:"50%",border:"dark"===A.palette.mode?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(218, 165, 32, 0.4)",zIndex:1},"&:hover":{transform:"scale(1.05) rotate(2deg)",boxShadow:"dark"===A.palette.mode?`
                        0 20px 60px rgba(0, 0, 0, 0.8),
                        0 8px 25px rgba(139, 92, 246, 0.5),
                        inset 0 4px 8px rgba(255, 255, 255, 0.15),
                        inset 0 -4px 8px rgba(0, 0, 0, 0.5),
                        inset 0 0 35px rgba(139, 92, 246, 0.1)
                      `:`
                        0 20px 60px rgba(0, 0, 0, 0.25),
                        0 8px 25px rgba(218, 165, 32, 0.5),
                        inset 0 4px 8px rgba(255, 255, 255, 1),
                        inset 0 -4px 8px rgba(0, 0, 0, 0.15),
                        inset 0 0 35px rgba(218, 165, 32, 0.15)
                      `,"&::before":{opacity:1,transform:"scale(1.1)"}},"@keyframes profileFrameGlow":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}},children:a.jsx(l.Z,{src:k||"/assets/noprofileImage.png",sx:{width:118,height:118,position:"relative",zIndex:2,border:"dark"===A.palette.mode?"3px solid rgba(139, 92, 246, 0.5)":"3px solid rgba(218, 165, 32, 0.7)",boxShadow:"dark"===A.palette.mode?`
                        0 0 30px rgba(139, 92, 246, 0.4),
                        inset 0 4px 8px rgba(255, 255, 255, 0.1),
                        inset 0 -4px 8px rgba(0, 0, 0, 0.3),
                        0 0 0 1px rgba(255, 255, 255, 0.05)
                      `:`
                        0 8px 30px rgba(218, 165, 32, 0.4),
                        inset 0 4px 8px rgba(255, 255, 255, 0.8),
                        inset 0 -4px 8px rgba(0, 0, 0, 0.1),
                        0 0 0 1px rgba(255, 255, 255, 0.3)
                      `,transition:"all 0.3s ease",cursor:"pointer",filter:"contrast(1.08) saturate(1.15) brightness(1.02)","&:hover":{filter:"contrast(1.15) saturate(1.25) brightness(1.08)",transform:"scale(1.02)",boxShadow:"dark"===A.palette.mode?`
                          0 0 40px rgba(139, 92, 246, 0.6),
                          inset 0 5px 10px rgba(255, 255, 255, 0.15),
                          inset 0 -5px 10px rgba(0, 0, 0, 0.4),
                          0 0 0 2px rgba(255, 255, 255, 0.1)
                        `:`
                          0 10px 40px rgba(218, 165, 32, 0.5),
                          inset 0 5px 10px rgba(255, 255, 255, 0.9),
                          inset 0 -5px 10px rgba(0, 0, 0, 0.15),
                          0 0 0 2px rgba(255, 255, 255, 0.5)
                        `}}})}),(0,a.jsxs)(o.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",gap:2},children:[(0,a.jsxs)(o.Z,{display:"flex",gap:1,children:[(0,a.jsxs)(d.Z,{variant:"outlined",component:"label",color:"primary",sx:{flexGrow:1},children:["사진 업로드",a.jsx("input",{type:"file",hidden:!0,onChange:e=>{let t=e.target.files[0];if(t){if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/bmp"].includes(t.type)){P("이미지 파일만 업로드 가능합니다 (JPG, PNG, GIF, WEBP, SVG, BMP).","error");return}if(t.size>512e3){P("파일 크기가 너무 큽니다. 500KB 이하의 파일을 선택하세요.","error");return}S(t),D(URL.createObjectURL(t))}else console.error("파일이 선택되지 않았습니다.")},accept:"image/*"})]}),a.jsx(d.Z,{variant:"outlined",color:"error",onClick:()=>ec.mutate(),sx:{flexGrow:1},children:"사진 삭제"})]}),a.jsx(p.Z,{label:"닉네임",value:e,onChange:e=>{t(e.target.value),B(!1),I(!1),_("")},variant:"outlined",fullWidth:!0}),a.jsx(d.Z,{variant:"contained",color:"primary",fullWidth:!0,sx:{py:1.5,fontWeight:"bold"},onClick:ex,disabled:W||eg.isPending,startIcon:W||eg.isPending?a.jsx(u.Z,{size:20,color:"inherit"}):null,children:W?"닉네임 확인 중...":eg.isPending?"저장 중...":"저장하기"})]})]}),a.jsx(d.Z,{variant:"contained",color:"error",fullWidth:!0,sx:{py:1.5,fontWeight:"bold"},onClick:()=>{eh||ej?ey():em(!0)},children:eh||ej?"비밀번호 변경 취소":"비밀번호 변경"}),eh&&(0,a.jsxs)(o.Z,{sx:{mt:2,width:"100%",bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:2,border:1,borderColor:"divider"},children:[a.jsx(p.Z,{label:"원래 비밀번호",type:"password",fullWidth:!0,variant:"outlined",sx:{mb:2},onChange:e=>ef(e.target.value)}),a.jsx(d.Z,{variant:"contained",color:"warning",fullWidth:!0,sx:{py:1.5,fontWeight:"bold"},onClick:()=>ew(),children:"확인하기"})]}),ej&&(0,a.jsxs)(o.Z,{sx:{mt:2,width:"100%",bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:2,border:1,borderColor:"divider"},children:[a.jsx(n.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,textAlign:"center"},children:"비밀번호 변경"}),a.jsx(p.Z,{label:"새 비밀번호",type:"password",fullWidth:!0,variant:"outlined",sx:{mb:2},onChange:e=>eC(e.target.value)}),a.jsx(p.Z,{label:"새 비밀번호 확인",type:"password",fullWidth:!0,variant:"outlined",sx:{mb:2},onChange:e=>ek(e.target.value)}),a.jsx(d.Z,{variant:"contained",color:"primary",fullWidth:!0,sx:{py:1.5,fontWeight:"bold",mb:1},onClick:eq,children:"비밀번호 변경"}),a.jsx(d.Z,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:1.5,fontWeight:"bold"},onClick:()=>ev(!1),children:"비밀번호 변경 취소"})]})]})}),a.jsx(o.Z,{sx:{flexGrow:1},children:(0,a.jsxs)(o.Z,{sx:{bgcolor:"background.paper",boxShadow:2,borderRadius:2,p:3,position:"relative",minHeight:"400px"},children:[a.jsx(n.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,color:"primary.main",textAlign:"center"},children:"작성한 글"}),ei&&!eo&&a.jsx(o.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"dark"===A.palette.mode?"rgba(26, 26, 46, 0.9)":"rgba(255, 255, 255, 0.8)",zIndex:1,borderRadius:2},children:a.jsx(u.Z,{size:40,sx:{color:"dark"===A.palette.mode?"#a78bfa":"primary.main"}})}),a.jsx(v.Z,{tableData:er?.StoryResults||[],showDeleteButton:!0,onDelete:e=>{eD.mutate(e)}}),a.jsx(o.Z,{sx:{display:"flex",justifyContent:"center",mt:2},children:a.jsx(C.Z,{pageCount:Math.ceil((er?.StoryTotal||0)/et),onPageChange:e=>{X(e.selected+1)},currentPage:V})})]})})]}),a.jsx(o.Z,{sx:{width:"100%",maxWidth:"1400px"},children:(0,a.jsxs)(o.Z,{sx:{bgcolor:"background.paper",boxShadow:2,borderRadius:2,p:3,position:"relative",minHeight:"400px"},children:[a.jsx(n.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,color:"primary.main",textAlign:"center"},children:"작성한 댓글"}),ep&&!eu&&a.jsx(o.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"dark"===A.palette.mode?"rgba(26, 26, 46, 0.9)":"rgba(255, 255, 255, 0.8)",zIndex:1,borderRadius:2},children:a.jsx(u.Z,{size:40,sx:{color:"dark"===A.palette.mode?"#a78bfa":"primary.main"}})}),a.jsx(Z.Z,{tableData:en?.CommentsResults||[],commentsFlag:!1,showDeleteButton:!0,onDelete:e=>{eP.mutate(e)}}),a.jsx(o.Z,{sx:{display:"flex",justifyContent:"center",mt:2},children:a.jsx(C.Z,{pageCount:Math.ceil((en?.CommentsTotal||0)/et),onPageChange:e=>{ee(e.selected+1)},currentPage:Y})})]})})]})}},56496:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(45347).createProxy)(String.raw`C:\Users\wngus\Documents\Study-Board\front\src\app\(afterLogin)\setting\profile\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[379,819,439,33,367],()=>r(55140));module.exports=a})();