(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4487],{41275:function(e,t,n){Promise.resolve().then(n.bind(n,71151))},71151:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(57437),s=n(2265),i=n(16210),a=n(70208),o=n(59469),l=n(52988),c=n(83476),d=n(22095),x=n(32281),h=n(54301),u=n(53410),g=n(19978),p=n(82279),m=n(2069),f=n(46387),j=n(24902),y=n(59832),b=n(35389),Z=n(36476),v=n(99376),k=n(80605),w=n(71096),C=n.n(w),S=n(45721),z=n.n(S);n(49400);var _=n(76672),P=n(19693),A=n(29827),I=n(16593),E=n(21770),N=n(83464),T=n(30419),U=n(94623);C().extend(z()),C().locale("ko");let W=(0,i.ZP)(l.Z)(e=>{let{theme:t}=e;return{["&.".concat(c.Z.head)]:{backgroundColor:t.palette.common.black,color:t.palette.common.white},["&.".concat(c.Z.body)]:{fontSize:14}}}),q=(0,i.ZP)(h.Z)(e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"dark"===t.palette.mode?"rgba(139, 92, 246, 0.15)":"#ffdef0"}}});function F(){let e=(0,v.useRouter)(),{data:t,status:n}=(0,k.useSession)(),{showMessage:i}=(0,T.U)(),l=(0,A.NL)(),[c,w]=(0,s.useState)(1);(0,s.useEffect)(()=>{"unauthenticated"===n&&(i("로그인이 필요합니다.","warning"),e.push("/login"))},[n,e]);let{data:S,isLoading:z,isError:F,error:M}=(0,I.a)({queryKey:["scraps",c],queryFn:async()=>(await N.Z.get("".concat("http://localhost:9999","/api/scrap?page=").concat(c,"&limit=").concat(20),{withCredentials:!0})).data,enabled:!!(null==t?void 0:t.user),staleTime:12e4}),B=(0,E.D)({mutationFn:async e=>await N.Z.delete("".concat("http://localhost:9999","/api/scrap/item/").concat(e),{withCredentials:!0}),onSuccess:()=>{l.invalidateQueries({queryKey:["scraps"]}),i("스크랩이 삭제되었습니다.","success")},onError:e=>{var t,n;console.error("스크랩 삭제 실패",e),i((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||"스크랩 삭제 중 오류가 발생했습니다.","error")}}),D=(e,t)=>{window.confirm('"'.concat(t,'" 스크랩을 삭제하시겠습니까?'))&&B.mutate(e)},K=t=>{var n;let{Story:r}=t;(null===(n=r.Channel)||void 0===n?void 0:n.slug)?e.push("/channels/".concat(r.Channel.slug,"/detail/story/").concat(r.id)):e.push("/detail/".concat(r.id))};if("loading"===n||z)return(0,r.jsx)(U.default,{});if("unauthenticated"===n)return null;if(F)return(0,r.jsx)(g.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,r.jsx)(p.Z,{severity:"error",children:"스크랩 목록을 불러오는 중 오류가 발생했습니다."})});let L=(null==S?void 0:S.scraps)||[],O=(null==S?void 0:S.totalPages)||0;return(0,r.jsxs)(g.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,r.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,r.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(P.Z,{color:"primary"}),(0,r.jsx)(f.Z,{variant:"h4",component:"h1",children:"내 스크랩"})]}),L.length>0&&(0,r.jsxs)(f.Z,{variant:"body2",color:"text.secondary",children:["총 ",(null==S?void 0:S.total)||0,"개의 스크랩"]})]}),(0,r.jsx)(d.Z,{component:u.Z,children:(0,r.jsxs)(a.Z,{"aria-label":"scraps table",sx:{"& .MuiTableCell-root":{borderBottom:"none"}},children:[(0,r.jsx)(x.Z,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(W,{sx:{width:"45%"},children:"제목"}),(0,r.jsx)(W,{sx:{width:"12%",textAlign:"center"},children:"카테고리"}),(0,r.jsx)(W,{sx:{width:"12%",textAlign:"center"},children:"작성자"}),(0,r.jsx)(W,{sx:{width:"12%",textAlign:"center"},children:"조회수"}),(0,r.jsx)(W,{sx:{width:"12%",textAlign:"right"},children:"스크랩일"}),(0,r.jsx)(W,{sx:{width:"7%",textAlign:"center"},children:"삭제"})]})}),(0,r.jsx)(o.Z,{children:0===L.length?(0,r.jsx)(q,{children:(0,r.jsx)(W,{colSpan:6,align:"center",sx:{height:"200px"},children:(0,r.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[(0,r.jsx)(P.Z,{sx:{fontSize:48,color:"text.secondary"}}),(0,r.jsx)(f.Z,{variant:"h6",color:"text.secondary",children:"스크랩한 게시물이 없습니다"}),(0,r.jsx)(f.Z,{variant:"body2",color:"text.secondary",children:"게시물에서 스크랩 버튼을 눌러 저장해보세요"})]})})}):L.map(e=>(0,r.jsxs)(q,{onClick:()=>K(e),sx:{cursor:"pointer"},children:[(0,r.jsx)(W,{children:(0,r.jsx)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,r.jsx)(f.Z,{variant:"body1",color:"text.primary",noWrap:!0,children:e.Story.title})})}),(0,r.jsx)(W,{align:"center",children:(0,r.jsx)(f.Z,{variant:"body2",color:"text.secondary",children:e.Story.category})}),(0,r.jsx)(W,{align:"center",children:(0,r.jsx)(f.Z,{variant:"body2",color:"text.secondary",children:e.Story.User.nickname})}),(0,r.jsx)(W,{align:"center",children:(0,r.jsx)(f.Z,{variant:"body2",color:"text.secondary",children:e.Story.read_count.toLocaleString()})}),(0,r.jsx)(W,{align:"right",children:(0,r.jsx)(f.Z,{variant:"body2",color:"text.secondary",children:C()(e.created_at).fromNow()})}),(0,r.jsx)(W,{align:"center",children:(0,r.jsx)(j.Z,{title:"스크랩 삭제",children:(0,r.jsx)(y.Z,{size:"small",color:"error",onClick:t=>{t.stopPropagation(),D(e.id,e.Story.title)},disabled:B.isPending,children:B.isPending?(0,r.jsx)(b.Z,{size:16}):(0,r.jsx)(_.Z,{fontSize:"small"})})})})]},e.id))})]})}),O>1&&(0,r.jsx)(m.Z,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,r.jsx)(Z.Z,{count:O,page:c,onChange:(e,t)=>{w(t)},color:"primary",size:"large"})})]})}},94623:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var r=n(57437),s=n(35389),i=n(31691);function a(){let e=(0,i.Z)();return(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"dark"===e.palette.mode?"rgba(18, 18, 18, 0.3)":"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(1px)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.3s ease"},children:(0,r.jsxs)("div",{style:{textAlign:"center",backgroundColor:"dark"===e.palette.mode?"#1e1e1e":"#ffffff",padding:"24px 32px",borderRadius:"12px",boxShadow:"dark"===e.palette.mode?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 8px 24px rgba(0, 0, 0, 0.15)",border:"dark"===e.palette.mode?"1px solid #333333":"1px solid #e0e0e0"},children:[(0,r.jsx)(s.Z,{size:48,thickness:4,sx:{color:"dark"===e.palette.mode?"#bb86fc":"#1976d2",marginBottom:1}}),(0,r.jsx)("div",{style:{marginTop:"12px",fontSize:"14px",color:"dark"===e.palette.mode?"#e0e0e0":"#666666",fontWeight:500},children:"로딩 중..."})]})})}n(2265)},30419:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r=(0,n(3011).U)(e=>({messageState:!1,messageContent:"",messageStyle:"success",messageTransition:"fade",showMessage:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fade";return e({messageState:!0,messageContent:t,messageStyle:n,messageTransition:r})},hideMessage:()=>e({messageState:!1,messageContent:""})}))}},function(e){e.O(0,[5152,4419,1547,6593,455,9631,605,5679,6476,2321,9021,2971,2117,1744],function(){return e(e.s=41275)}),_N_E=e.O()}]);