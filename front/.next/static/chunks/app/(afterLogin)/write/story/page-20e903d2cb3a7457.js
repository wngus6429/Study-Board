(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[404],{46093:function(e,a,t){Promise.resolve().then(t.bind(t,77479))},77479:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Z}});var n=t(57437),r=t(31691),o=t(53410),i=t(2069),l=t(46387),s=t(8350),c=t(97404),d=t(91991),p=t(35389),h=t(16593),u=t(21770),x=t(83464),g=t(99376),b=t(2265),f=t(72317),m=t(87761),w=t(30419),y=t(86874),C=t(56162);function Z(){let e=(0,g.useRouter)(),a=(0,g.useSearchParams)(),{showMessage:t}=(0,w.U)(e=>e),Z=(0,r.Z)(),k="dark"===Z.palette.mode,S=null==a?void 0:a.get("channel"),[v,j]=(0,b.useState)(""),[W,D]=(0,b.useState)(""),[E,I]=(0,b.useState)(y.E2),[F,T]=(0,b.useState)([]),[_,M]=(0,b.useState)(!1),{data:R}=(0,h.a)({queryKey:["channel",S],queryFn:()=>(0,C.mr)(Number(S)),enabled:!!S&&"0"!==S,staleTime:3e5}),q=(0,u.D)({mutationFn:async e=>{if(v.length>2&&W.length>2){M(!0),e.preventDefault();let a=new FormData;return a.append("category",E),a.append("title",v),a.append("content",W),S&&a.append("channelId",S),F.forEach((e,t)=>{a.append("images",e)}),Array.from(a.entries()).forEach(e=>{let[a,t]=e}),await x.Z.post("".concat("http://localhost:9999","/api/story/create"),a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})}t("제목과 내용을 3글자 이상 입력해주세요","error")},retry:1,retryDelay:()=>2e3,onSuccess:a=>{M(!1),t("글쓰기 완료","info"),(null==R?void 0:R.slug)?e.push("/channels/".concat(R.slug)):e.push("/")},onError:a=>{t("글쓰기 실패, 이전 화면으로 이동합니다","error"),console.error(a),e.back()}});return(0,n.jsxs)(o.Z,{elevation:0,sx:{p:{xs:3,sm:4,md:5},width:{xs:"98%",sm:"90%",md:"80%",lg:"70%"},maxWidth:"1200px",margin:"auto",mt:{xs:3,sm:4,md:5},mb:5,borderRadius:"16px",boxShadow:k?"0 10px 40px rgba(0, 0, 0, 0.4)":"0 10px 40px rgba(0, 0, 0, 0.07)",background:k?"rgba(30, 32, 38, 0.95)":"#ffffff",position:"relative",overflow:"hidden",border:k?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.2)"},children:[(0,n.jsx)(i.Z,{sx:{position:"absolute",top:0,left:0,right:0,height:"6px",background:"linear-gradient(90deg, #8a2387, #e94057, #f27121)"}}),(0,n.jsx)(l.Z,{variant:"h4",sx:{fontWeight:700,textAlign:"center",mb:1,mt:1,letterSpacing:"-0.5px",background:"linear-gradient(135deg, #8a2387, #e94057, #f27121)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",...k&&{color:"#fff",background:"none",WebkitTextFillColor:"unset"}},children:"스토리 작성"}),R&&(0,n.jsxs)(l.Z,{variant:"subtitle1",sx:{textAlign:"center",mb:2,color:"dark"===Z.palette.mode?"#a78bfa":"#8b5cf6",fontWeight:600},children:["\uD83D\uDCE2 ",R.channel_name," 채널에 작성"]}),(0,n.jsx)(i.Z,{children:(0,n.jsx)(f.Z,{selectArray:y.KX,defaultValue:y.E2,setSelectedCategory:I})}),(0,n.jsx)(s.Z,{sx:{mb:2,opacity:k?.3:.8}}),(0,n.jsxs)(i.Z,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3},noValidate:!0,autoComplete:"off",children:[(0,n.jsx)(c.Z,{required:!0,id:"filled-required",label:"제목",placeholder:"스토리의 제목을 입력해주세요 (3글자 이상)",variant:"outlined",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:k?"rgba(45, 48, 56, 0.8)":"rgba(249, 250, 251, 0.8)",color:k?"#ffffff":"inherit",transition:"all 0.3s ease","&:hover":{backgroundColor:k?"rgba(50, 53, 61, 1)":"rgba(245, 247, 250, 1)",boxShadow:k?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.04)"},"&.Mui-focused":{backgroundColor:k?"rgba(55, 58, 66, 1)":"#ffffff",boxShadow:k?"0 4px 12px rgba(0, 0, 0, 0.4)":"0 4px 12px rgba(0, 0, 0, 0.05)","& fieldset":{borderColor:"#e94057",borderWidth:"2px"}},"& fieldset":{borderColor:k?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.23)"}},"& .MuiInputLabel-root":{fontWeight:500,color:k?"rgba(255, 255, 255, 0.7)":"inherit"},"& .MuiInputLabel-root.Mui-focused":{color:"#e94057"},"& .MuiOutlinedInput-input::placeholder":{color:k?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.6)",opacity:1}},onChange:e=>j(e.target.value)}),(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(l.Z,{variant:"body1",sx:{fontWeight:500,mb:1,color:k?"rgba(255, 255, 255, 0.7)":"inherit",fontSize:"1rem"},children:"내용"}),(0,n.jsx)(m.Z,{value:W,onChange:D,placeholder:"스토리 내용을 자유롭게 작성해주세요 (3글자 이상)",height:"400px",onFilesChange:T})]}),(0,n.jsx)(s.Z,{sx:{opacity:k?.3:.9}}),(0,n.jsxs)(i.Z,{sx:{display:"flex",width:"100%",alignItems:"center"},children:[(0,n.jsx)(d.Z,{onClick:()=>e.back(),variant:"contained",sx:{fontSize:{xs:"0.95rem",sm:"1rem"},textTransform:"none",fontWeight:600,letterSpacing:"0.5px",background:"linear-gradient(135deg, #2196f3, #21cbf3)",boxShadow:k?"0 6px 15px rgba(33, 150, 243, 0.5)":"0 6px 15px rgba(33, 150, 243, 0.3)",transition:"all 0.3s ease","&:hover":{boxShadow:k?"0 8px 20px rgba(33, 150, 243, 0.6)":"0 8px 20px rgba(33, 150, 243, 0.4)",transform:"translateY(-2px)",background:"linear-gradient(135deg, #1976d2, #1e88e5)"},"&:active":{transform:"translateY(0)",boxShadow:k?"0 4px 10px rgba(33, 150, 243, 0.5)":"0 4px 10px rgba(33, 150, 243, 0.3)"},"&:disabled":{background:k?"#333":"#e0e0e0",color:k?"#666":"#a0a0a0",boxShadow:"none"},borderRadius:"12px 0 0 12px",width:{xs:"50%",sm:"30%",md:"25%"},height:"40px"},children:"뒤로가기"}),(0,n.jsx)(d.Z,{variant:"contained",onClick:q.mutate,disabled:_||v.length<3||W.length<3,sx:{fontSize:{xs:"0.95rem",sm:"1rem"},textTransform:"none",fontWeight:600,letterSpacing:"0.5px",background:"linear-gradient(135deg, #8a2387, #e94057, #f27121)",boxShadow:k?"0 6px 15px rgba(233, 64, 87, 0.5)":"0 6px 15px rgba(233, 64, 87, 0.3)",transition:"all 0.3s ease","&:hover":{boxShadow:k?"0 8px 20px rgba(233, 64, 87, 0.6)":"0 8px 20px rgba(233, 64, 87, 0.4)",transform:"translateY(-2px)",background:"linear-gradient(135deg, #7a1d77, #d93a4f, #e2671e)"},"&:active":{transform:"translateY(0)",boxShadow:k?"0 4px 10px rgba(233, 64, 87, 0.5)":"0 4px 10px rgba(233, 64, 87, 0.3)"},"&:disabled":{background:k?"#333":"#e0e0e0",color:k?"#666":"#a0a0a0",boxShadow:"none"},borderRadius:"0 12px 12px 0",width:{xs:"50%",sm:"70%",md:"75%"},height:"40px"},startIcon:_?(0,n.jsx)(p.Z,{size:20,color:"inherit"}):null,children:_?"스토리 등록 중...":"작성하기"})]})]})]})}},56162:function(e,a,t){"use strict";t.d(a,{Bh:function(){return p},Ky:function(){return r},S0:function(){return s},b8:function(){return l},ec:function(){return c},mi:function(){return d},mr:function(){return o},u3:function(){return i},w4:function(){return h}});var n=t(83464);let r=async()=>(await n.Z.get("".concat("http://localhost:9999","/api/channels"),{withCredentials:!0})).data,o=async e=>(await n.Z.get("".concat("http://localhost:9999","/api/channels/").concat(e),{withCredentials:!0})).data,i=async e=>(await n.Z.get("".concat("http://localhost:9999","/api/channels/slug/").concat(e),{withCredentials:!0})).data,l=async e=>(await n.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{},{withCredentials:!0})).data,s=async e=>(await n.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/subscribe"),{withCredentials:!0})).data,c=async()=>(await n.Z.get("".concat("http://localhost:9999","/api/channels/user/subscriptions"),{withCredentials:!0})).data,d=async(e,a)=>(await n.Z.post("".concat("http://localhost:9999","/api/channels/create"),{channelName:e,slug:a},{withCredentials:!0})).data,p=async(e,a)=>{let t=new FormData;return t.append("channelImage",a),(await n.Z.post("".concat("http://localhost:9999","/api/channels/").concat(e,"/upload-image"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},h=async e=>(await n.Z.delete("".concat("http://localhost:9999","/api/channels/").concat(e,"/image"),{withCredentials:!0})).data}},function(e){e.O(0,[3572,7902,5152,4419,1991,1547,6593,455,2472,7404,9631,7037,5679,4636,7799,9859,2971,2117,1744],function(){return e(e.s=46093)}),_N_E=e.O()}]);